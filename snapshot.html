<!DOCTYPE html><html lang="nl"><!-- HTML-Header - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --><head><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta charset="utf-8"><meta name="generator" content="ReSpec 24.5.2"><style>/* --- EXAMPLES --- */
span.example-title {
    text-transform: none;
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example span.example-title {
    color: #999;
}
</style><style>/* --- ISSUES/NOTES --- */
.issue-label {
    text-transform: initial;
}

.warning > p:first-child { margin-top: 0 }
.warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
span.warning { padding: .1em .5em .15em; }

.issue.closed span.issue-number {
    text-decoration: line-through;
}

.warning {
    border-color: #f11;
    border-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}

li.task-list-item {
    list-style: none;
}

input.task-list-item-checkbox {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
}

.issue a.respec-gh-label {
  padding: 5px;
  margin: 0 2px 0 2px;
  font-size: 10px;
  text-transform: none;
  text-decoration: none;
  font-weight: bold;
  border-radius: 4px;
  position: relative;
  bottom: 2px;
  border: none;
}

.issue a.respec-label-dark {
  color: #fff;
  background-color: #000;
}

.issue a.respec-label-light {
  color: #000;
  background-color: #fff;
}
</style>
        
        <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
        <!-- File. . . :  index.html                                                                 -->
        <!-- Bevat . . :  Template voor de index.html die verplicht is voor respec                   -->
        <!--              Gebaseerd op https://github.com/Geonovum/respec/wiki                       -->
        <!--              Deze file moet worden neergezet in de root-directory van de                -->
        <!--              betreffende standaard.                                                     -->
        <!-- Door. . . :  Jan van Gelder                                                             -->
        <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
        <!-- Log . . . :  20181015 - JvG - Initiele versie                                           -->
        <!-- - - - - - - -20191022 - IE - ReSpec file Handreiking Archiveren ruimtelijke plannen     -->
		<!-- - - - - - - - - - - - - - - -                          -  - - - - - - - - - - - - - - - -->

        <!-- meta tags - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
        <meta content="text/html; charset=utf-8" http-equiv="content-type">
        
        
        <!-- Invullen: de titel van de standaard of het document - - - - - - - - - - - - - - - - - - -->
        <title>DisGeo demo 3a Lessons Learned</title>    

        <!-- Kan hier een 'ondertitel' tag worden gemaakt? -->
		
        <!-- Invullen: de naam van de lokale CSS file  - - - - - - - - - - - - - - - - - - - - - - - -->
        <link rel="stylesheet" type="text/css" href="./media/Geonovumstyle.css">
		<link rel="shortcut icon" type="image/x-icon" href="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.ico">
        
        
    <style id="respec-mainstyle">/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* Override code highlighter background */
.hljs {
  background: transparent !important;
}

/* --- INLINES --- */
h1 abbr,
h2 abbr,
h3 abbr,
h4 abbr,
h5 abbr,
h6 abbr,
a abbr {
  border: none;
}

dfn {
  font-weight: bold;
}

a.internalDFN {
  color: inherit;
  border-bottom: 1px solid #99c;
  text-decoration: none;
}

a.externalDFN {
  color: inherit;
  border-bottom: 1px dotted #ccc;
  text-decoration: none;
}

a.bibref {
  text-decoration: none;
}

#references :target {
  background: #eaf3ff;
}

cite .bibref {
  font-style: normal;
}

code {
  color: #c83500;
}

th code {
  color: inherit;
}

/* --- TOC --- */

.toc a,
.tof a {
  text-decoration: none;
}

a .secno,
a .figno {
  color: #000;
}

ul.tof,
ol.tof {
  list-style: none outside none;
}

.caption {
  margin-top: 0.5em;
  font-style: italic;
}

/* --- TABLE --- */

table.simple {
  border-spacing: 0;
  border-collapse: collapse;
  border-bottom: 3px solid #005a9c;
}

.simple th {
  background: #005a9c;
  color: #fff;
  padding: 3px 5px;
  text-align: left;
}

.simple th[scope="row"] {
  background: inherit;
  color: inherit;
  border-top: 1px solid #ddd;
}

.simple td {
  padding: 3px 10px;
  border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
  background: #f0f6ff;
}

/* --- DL --- */

.section dd>p:first-child {
  margin-top: 0;
}

.section dd>p:last-child {
  margin-bottom: 0;
}

.section dd {
  margin-bottom: 1em;
}

.section dl.attrs dd,
.section dl.eldef dd {
  margin-bottom: 0;
}

#issue-summary>ul,
.respec-dfn-list {
  column-count: 2;
}

#issue-summary li,
.respec-dfn-list li {
  list-style: none;
}

details.respec-tests-details {
  margin-left: 1em;
  display: inline-block;
  vertical-align: top;
}

details.respec-tests-details>* {
  padding-right: 2em;
}

details.respec-tests-details[open] {
  z-index: 999999;
  position: absolute;
  border: thin solid #cad3e2;
  border-radius: 0.3em;
  background-color: white;
  padding-bottom: 0.5em;
}

details.respec-tests-details[open]>summary {
  border-bottom: thin solid #cad3e2;
  padding-left: 1em;
  margin-bottom: 1em;
  line-height: 2em;
}

details.respec-tests-details>ul {
  width: 100%;
  margin-top: -0.3em;
}

details.respec-tests-details>li {
  padding-left: 1em;
}

a[href].self-link:hover {
  opacity: 1;
  text-decoration: none;
  background-color: transparent;
}

h2,
h3,
h4,
h5,
h6 {
  position: relative;
}

aside.example .marker > a.self-link {
  color: inherit;
}

h2>a.self-link,
h3>a.self-link,
h4>a.self-link,
h5>a.self-link,
h6>a.self-link {
  border: none;
  color: inherit;
  font-size: 83%;
  height: 2em;
  left: -1.6em;
  opacity: .5;
  position: absolute;
  text-align: center;
  text-decoration: none;
  top: 0;
  transition: opacity .2s;
  width: 2em;
}

h2>a.self-link::before,
h3>a.self-link::before,
h4>a.self-link::before,
h5>a.self-link::before,
h6>a.self-link::before {
  content: "§";
  display: block;
}

@media (max-width: 767px) {
  dd {
    margin-left: 0;
  }

  /* Don't position self-link in headings off-screen */
  h2>a.self-link,
  h3>a.self-link,
  h4>a.self-link,
  h5>a.self-link,
  h6>a.self-link {
    left: auto;
    top: auto;
  }
}

@media print {
  .removeOnSave {
    display: none;
  }
}
</style><link rel="stylesheet" href="https://tools.geostandaarden.nl/respec/style/GN-DEF.css"><link rel="shortcut icon" type="image/x-icon" href="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.ico"><style>/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
}

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold;
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080;
}

.hljs-string,
.hljs-doctag {
  color: #d14;
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold;
}

.hljs-subst {
  font-weight: normal;
}

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold;
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal;
}

.hljs-regexp,
.hljs-link {
  color: #009926;
}

.hljs-symbol,
.hljs-bullet {
  color: #990073;
}

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3;
}

.hljs-meta {
  color: #999;
  font-weight: bold;
}

.hljs-deletion {
  background: #fdd;
}

.hljs-addition {
  background: #dfd;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style><script id="initialUserConfig" type="application/json">{
  "specStatus": "GN-DEF",
  "specType": "AL",
  "format": "markdown",
  "publishDate": "2022-02-11",
  "previousPublishDate": "2021-10-22",
  "previousMaturity": "GN-DEF",
  "github": "https://github.com/geonovum/disgeo-demo-3a",
  "issueBase": "https://github.com/geonovum/disgeo-demo-3a/issues",
  "edDraftURI": "https://geonovum.github.io/disgeo-demo-3a/",
  "editors": [
    {
      "name": "Linda van den Brink",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    },
    {
      "name": "Gabriella Wiersma",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    }
  ],
  "authors": [
    {
      "name": "Marcel Reuvers",
      "company": "Kadaster",
      "companyURL": "https://www.kadaster.nl"
    },
    {
      "name": "Lennart van Bergen",
      "company": "Kadaster",
      "companyURL": "https://www.kadaster.nl"
    },
    {
      "name": "Rob Wenneker",
      "company": "Kadaster",
      "companyURL": "https://www.kadaster.nl"
    },
    {
      "name": "Wouter Beek",
      "company": "Kadaster",
      "companyURL": "https://www.kadaster.nl"
    },
    {
      "name": "Damir Brnobic",
      "company": "Ministerie van BZK",
      "companyURL": "https://www.rijksoverheid.nl/ministeries/ministerie-van-binnenlandse-zaken-en-koninkrijksrelaties"
    },
    {
      "name": "Pano Maria",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    },
    {
      "name": "Dick Krijtenburg",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    },
    {
      "name": "Linda van den Brink",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    },
    {
      "name": "Gabriella Wiersma",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    },
    {
      "name": "Silvy Horbach",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    },
    {
      "name": "Arnoud de Boer",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    },
    {
      "name": "Bart-Jan de Leuw",
      "company": "CGI",
      "companyURL": "https://www.https://www.rijksoverheid.nl/ministeries/ministerie-van-binnenlandse-zaken-en-koninkrijksrelaties.com"
    }
  ],
  "shortName": "dll3a",
  "pubDomain": "disgeo",
  "licence": "cc-by",
  "localBiblio": {
    "EMSO": {
      "title": "Eisen aan model samenhangende objectregistratie",
      "href": "https://docs.geostandaarden.nl/disgeo/emso/",
      "status": "Definitief",
      "publisher": "Geonovum",
      "editor": "Dick Krijtenburg",
      "authors": [
        "Sandra Leijten",
        "Marcel Rietdijk",
        "Dick Krijtenburg"
      ],
      "id": "emso"
    },
    "MPSOR": {
      "title": "Modelleerprincipes samenhangende objectenregistratie",
      "href": "https://geonovum.github.io/disgeo-imsor/modelleerprincipes/",
      "status": "Werkversie 12 augustus 2021",
      "publisher": "Geonovum",
      "id": "mpsor"
    },
    "NEN3610-2021-ontw": {
      "title": "NEN-3610 Basismodel geo-informatie",
      "status": "Ontwerp",
      "date": "2021",
      "publisher": "NEN",
      "id": "nen3610-2021-ontw"
    },
    "PUB-4": {
      "title": "Titel van Publicatie-4",
      "href": "https://www.geonovum.nl",
      "status": "V1.0.1",
      "publisher": "Publisher-4",
      "company": "Companynaam"
    },
    "MIM": {
      "title": "MIM - Metamodel Informatie Modellering",
      "href": "https://docs.geostandaarden.nl/mim/mim/",
      "status": "Definitief",
      "publisher": "Geonovum",
      "date": "2020-10-23",
      "id": "mim"
    },
    "MODPR": {
      "title": "Modelleerprincipes samenhangende objectenregistratie",
      "href": "https://geonovum.github.io/disgeo-imsor/modelleerprincipes/",
      "status": "levend document",
      "publisher": "Geonovum",
      "id": "modpr"
    },
    "GENDOC": {
      "title": "Overzicht generieke onderwerpen voor DisGeo informatiemodellering",
      "href": "https://geonovum.github.io/disgeo-imsor/documentatie/",
      "status": "levend document",
      "publisher": "Geonovum",
      "id": "gendoc"
    },
    "ARCH": {
      "title": "DiS Geo: Architectuurbeschrijving Voorzieningen Samenhangende Objectenregistratie",
      "href": "https://docs.geostandaarden.nl/disgeo/arch/",
      "status": "Versie ter vaststelling",
      "publisher": "Geonovum",
      "id": "arch"
    },
    "CRS": {
      "title": "Handreiking Gebruik coördinaatreferentiesystemen bij uitwisseling en visualisatie van geo-informatie",
      "href": "https://docs.geostandaarden.nl/crs/cv-hr-crs-20211125/#transformatie-tussen-etrs89-en-itrs-wgs-84",
      "status": "Consultatieversie",
      "publisher": "Geonovum",
      "id": "crs"
    },
    "ADR": {
      "title": "API Design Rules (Nederlandse API Strategie IIa)",
      "href": "https://publicatie.centrumvoorstandaarden.nl/api/adr/",
      "status": "Definitief",
      "publisher": "Geonovum",
      "id": "adr"
    },
    "ogcapi-features": {
      "title": "OGC API - Features - Part 1: Core",
      "href": "http://docs.opengeospatial.org/is/17-069r3/17-069r3.html",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium",
      "id": "ogcapi-features"
    }
  },
  "postProcess": [
    null
  ],
  "publishISODate": "2022-02-11T00:00:00.000Z",
  "generatedSubtitle": "Vastgestelde versie 11 februari 2022"
}</script><meta name="description" content="In het kader van DiSGeo zijn er in een High-5 setting nieuwe inzichten opgedaan omtrent de ontwikkeling van de samenhangende objectenregistratie. Deze High-5 is in 3 tijdsperioden uitgevoerd: tussen 23 en 27 augustus 2021, aangevuld met twee dagen in november 2021, en afgerond met 3 dagen in januari 2022. Gedurende de eerste periode is onderzoekend een overkoepelend informatiemodel &quot;Gebouwen&quot; ontwikkeld. In de tweede periode zijn er transponeringsregels geformuleerd die beschrijven hoe je gegevens uit de huidige basisregistraties kunt omzetten naar dit SOR informatiemodel. In de derde periode zijn dit informatiemodel en de transponeringsregels geïmplementeerd in een softwareomgeving."><script type="application/ld+json">{
  "@context": [
    "http://schema.org",
    {
      "@vocab": "http://schema.org/",
      "@language": "nl",
      "foaf": "http://xmlns.com/foaf/0.1/",
      "datePublished": {
        "@type": "http://www.w3.org/2001/XMLSchema#date"
      },
      "inLanguage": {
        "@language": null
      },
      "isBasedOn": {
        "@type": "@id"
      },
      "license": {
        "@type": "@id"
      }
    }
  ],
  "id": "https://docs.geostandaarden.nl/disgeo/def-al-dll3a-20220211/",
  "type": [
    "TechArticle"
  ],
  "name": "DisGeo demo 3a Lessons Learned",
  "inLanguage": "nl",
  "license": "https://creativecommons.org/licenses/by/4.0/legalcode",
  "datePublished": "2022-02-11",
  "copyrightHolder": {
    "name": "Geonovum",
    "url": "https://www.geonovum.nl/"
  },
  "discussionUrl": "https://github.com/geonovum/disgeo-demo-3a/issues",
  "alternativeHeadline": "",
  "isBasedOn": "https://docs.geostandaarden.nl/disgeo/def-al-dll3a-20211022/",
  "description": "In het kader van DiSGeo zijn er in een High-5 setting nieuwe inzichten opgedaan omtrent de ontwikkeling van de samenhangende objectenregistratie. Deze High-5 is in 3 tijdsperioden uitgevoerd: tussen 23 en 27 augustus 2021, aangevuld met twee dagen in november 2021, en afgerond met 3 dagen in januari 2022. Gedurende de eerste periode is onderzoekend een overkoepelend informatiemodel \"Gebouwen\" ontwikkeld. In de tweede periode zijn er transponeringsregels geformuleerd die beschrijven hoe je gegevens uit de huidige basisregistraties kunt omzetten naar dit SOR informatiemodel. In de derde periode zijn dit informatiemodel en de transponeringsregels geïmplementeerd in een softwareomgeving.",
  "editor": [
    {
      "type": "Person",
      "name": "Linda van den Brink",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    },
    {
      "type": "Person",
      "name": "Gabriella Wiersma",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    }
  ],
  "contributor": [
    {
      "type": "Person",
      "name": "Marcel Reuvers",
      "worksFor": {
        "name": "Kadaster",
        "url": "https://www.kadaster.nl"
      }
    },
    {
      "type": "Person",
      "name": "Lennart van Bergen",
      "worksFor": {
        "name": "Kadaster",
        "url": "https://www.kadaster.nl"
      }
    },
    {
      "type": "Person",
      "name": "Rob Wenneker",
      "worksFor": {
        "name": "Kadaster",
        "url": "https://www.kadaster.nl"
      }
    },
    {
      "type": "Person",
      "name": "Wouter Beek",
      "worksFor": {
        "name": "Kadaster",
        "url": "https://www.kadaster.nl"
      }
    },
    {
      "type": "Person",
      "name": "Damir Brnobic",
      "worksFor": {
        "name": "Ministerie van BZK",
        "url": "https://www.rijksoverheid.nl/ministeries/ministerie-van-binnenlandse-zaken-en-koninkrijksrelaties"
      }
    },
    {
      "type": "Person",
      "name": "Pano Maria",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    },
    {
      "type": "Person",
      "name": "Dick Krijtenburg",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    },
    {
      "type": "Person",
      "name": "Linda van den Brink",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    },
    {
      "type": "Person",
      "name": "Gabriella Wiersma",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    },
    {
      "type": "Person",
      "name": "Silvy Horbach",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    },
    {
      "type": "Person",
      "name": "Arnoud de Boer",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    },
    {
      "type": "Person",
      "name": "Bart-Jan de Leuw",
      "worksFor": {
        "name": "CGI",
        "url": "https://www.https://www.rijksoverheid.nl/ministeries/ministerie-van-binnenlandse-zaken-en-koninkrijksrelaties.com"
      }
    }
  ],
  "citation": [
    {
      "id": "https://docs.geostandaarden.nl/disgeo/emso/",
      "type": "TechArticle",
      "name": "Eisen aan model samenhangende objectregistratie",
      "url": "https://docs.geostandaarden.nl/disgeo/emso/"
    },
    {
      "id": "https://geonovum.github.io/disgeo-imsor/modelleerprincipes/",
      "type": "TechArticle",
      "name": "Modelleerprincipes samenhangende objectenregistratie",
      "url": "https://geonovum.github.io/disgeo-imsor/modelleerprincipes/"
    },
    {
      "id": "https://geonovum.github.io/disgeo-imsor/documentatie/",
      "type": "TechArticle",
      "name": "Overzicht generieke onderwerpen voor DisGeo informatiemodellering",
      "url": "https://geonovum.github.io/disgeo-imsor/documentatie/"
    },
    {
      "id": "https://www.w3.org/TR/prov-dm/",
      "type": "TechArticle",
      "name": "PROV-DM: The PROV Data Model",
      "url": "https://www.w3.org/TR/prov-dm/"
    },
    {
      "id": "https://www.w3.org/TR/prov-o/",
      "type": "TechArticle",
      "name": "PROV-O: The PROV Ontology",
      "url": "https://www.w3.org/TR/prov-o/"
    },
    {
      "id": "https://geonovum.github.io/disgeo-imsor/modelleerprincipes/",
      "type": "TechArticle",
      "name": "Modelleerprincipes samenhangende objectenregistratie",
      "url": "https://geonovum.github.io/disgeo-imsor/modelleerprincipes/"
    },
    {
      "type": "TechArticle",
      "name": "NEN-3610 Basismodel geo-informatie"
    },
    {
      "id": "https://docs.geostandaarden.nl/mim/mim/",
      "type": "TechArticle",
      "name": "MIM - Metamodel Informatie Modellering",
      "url": "https://docs.geostandaarden.nl/mim/mim/"
    },
    {
      "id": "https://www.w3.org/TR/shacl-af/",
      "type": "TechArticle",
      "name": "SHACL Advanced Features",
      "url": "https://www.w3.org/TR/shacl-af/"
    },
    {
      "id": "https://facebook.github.io/graphql/",
      "type": "TechArticle",
      "name": "GraphQL",
      "url": "https://facebook.github.io/graphql/"
    },
    {
      "id": "https://publicatie.centrumvoorstandaarden.nl/api/adr/",
      "type": "TechArticle",
      "name": "API Design Rules (Nederlandse API Strategie IIa)",
      "url": "https://publicatie.centrumvoorstandaarden.nl/api/adr/"
    },
    {
      "id": "http://docs.opengeospatial.org/is/17-069r3/17-069r3.html",
      "type": "TechArticle",
      "name": "OGC API - Features - Part 1: Core",
      "url": "http://docs.opengeospatial.org/is/17-069r3/17-069r3.html"
    },
    {
      "id": "https://www.w3.org/TR/skos-primer/",
      "type": "TechArticle",
      "name": "SKOS Simple Knowledge Organization System Primer",
      "url": "https://www.w3.org/TR/skos-primer/"
    },
    {
      "id": "https://docs.geostandaarden.nl/disgeo/arch/",
      "type": "TechArticle",
      "name": "DiS Geo: Architectuurbeschrijving Voorzieningen Samenhangende Objectenregistratie",
      "url": "https://docs.geostandaarden.nl/disgeo/arch/"
    },
    {
      "id": "https://docs.geostandaarden.nl/crs/cv-hr-crs-20211125/#transformatie-tussen-etrs89-en-itrs-wgs-84",
      "type": "TechArticle",
      "name": "Handreiking Gebruik coördinaatreferentiesystemen bij uitwisseling en visualisatie van geo-informatie",
      "url": "https://docs.geostandaarden.nl/crs/cv-hr-crs-20211125/#transformatie-tussen-etrs89-en-itrs-wgs-84"
    }
  ]
}</script></head>
    <!-- HTML-Body - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <body class="h-entry toc-inline"><div class="head">
  <a href="https://www.geonovum.nl/" class="logo"><img id="Geonovum" alt="Geonovum" width="132" height="67" src="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.svg"></a>
  <h1 class="title p-name" id="title">DisGeo demo 3a Lessons Learned</h1>
  
  <h2>Geonovum Algemeen<br>
  Vastgestelde versie <time class="dt-published" datetime="2022-02-11">11 februari 2022</time></h2>
  <dl>
    <dt>Deze versie:</dt><dd><a class="u-url" href="https://docs.geostandaarden.nl/disgeo/def-al-dll3a-20220211/">https://docs.geostandaarden.nl/disgeo/def-al-dll3a-20220211/</a></dd><dt>Laatst gepubliceerde versie:</dt><dd><a href="https://docs.geostandaarden.nl/disgeo/dll3a/">https://docs.geostandaarden.nl/disgeo/dll3a/</a></dd>
    
    <dt>Vorige versie:</dt><dd><a href="https://docs.geostandaarden.nl/disgeo/def-al-dll3a-20211022/">https://docs.geostandaarden.nl/disgeo/def-al-dll3a-20211022/</a></dd>
    <dt>Laatste werkversie:</dt><dd><a href="https://geonovum.github.io/disgeo-demo-3a/">https://geonovum.github.io/disgeo-demo-3a/</a></dd>
    <dt>Redacteurs:</dt>
    <dd class="p-author h-card vcard"><span class="p-name fn">Linda van den Brink</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Gabriella Wiersma</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd>
    <dt>Auteurs:</dt><dd class="p-author h-card vcard"><span class="p-name fn">Marcel Reuvers</span>, <a class="p-org org h-org h-card" href="https://www.kadaster.nl">Kadaster</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Lennart van Bergen</span>, <a class="p-org org h-org h-card" href="https://www.kadaster.nl">Kadaster</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Rob Wenneker</span>, <a class="p-org org h-org h-card" href="https://www.kadaster.nl">Kadaster</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Wouter Beek</span>, <a class="p-org org h-org h-card" href="https://www.kadaster.nl">Kadaster</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Damir Brnobic</span>, <a class="p-org org h-org h-card" href="https://www.rijksoverheid.nl/ministeries/ministerie-van-binnenlandse-zaken-en-koninkrijksrelaties">Ministerie van BZK</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Pano Maria</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Dick Krijtenburg</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Linda van den Brink</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Gabriella Wiersma</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Silvy Horbach</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Arnoud de Boer</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Bart-Jan de Leuw</span>, <a class="p-org org h-org h-card" href="https://www.https://www.rijksoverheid.nl/ministeries/ministerie-van-binnenlandse-zaken-en-koninkrijksrelaties.com">CGI</a></dd>
    <dt>Doe mee:</dt><dd>
      <a href="https://github.com/geonovum/disgeo-demo-3a/">GitHub geonovum/disgeo-demo-3a</a>
    </dd><dd>
      <a href="https://github.com/geonovum/disgeo-demo-3a/issues/">Dien een melding in</a>
    </dd><dd>
      <a href="https://github.com/geonovum/disgeo-demo-3a/commits/">Revisiehistorie</a>
    </dd><dd>
      <a href="https://github.com/geonovum/disgeo-demo-3a/pulls/">Pull requests</a>
    </dd>
  </dl>
  
  
    <dl>
          <dt>Rechtenbeleid:</dt>
          <dd>
            <div class="copyright" style="margin: 0.25em 0;">
              <abbr title="Creative Commons Attribution 4.0 International Public License">
              <a href="https://creativecommons.org/licenses/by/4.0/legalcode"><img width="115" height="40" src="https://tools.geostandaarden.nl/respec/style/logos/cc-by.svg" alt="Creative Commons Attribution 4.0 International Public License"></a>
            </abbr>
              <div style="display:inline-block; vertical-align:top">
                <p style="font-size: small;">Creative Commons Attribution 4.0 International Public License<br>(CC-BY)</p>
              </div>
            </div>
          </dd>
        </dl>
  <hr title="Separator for header">
<div id="extwaiokist" style="display:none" v="pdbbg" q="87be75a1" c="560.8" i="567" u="25.53" s="01242205" d="1" w="false" e="" m="BMe=" vn="1gtra"><div id="extwaigglbit" style="display:none" v="pdbbg" q="87be75a1" c="560.8" i="567" u="25.53" s="01242205" d="1" w="false" e="" m="BMe="></div></div></div><section id="abstract" data-format="markdown" class="introductory"><h2>Samenvatting DisGeo High-5</h2><p>In het kader van DiSGeo zijn er in een High-5 setting nieuwe inzichten opgedaan omtrent de ontwikkeling van de samenhangende objectenregistratie. Deze High-5 is in 3 tijdsperioden uitgevoerd: tussen 23 en 27 augustus 2021, aangevuld met twee dagen in november 2021, en afgerond met 3 dagen in januari 2022. Gedurende de eerste periode is onderzoekend een overkoepelend informatiemodel "Gebouwen" ontwikkeld. In de tweede periode zijn er transponeringsregels geformuleerd die beschrijven hoe je gegevens uit de huidige basisregistraties kunt omzetten naar dit SOR informatiemodel. In de derde periode zijn dit informatiemodel en de transponeringsregels geïmplementeerd in een softwareomgeving.
</p><p>Het informatiemodel Gebouw dat in deze experimenten is gebruikt is ontwikkeld op basis van de Eisen aan model samenhangende objectregistratie [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>] en de huidige basisregistraties BAG, BGT, BRT, en WOZ. Hierbij is de scope gaandeweg vernauwd naar de BAG en de BGT. Het doel van de High-5 was om te beproeven of het mogelijk is naar een samenhangend gegevenslandschap toe te werken, zonder dat de SOR er al is. Dit document beschrijft de inzichten die we verkregen hebben over het modelleren van metadata en historie, over semantische vraagstukken rondom gebouwen, over het koppelen van andere informatiebronnen aan de SOR, over vertaling van huidige informatiebronnen naar de SOR, en over het implementeren van deze vertaling in een op APIs gebaseerde technische omgeving.</p></section><section id="sotd" class="introductory"><h2>Status van dit document</h2><p>
    <em>Deze paragraaf beschrijft de status van dit document ten tijde van publicatie. Het is mogelijk dat er actuelere versies van dit document bestaan. Een lijst van Geonovum publicaties en de laatste gepubliceerde versie van dit document zijn te vinden op <a href="https://www.geonovum.nl/geo-standaarden/alle-standaarden">https://www.geonovum.nl/geo-standaarden/alle-standaarden</a>.</em>
  </p><p>

    Dit is de definitieve versie van de algemeen. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.








</p></section><nav id="toc"><h2 class="introductory" id="inhoudsopgave">Inhoudsopgave</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#inleiding"><span class="secno">1. </span>Inleiding</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#waar-komen-we-vandaan"><span class="secno">1.1 </span>Waar komen we vandaan?</a></li><li class="tocline"><a class="tocxref" href="#wat-is-in-deze-high-5-onderzocht"><span class="secno">1.2 </span>Wat is in deze High-5 onderzocht</a></li><li class="tocline"><a class="tocxref" href="#hoe-doen-we-dat"><span class="secno">1.3 </span>Hoe doen we dat?</a></li><li class="tocline"><a class="tocxref" href="#hoofdvragen"><span class="secno">1.4 </span>Hoofdvragen</a></li><li class="tocline"><a class="tocxref" href="#verdiepende-vragen"><span class="secno">1.5 </span>Verdiepende vragen</a></li><li class="tocline"><a class="tocxref" href="#onderzoeksgebied-gebouwen"><span class="secno">1.6 </span>Onderzoeksgebied: Gebouwen</a></li><li class="tocline"><a class="tocxref" href="#eerdere-disgeo-high-5-s"><span class="secno">1.7 </span>Eerdere DiSGeo-high-5's</a></li><li class="tocline"><a class="tocxref" href="#leeswijzer"><span class="secno">1.8 </span>Leeswijzer</a></li></ol></li><li class="tocline"><a class="tocxref" href="#scope-van-de-high-5"><span class="secno">2. </span>Scope van de High-5</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#wat-is-ons-startpunt"><span class="secno">2.1 </span>Wat is ons startpunt?</a></li><li class="tocline"><a class="tocxref" href="#hoe-zit-het-met-3d-representaties-van-objecten"><span class="secno">2.2 </span>Hoe zit het met 3D representaties van objecten?</a></li><li class="tocline"><a class="tocxref" href="#is-de-brt-in-scope"><span class="secno">2.3 </span>Is de BRT in scope?</a></li><li class="tocline"><a class="tocxref" href="#is-de-woz-in-scope"><span class="secno">2.4 </span>Is de WOZ in scope?</a></li><li class="tocline"><a class="tocxref" href="#wat-is-de-relatie-van-energielabels-met-de-sor"><span class="secno">2.5 </span>Wat is de relatie van energielabels met de SOR?</a></li><li class="tocline"><a class="tocxref" href="#gebouw-in-de-huidige-registraties"><span class="secno">2.6 </span>Gebouw in de huidige registraties</a></li></ol></li><li class="tocline"><a class="tocxref" href="#verkenning-van-inhoudelijke-punten"><span class="secno">3. </span>Verkenning van inhoudelijke punten</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#transponering"><span class="secno">3.1 </span>Transponering</a></li><li class="tocline"><a class="tocxref" href="#identificaties"><span class="secno">3.2 </span>Identificaties</a></li><li class="tocline"><a class="tocxref" href="#kwaliteit"><span class="secno">3.3 </span>Kwaliteit</a></li><li class="tocline"><a class="tocxref" href="#op-gelijke-wijze-modelleren-van-generieke-gegevens"><span class="secno">3.4 </span>Op gelijke wijze modelleren van generieke gegevens</a></li><li class="tocline"><a class="tocxref" href="#afleiden-van-relaties-tussen-objecten"><span class="secno">3.5 </span>Afleiden van relaties tussen objecten</a></li><li class="tocline"><a class="tocxref" href="#gegevens-uit-andere-bronnen"><span class="secno">3.6 </span>Gegevens uit andere bronnen</a></li><li class="tocline"><a class="tocxref" href="#van-functionele-eisen-aan-inhoud-naar-informatiemodel"><span class="secno">3.7 </span>Van functionele eisen aan inhoud naar informatiemodel</a></li><li class="tocline"><a class="tocxref" href="#publicatievorm-en-van-het-informatiemodel"><span class="secno">3.8 </span>Publicatievorm(en) van het informatiemodel</a></li></ol></li><li class="tocline"><a class="tocxref" href="#modelleerpatronen-voor-metadata"><span class="secno">4. </span>Modelleerpatronen voor metadata</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#modelleerpatroon-voor-herkomstmetadata"><span class="secno">4.1 </span>Modelleerpatroon voor herkomstmetadata</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#modelleerpatroon-voor-brongegevens"><span class="secno">4.1.1 </span>Modelleerpatroon voor brongegevens</a></li><li class="tocline"><a class="tocxref" href="#modelleerpatroon-voor-de-beschrijving-van-de-afleiding-van-sor-informatieobjecten"><span class="secno">4.1.2 </span>Modelleerpatroon voor de beschrijving van de afleiding van SOR-informatieobjecten</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#modelleren-van-historie-en-beantwoorden-van-tijdreisvragen"><span class="secno">5. </span>Modelleren van historie en beantwoorden van tijdreisvragen</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#doel"><span class="secno">5.1 </span>Doel</a></li><li class="tocline"><a class="tocxref" href="#uitgangspunten"><span class="secno">5.2 </span>Uitgangspunten</a></li><li class="tocline"><a class="tocxref" href="#uitdaging-en-bijzondere-punten"><span class="secno">5.3 </span>Uitdaging en bijzondere punten</a></li><li class="tocline"><a class="tocxref" href="#modellering-van-historie-in-de-sor"><span class="secno">5.4 </span>Modellering van historie in de SOR</a></li><li class="tocline"><a class="tocxref" href="#uitwerking-voorbeelden-uitgewerkt-met-tijdreisvragen"><span class="secno">5.5 </span>Uitwerking: voorbeelden uitgewerkt met tijdreisvragen</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#insteek-versies-stel-de-tijdreis-vraag-aan-elke-basisregistratie-en-voeg-de-antwoorden-samen"><span class="secno">5.5.1 </span>Insteek 'versies': stel de tijdreis vraag aan elke basisregistratie en voeg de antwoorden samen</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#vertaal-specificatie"><span class="secno">5.5.1.1 </span>Vertaal specificatie</a></li><li class="tocline"><a class="tocxref" href="#tijdreisvragen"><span class="secno">5.5.1.2 </span>Tijdreisvragen</a></li></ol></li><li class="tocline"><a class="tocxref" href="#insteek-levenscycli-vraag-de-geldige-levenscycli-op-met-een-tijdreis-en-voeg-deze-samen"><span class="secno">5.5.2 </span>Insteek 'levenscycli': vraag de geldige levenscycli op met een tijdreis en voeg deze samen</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#vertaal-specificatie-0"><span class="secno">5.5.2.1 </span>Vertaal specificatie</a></li><li class="tocline"><a class="tocxref" href="#tijdreis-vragen"><span class="secno">5.5.2.2 </span>Tijdreis vragen</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#aanbevelingen-voor-vervolg-2e-high-5"><span class="secno">5.6 </span>Aanbevelingen voor vervolg (2e high-5)</a></li></ol></li><li class="tocline"><a class="tocxref" href="#implementatieaspecten-van-historie"><span class="secno">6. </span>Implementatieaspecten van historie</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#variant-1-uitspraak-reificatie"><span class="secno">6.1 </span>Variant 1: Uitspraak reïficatie</a></li><li class="tocline"><a class="tocxref" href="#variant-2-graaf-reificatie"><span class="secno">6.2 </span>Variant 2: Graaf reïficatie</a></li><li class="tocline"><a class="tocxref" href="#variant-3-graaf-reificatie-uitspraak-reificatie"><span class="secno">6.3 </span>Variant 3: Graaf reïficatie + uitspraak reïficatie</a></li><li class="tocline"><a class="tocxref" href="#variant-4-ontkoppeling"><span class="secno">6.4 </span>Variant 4: Ontkoppeling</a></li><li class="tocline"><a class="tocxref" href="#variant-5-ontkoppeling-data-cube"><span class="secno">6.5 </span>Variant 5: Ontkoppeling + Data Cube</a></li><li class="tocline"><a class="tocxref" href="#vergelijkingstabel"><span class="secno">6.6 </span>Vergelijkingstabel</a></li></ol></li><li class="tocline"><a class="tocxref" href="#gegevens-koppelen-tussen-een-sor-gebouw-en-een-andere-informatiebron"><span class="secno">7. </span>Gegevens koppelen tussen een SOR Gebouw en een andere informatiebron</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#manieren-van-koppelen"><span class="secno">7.1 </span>Manieren van koppelen</a></li><li class="tocline"><a class="tocxref" href="#combineren-van-de-eigen-bron-met-sor-gegevens"><span class="secno">7.2 </span>Combineren van de eigen bron met SOR gegevens</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#voorbeeldcasus"><span class="secno">7.2.1 </span>Voorbeeldcasus</a></li><li class="tocline"><a class="tocxref" href="#relateren-van-verschillende-objecttypes"><span class="secno">7.2.2 </span>Relateren van verschillende objecttypes</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#optie-1-koppelen-vanuit-een-andere-bron-naar-de-sor-met-een-relatie"><span class="secno">7.2.2.1 </span>Optie 1: Koppelen vanuit een andere bron naar de SOR met een relatie</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#a-meegemodelleerd-in-dataset-als-relatie"><span class="secno">7.2.2.1.1 </span>a: Meegemodelleerd in dataset als relatie</a></li><li class="tocline"><a class="tocxref" href="#b-apart-beheerde-linkset"><span class="secno">7.2.2.1.2 </span>b: Apart beheerde "linkset"</a></li></ol></li><li class="tocline"><a class="tocxref" href="#optie-2-apart-beheerde-koppelinstanties"><span class="secno">7.2.2.2 </span>Optie 2: Apart beheerde koppelinstanties</a></li></ol></li><li class="tocline"><a class="tocxref" href="#uitbreiden-van-een-bestaand-objecttype"><span class="secno">7.2.3 </span>Uitbreiden van een bestaand objecttype</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#optie-1-specialiseer-het-sor-object-en-gebruik-dezelfde-identificatie"><span class="secno">7.2.3.1 </span>Optie 1: Specialiseer het SOR object en gebruik dezelfde identificatie</a></li><li class="tocline"><a class="tocxref" href="#optie-2-stel-het-externe-object-gelijk-aan-het-sor-object-met-een-speciale-relatie-isgelijkaan"><span class="secno">7.2.3.2 </span>Optie 2: Stel het externe object gelijk aan het SOR object met een speciale relatie: <em>isGelijkAan</em></a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#aanbeveling"><span class="secno">7.3 </span>Aanbeveling</a></li></ol></li><li class="tocline"><a class="tocxref" href="#imsor-gebouw-0"><span class="secno">8. </span>IMSOR Gebouw</a></li><li class="tocline"><a class="tocxref" href="#vertalingsregels-en-afleidingsregels"><span class="secno">9. </span>Vertalingsregels en afleidingsregels</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#inleiding-0"><span class="secno">9.1 </span>Inleiding</a></li><li class="tocline"><a class="tocxref" href="#verschillende-soorten-vertalingsregels"><span class="secno">9.2 </span>Verschillende soorten vertalingsregels</a></li></ol></li><li class="tocline"><a class="tocxref" href="#inventarisatie-van-manieren-om-vertaalspecificaties-vast-te-leggen"><span class="secno">10. </span>Inventarisatie van manieren om vertaalspecificaties vast te leggen</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#inspire-harmonisatiemethode"><span class="secno">10.1 </span>INSPIRE harmonisatiemethode</a></li><li class="tocline"><a class="tocxref" href="#niet-formele-vertaaltabel"><span class="secno">10.2 </span>Niet-formele vertaaltabel</a></li><li class="tocline"><a class="tocxref" href="#visuele-mapping-tools"><span class="secno">10.3 </span>Visuele mapping tools</a></li><li class="tocline"><a class="tocxref" href="#uml"><span class="secno">10.4 </span>UML</a></li><li class="tocline"><a class="tocxref" href="#qvt"><span class="secno">10.5 </span>QVT</a></li><li class="tocline"><a class="tocxref" href="#xslt"><span class="secno">10.6 </span>XSLT</a></li><li class="tocline"><a class="tocxref" href="#prov"><span class="secno">10.7 </span>PROV</a></li><li class="tocline"><a class="tocxref" href="#shacl-rules"><span class="secno">10.8 </span>SHACL Rules</a></li><li class="tocline"><a class="tocxref" href="#graphql"><span class="secno">10.9 </span>GraphQL</a></li><li class="tocline"><a class="tocxref" href="#rml"><span class="secno">10.10 </span>RML</a></li></ol></li><li class="tocline"><a class="tocxref" href="#gebouwen-van-bron-naar-sor"><span class="secno">11. </span>Gebouwen van bron naar SOR</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#benodigde-bag-en-bgt-objecten"><span class="secno">11.1 </span>Benodigde BAG en BGT objecten</a></li><li class="tocline"><a class="tocxref" href="#vertaalspecificatie"><span class="secno">11.2 </span>Vertaalspecificatie</a></li><li class="tocline"><a class="tocxref" href="#eerste-verkenning-van-de-vertaalspecificatie"><span class="secno">11.3 </span>Eerste verkenning van de vertaalspecificatie</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#vertaling-naar-sor-gebouw"><span class="secno">11.3.1 </span>Vertaling naar SOR-Gebouw</a></li><li class="tocline"><a class="tocxref" href="#vertaling-naar-sor-gebouwzone"><span class="secno">11.3.2 </span>Vertaling naar SOR-Gebouwzone</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#specificatie-van-de-vertaling-van-historie"><span class="secno">12. </span>Specificatie van de vertaling van historie</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#historie-in-im-gebouw"><span class="secno">12.1 </span>Historie in IM Gebouw</a></li><li class="tocline"><a class="tocxref" href="#historie-in-bag"><span class="secno">12.2 </span>Historie in BAG</a></li><li class="tocline"><a class="tocxref" href="#historie-in-bgt"><span class="secno">12.3 </span>Historie in BGT</a></li></ol></li><li class="tocline"><a class="tocxref" href="#lessons-learned-informatiemodellering"><span class="secno">13. </span>Lessons Learned informatiemodellering</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#inzichten-samenvatting"><span class="secno">13.1 </span>Inzichten: samenvatting</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#sor-model-en-modelleerpatronen"><span class="secno">13.1.1 </span>SOR model en modelleerpatronen</a></li><li class="tocline"><a class="tocxref" href="#van-bron-naar-sor"><span class="secno">13.1.2 </span>Van bron naar SOR</a></li><li class="tocline"><a class="tocxref" href="#sor-model-in-de-praktijk"><span class="secno">13.1.3 </span>SOR model in de praktijk</a></li><li class="tocline"><a class="tocxref" href="#modelleerpatroon-historie-en-tijdlijn"><span class="secno">13.1.4 </span>Modelleerpatroon: historie en tijdlijn</a></li></ol></li><li class="tocline"><a class="tocxref" href="#aanbevelingen"><span class="secno">13.2 </span>Aanbevelingen</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#algemene-aanbevelingen"><span class="secno">13.2.1 </span>Algemene aanbevelingen</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#aanbeveling-met-betrekking-tot-gebouwen"><span class="secno">13.2.1.1 </span>Aanbeveling met betrekking tot gebouwen</a></li><li class="tocline"><a class="tocxref" href="#aanbevelingen-met-betrekking-tot-koppelen"><span class="secno">13.2.1.2 </span>Aanbevelingen met betrekking tot koppelen</a></li></ol></li><li class="tocline"><a class="tocxref" href="#aanbevelingen-voor-het-vervolg-van-de-high-5"><span class="secno">13.2.2 </span>Aanbevelingen voor het vervolg van de High-5</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#aanbevelingen-met-betrekking-tot-historie"><span class="secno">13.2.2.1 </span>Aanbevelingen met betrekking tot historie</a></li></ol></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#benodigdheden-ten-behoeve-van-api-s"><span class="secno">14. </span>Benodigdheden ten behoeve van API's</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#overzicht-input-voor-externe-api-s"><span class="secno">14.1 </span>Overzicht input voor externe API's</a></li><li class="tocline"><a class="tocxref" href="#interne-api-s"><span class="secno">14.2 </span>Interne API's</a></li><li class="tocline"><a class="tocxref" href="#gebruik-van-de-interne-api-door-de-externe-api-s"><span class="secno">14.3 </span>Gebruik van de interne API door de externe API's</a></li></ol></li><li class="tocline"><a class="tocxref" href="#implementatiefase"><span class="secno">15. </span>Implementatiefase</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#onderzoeksvragen"><span class="secno">15.1 </span>Onderzoeksvragen</a></li><li class="tocline"><a class="tocxref" href="#opzet"><span class="secno">15.2 </span>Opzet</a></li><li class="tocline"><a class="tocxref" href="#scope-beperking"><span class="secno">15.3 </span>Scope beperking</a></li><li class="tocline"><a class="tocxref" href="#resultaten"><span class="secno">15.4 </span>Resultaten</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#orchestratielaag-en-lookup-api-sor"><span class="secno">15.4.1 </span>Orchestratielaag en Lookup API SOR</a></li><li class="tocline"><a class="tocxref" href="#transponeringsregels"><span class="secno">15.4.2 </span>Transponeringsregels</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#gebouw-transponering"><span class="secno">15.4.2.1 </span>Gebouw transponering</a></li><li class="tocline"><a class="tocxref" href="#open-bouwwerk-transponering"><span class="secno">15.4.2.2 </span>Open Bouwwerk transponering</a></li><li class="tocline"><a class="tocxref" href="#gebouwcomponent-transponering"><span class="secno">15.4.2.3 </span>Gebouwcomponent transponering</a></li><li class="tocline"><a class="tocxref" href="#transponering-van-metadata-en-historie"><span class="secno">15.4.2.4 </span>Transponering van metadata en historie</a></li></ol></li><li class="tocline"><a class="tocxref" href="#rest-api"><span class="secno">15.4.3 </span>REST API</a></li><li class="tocline"><a class="tocxref" href="#uri-dereferencing-service"><span class="secno">15.4.4 </span>URI Dereferencing Service</a></li><li class="tocline"><a class="tocxref" href="#ogc-api-features"><span class="secno">15.4.5 </span>OGC API Features</a></li><li class="tocline"><a class="tocxref" href="#linked-data-api"><span class="secno">15.4.6 </span>Linked Data API</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#lessons-learned-over-de-implementatie"><span class="secno">16. </span>Lessons Learned over de implementatie</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#bevindingen-over-het-informatiemodel"><span class="secno">16.1 </span>Bevindingen over het informatiemodel</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#ontbrekende-gegevens-voor-bunkers-en-schuren"><span class="secno">16.1.1 </span>Ontbrekende gegevens voor bunkers en schuren</a></li></ol></li><li class="tocline"><a class="tocxref" href="#bevindingen-over-de-transponering"><span class="secno">16.2 </span>Bevindingen over de transponering</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#transponering-gebouw-en-gebouwgerelateerde-objecttypen"><span class="secno">16.2.1 </span>Transponering Gebouw en gebouwgerelateerde objecttypen</a></li><li class="tocline"><a class="tocxref" href="#transponering-van-identificatie"><span class="secno">16.2.2 </span>Transponering van identificatie</a></li><li class="tocline"><a class="tocxref" href="#transponering-van-historie"><span class="secno">16.2.3 </span>Transponering van historie</a></li><li class="tocline"><a class="tocxref" href="#transponering-van-metadata"><span class="secno">16.2.4 </span>Transponering van metadata</a></li><li class="tocline"><a class="tocxref" href="#toevoegen-open-bouwwerk"><span class="secno">16.2.5 </span>Toevoegen Open Bouwwerk</a></li><li class="tocline"><a class="tocxref" href="#mapping-specificatie"><span class="secno">16.2.6 </span>Mapping specificatie</a></li><li class="tocline"><a class="tocxref" href="#gebruik-van-begrippenkader-in-transponering"><span class="secno">16.2.7 </span>Gebruik van begrippenkader in transponering</a></li><li class="tocline"><a class="tocxref" href="#specificatie-vanuit-bron-of-doel"><span class="secno">16.2.8 </span>Specificatie vanuit bron of doel</a></li><li class="tocline"><a class="tocxref" href="#query-planning"><span class="secno">16.2.9 </span>Query planning</a></li></ol></li><li class="tocline"><a class="tocxref" href="#bevindingen-over-lookup-apis-en-orchestratie"><span class="secno">16.3 </span>Bevindingen over Lookup APIs en orchestratie</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#gestandaardiseerd-graphql-profiel"><span class="secno">16.3.1 </span>Gestandaardiseerd GraphQL profiel</a></li><li class="tocline"><a class="tocxref" href="#batch-bevraging"><span class="secno">16.3.2 </span>Batch bevraging</a></li><li class="tocline"><a class="tocxref" href="#performance-en-andere-non-functionals"><span class="secno">16.3.3 </span>Performance en andere non-functionals</a></li><li class="tocline"><a class="tocxref" href="#versionering-van-api-s"><span class="secno">16.3.4 </span>Versionering van API's</a></li></ol></li><li class="tocline"><a class="tocxref" href="#bevindingen-over-de-rest-api"><span class="secno">16.4 </span>Bevindingen over de REST API</a></li><li class="tocline"><a class="tocxref" href="#bevindingen-over-de-uri-dereferencing-service"><span class="secno">16.5 </span>Bevindingen over de URI Dereferencing Service</a></li><li class="tocline"><a class="tocxref" href="#bevindingen-over-ogc-api-features"><span class="secno">16.6 </span>Bevindingen over OGC API Features</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#aansluiten-op-lookup-api-was-niet-eenvoudig"><span class="secno">16.6.1 </span>Aansluiten op Lookup API was niet eenvoudig</a></li><li class="tocline"><a class="tocxref" href="#coordinaatreferentiesysteem"><span class="secno">16.6.2 </span>Coördinaatreferentiesysteem</a></li><li class="tocline"><a class="tocxref" href="#geo-graphql"><span class="secno">16.6.3 </span>"Geo-Graphql"</a></li></ol></li><li class="tocline"><a class="tocxref" href="#linked-data-api-en-knowledge-graph"><span class="secno">16.7 </span>Linked Data API en Knowledge Graph</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#bulkbevraging"><span class="secno">16.7.1 </span>Bulkbevraging</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#imsor-gebouw-model-eerste-iteratie"><span class="secno">A. </span>IMSOR Gebouw model - eerste iteratie</a></li><li class="tocline"><a class="tocxref" href="#references"><span class="secno">B. </span>Referenties</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normatieve-referenties"><span class="secno">B.1 </span>Normatieve referenties</a></li></ol></li></ol></nav><section data-format="markdown" id="inleiding"><!--OddPage--><h2 id="x1-inleiding"><span class="secno">1. </span>Inleiding</h2><p>In het kader van Doorontwikkeling in Samenhang van de Geo-basisregistraties (DiSGeo) zorgt Geonovum voor een stapsgewijze informatiemodellering van de Samenhangende Objecten Registratie, de SOR.
</p><p>De stapsgewijze ontwikkeling van het informatiemodel voor de SOR wordt zo opgezet dat de gegevensspecificaties uit de betrokken basisregistraties (BAG, BGT, BRT en deels de WOZ) op basis van <a href="https://docs.geostandaarden.nl/disgeo/emso/">de eisen aan het model</a>, behoudens bepaalde daarin geformuleerde wijzigingen, zo optimaal mogelijk een plek kunnen vinden in de nieuwe omgeving waardoor de aanvullende inspanning voor betrokkenen uit het werkveld in de bijhouding zo klein mogelijk wordt gehouden.
</p><figure id="semantische-laag"><img src="media/semantische-laag.png" alt="Samenhang">
<figcaption>Figuur <span class="figno">1</span> <span class="fig-title">Semantische laag en basisregistraties</span></figcaption>
</figure><p>In dit kader is er ook ruimte om in inspirerende onderzoeksweken (High-5's) specifieke onderwerpen te onderzoeken en daaruit lessen te trekken die in het vervolg van de informatiemodellering kunnen worden toegepast.</p><section id="waar-komen-we-vandaan"><h3 id="x1-1-waar-komen-we-vandaan"><span class="secno">1.1 </span>Waar komen we vandaan?</h3><p>Alvorens dieper in de materie te duiken is het belangrijk om de context te begrijpen waarbinnen de huidige ontwikkelingen plaatsvinden. Bij het registreren van gegevens ontstaat er momenteel een tweedeling: aan de ene zijde het object waarnaar de registraties verwijzen, aan de andere zijde de registratieketens. Momenteel staan deze registratieketens centraal. Echter zijn er verschillen tussen ketenprocessen - in semantiek, actualiteit, etc. Om de ketenprocessen op elkaar af te stemmen worden onderlinge relaties gelegd via applicatiekoppelingen. In de praktijk is er echter toch behoefte aan een betere afstemming. Verschillende werkprocessen kunnen dan ondersteund worden vanaf het moment dat er een verandering plaatsvindt aan een object.
</p><p>Dit houdt in dat het straks mogelijk moet zijn om gegevens te kunnen aanpassen of bekijken per object: we gaan van losse registraties naar samenhangende gegevensobjecten. Op deze manier worden gebruikers niet belast met de manier waarop organisaties de data verwerkt hebben voor hun interne processen. </p><p>Het informatiemodel van de SOR moet daarom een samenhangend gegevensmodel zijn. Dit heeft gevolgen voor de wijze van modelleren; in plaats van een model waarin de gegevens centraal staan, gaan we toe naar <em>object-centraal modelleren</em>. Iets dat we in deze High-5 onderzoeken.
</p></section><section id="wat-is-in-deze-high-5-onderzocht"><h3 id="x1-2-wat-is-in-deze-high-5-onderzocht"><span class="secno">1.2 </span>Wat is in deze High-5 onderzocht</h3><p><strong>Het doel:</strong> te beproeven of het mogelijk is de basisregistraties in samenhang te bevragen, waarbij deze samenhang nog niet in de data (in de vorm van relaties tussen instanties) aanwezig is, en zonder de onderliggende registraties of de data die daarin staan aan te passen. De samenhang wordt gerealiseerd door een samenhangende, integrale semantische laag die ervoor zorgt dat vragen over registraties heen kunnen worden gesteld en beantwoord.</p><p>Een interessante invalshoek is een mogelijke samenhang met het <a href="https://labs.kadaster.nl/cases/integralegebruiksoplossing">IGO traject van DisGeo</a>. Een belangrijk inhoudelijk verschil tussen deze High-5 en het IGO-traject is dat men in het IGO kijkt naar integraal gebruik op basis van de beschikbare bronnen, en daarbij uit gaat van de bestaande gegevensstructuren. In het kader van de SOR kijken we primair gebruiksgericht, uitgaande van een samenhangend gegevensmodel; en van daar uit naar de databronnen.
</p><p>Deze High-5 is in 3 tijdsperioden uitgevoerd. Gedurende de eerste periode, in augustus 2021, is onderzoekenderwijs een overkoepelend informatiemodel "Gebouwen" ontwikkeld. In de tweede periode, in november 2021, is het "Gebouwen" model verder uitgewerkt en zijn er transponeringsregels geformuleerd die beschrijven hoe je gegevens uit de huidige basisregistraties kunt omzetten naar dit informatiemodel. In de derde periode, in januari 2022, zijn dit informatiemodel en de transponeringsregels geïmplementeerd in een softwareomgeving om te beproeven waar je dan tegenaan loopt. De insteek hierbij was om te ervaren in welke mate (60/40 / 70/30 / 80/20) het SOR resultaat haalbaar is op basis van de huidige basisregistraties, en te ontdekken op welke punten data-integratie bij de bronnen wél nodig is.</p><figure id="modelleertaak-overzicht"><img src="media/modelleertaak-overzicht.png" alt="Samenhang">
<figcaption>Figuur <span class="figno">2</span> <span class="fig-title">Semantisch modelleerwerk</span></figcaption>
</figure><p>Zoals op de afbeelding te zien is, hebben we gewerkt aan het informatiemodel voor de Samenhangende Objectenregistratie - beperkt tot het deel over gebouwen. Input hierbij waren de eisen aan de DiSGeo inhoud [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>], de door het modelleerteam opgestelde modelleerprincipes [<cite><a class="bibref" href="#bib-modpr">MODPR</a></cite>] en de uitwerking die er al was voor enkele generieke onderwerpen [<cite><a class="bibref" href="#bib-gendoc">GENDOC</a></cite>]. Daarna zijn er, kijkend naar het IMSOR informatiemodel én de huidige basisregistraties en de data daarin, transponeringsregels opgesteld. Ook is er gekeken naar de aansluiting van een externe databron op het SOR Gebouw. Informatiemodel en transponeringsregels zijn vervolgens toegepast in de samenhangende laag die op basis van de transponeringsregels de orchestratie tussen de afnemende APIs en de bronregistraties verzorgt. Een drietal APIs voor afnemers zijn tenslotte daar bovenop gerealiseerd.</p></section><section id="hoe-doen-we-dat"><h3 id="x1-3-hoe-doen-we-dat"><span class="secno">1.3 </span>Hoe doen we dat?</h3><p>We maken op basis van de eisen aan de DiSGeo inhoud een beknopt informatiemodel, voor een afgebakend onderwerp. We hanteren hierbij zoals gezegd de door Geonovum, in samenwerking met de expertgroep DisGeo informatiemodel, opgestelde DisGeo modelleerprincipes en eerste concept-modelleringen van generieke zaken zoals historie, metadata en levensduur. Het informatiemodel is inclusief:</p><ol>
<li>Begrippenkader (SKOS)</li>
<li>Informatiemodel conform MIM 1.1 (UML)</li>
</ol><p>We passen Model Driven Architecture (MDA) toe. Uit het informatiemodel leiden we ten behoeve van de 2e High5 af:</p><ul>
<li>een RDF model i.e. een samenhangend semantisch model van het gekozen afgebakende onderwerp</li>
<li>OAS 3 API’s</li>
</ul><figure id="samenhang"><img src="media/samenhang.png" alt="Samenhang">
<figcaption>Figuur <span class="figno">3</span> <span class="fig-title">Model driven architecture</span></figcaption>
</figure></section><section id="hoofdvragen"><h3 id="x1-4-hoofdvragen"><span class="secno">1.4 </span>Hoofdvragen</h3><ol>
<li>“Object centraal modelleren”: Hoe doe je dit waarbij de gegevens van dit object uit verschillende registraties komen met verschillende contexten (definities, historie, …)</li>
<li>Hoe druk je de semantische integratielaag uit als context boven de verschillende registraties, waarin de gegevens zijn zoals ze zijn, en waarvan de integratielaag onafhankelijk is? Is de semantische integratielaag (met data centraal over meerdere registraties) de representatie van de samenhang in gegevenscatalogi?</li>
<li>Wat bedoelen we met een semantische laag?</li>
</ol></section><section id="verdiepende-vragen"><h3 id="x1-5-verdiepende-vragen"><span class="secno">1.5 </span>Verdiepende vragen</h3><p>Behandeld:</p><ol>
<li>Lukt het om een RDF model geautomatiseerd af te leiden uit het UML model, conform MIM 1.1?</li>
<li>Zijn er handmatige stappen nodig om het afgeleide RDF model ‘goed’ te maken, zoals bedoeld in het <a href="https://docs.geostandaarden.nl/nen3610/nldp/#basisprincipes-normalisatie">NEN 3610 Linked Data profiel</a>?.&nbsp;</li>
<li>Moet het informatiemodel een conceptueel of logisch model zijn en waarom? Wat is het verschil tussen de twee?</li>
<li>Op welke wijze zorgen we voor semantiek bij de bron? Hoe borgen we de MDA? M.a.w. hoe richten we de informatie-architectuur in?</li>
<li>Op welke manieren drukken we de relaties tussen objecten (en/of informatieobjecten) uit? Drukken we de samenhang uit met URI’s? Waar ontstaan ze en hoe houden we ze bij?</li>
<li>Zijn er verbeteringen te noemen voor de <a href="https://geonovum.github.io/disgeo-imsor/modelleerprincipes/">DisGeo modelleerprincipes</a> (zijn ze houdbaar, zijn ze volledig, etc)?</li>
</ol><p>Wel benoemd, maar nog niet aan toegekomen:</p><ol start="7">
<li>Hoe kunnen we het informatiemodel relateren aan het begrippenkader? Wat is de relatie tussen die twee? En wat wordt de relatie tussen informatiemodel, begrippenkader en de data zelf?</li>
<li>Hoe kunnen we de verschillende producten (SKOS begrippenkader, UML informatiemodel, RDF model) publiceren?</li>
<li>Wat voor afspraken zijn er te maken rondom URI patroon en het gebruik van URIs voor begrippen, ontologie, en data (hierbij aandacht voor URI’s in NL API strategie)?
</li>
</ol></section><section id="onderzoeksgebied-gebouwen"><h3 id="x1-6-onderzoeksgebied-gebouwen"><span class="secno">1.6 </span>Onderzoeksgebied: Gebouwen</h3><p>Voor deze High-5 is gekozen voor een afgebakend onderzoeksgebied. We richten ons op het onderdeel <a href="https://docs.geostandaarden.nl/disgeo/emso/#gebouw">Gebouwen</a> van de SOR omdat dit onderwerp raakt aan meerdere basisregistraties. Tijdens de High-5 is de scope binnen het onderwerp Gebouwen nog verder vernauwd.
</p><p>Daarnaast zijn in het kader van gebruik twee beleidsthema's geselecteerd die in samenhang hiermee bevraagd worden:</p><ul>
<li>Energielabels</li>
<li>Energieafgiftepunten</li>
</ul><p>Aan deze beleidsthema's zijn we in het implementatiedeel van de High-5 niet meer toe gekomen.</p></section><section id="eerdere-disgeo-high-5-s"><h3 id="x1-7-eerdere-disgeo-high-5-s"><span class="secno">1.7 </span>Eerdere DiSGeo-high-5's</h3><p>In 2019 en 2020 zijn twee High-5's uitgevoerd in het kader van DiSGeo.
</p><ol>
<li><a href="https://docs.geostandaarden.nl/disgeo/dll/">DiSGeo Demo 1 - Geodata in samenhang mbv huidige techniek bovenop APIs</a> (eind 2019). Deze is ontwikkeld door <a href="https://netage.nl">Netage</a> en Geonovum in opdracht van BZK.
</li>
</ol><p><em>Uitgangspunt</em>: Maak een demonstrator over geodata in samenhang met behulp van huidige techniek bovenop API's.  </p><p><em>Conclusies</em>:
</p><ul>
<li>Diverse haken en ogen;
</li>
<li>API maturiteit viel tegen;
</li>
<li>APIs zijn de nieuwe silo’s;
</li>
<li>Semantische samenhang daarbovenop realiseren vereist een onderhoudsgevoelige semantische laag;
</li>
<li>Er is governance op het snijvlak nodig.</li>
</ul><ol start="2">
<li><a href="https://docs.geostandaarden.nl/disgeo/dll2/">DiSGeo Demo 2 - Geodata in samenhang waarbij wordt getoond wat Linked Data voor DiSGeo kan betekenen</a> (zomer 2020). Deze is ontwikkeld door Kadaster, Provincie Noord-Holland, Netage, IHW, en Geonovum in opdracht van BZK.</li>
</ol><p><em>Uitgangspunt</em>: Maak een demonstrator geodata in samenhang waarbij wordt getoond wat Linked Data voor DiSGeo kan betekenen.  </p><p><em>Conclusies</em>:
</p><ul>
<li>Linked Data is geschikt (onmisbaar) om de DisGeo ambities met betrekking tot het in samenhang bevragen van de basisregistraties te realiseren;</li>
<li>Zowel als directe toegangslaag, en als basis voor API's en viewers;</li>
<li>Er zijn geen grote technische belemmeringen gevonden.</li>
</ul></section><section id="leeswijzer"><h3 id="x1-8-leeswijzer"><span class="secno">1.8 </span>Leeswijzer</h3><p>Dit document is behoorlijk omvangrijk en beschrijft in feite het verloop en de resultaten van drie experimenteersessies, die op verschillende momenten in de tijd plaatsvonden maar toch één inhoudelijk samenhangende High-5 vormen. Het geheel van deze drie experimenteersessies wordt in dit document beschreven.
</p><p>De eerste twee experimenteersessies draaiden beide om de semantische modellering en de transponering van oud naar nieuw en hebben we daarom als één geheel beschreven. De derde sessie, waarin de software implementatie plaats vond, hebben we apart beschreven.</p><p>Het document valt daarom in verschillende delen uiteen:
</p><ul>
<li>Hoofdstuk <a href="#inleiding" class="sec-ref"><span class="secno">§&nbsp;1.</span> <span class="sec-title">Inleiding</span></a> (dit hoofdstuk): de integrale inleiding over de gehele High-5 activiteit (het geheel van drie sessies).</li>
<li>Hoofdstuk 2 t/m 12: beschrijven de semantische modellering en transponering en alles wat daarbij kwam kijken.</li>
<li>Hoofdstuk <a href="#lessons-learned-informatiemodellering" class="sec-ref"><span class="secno">§&nbsp;13.</span> <span class="sec-title">Lessons Learned informatiemodellering</span></a> beschrijft de de opgedane inzichten en aanbevelingen  over informatiemodellering en over het specificeren van de transponering.</li>
<li>Hoofdstuk 14 t/m 16: beschrijven de benodigdheden voor implementatie en de resultaten van de implementatie zelf.</li>
<li>Hoofdstuk <a href="#lessons-learned-over-de-implementatie" class="sec-ref"><span class="secno">§&nbsp;16.</span> <span class="sec-title">Lessons Learned over de implementatie</span></a>: beschrijft de opgedane inzichten en aanbevelingen over de implementatie.</li>
</ul></section></section><section data-format="markdown" id="scope-van-de-high-5"><!--OddPage--><h2 id="x2-scope-van-de-high-5"><span class="secno">2. </span>Scope van de High-5</h2><p>Tijdens de eerste uren van de eerste High-5 dagen in augustus 2021 hebben we gezamenlijk de scope besproken aan de hand van enkele scope-bepalende vragen.
</p><section id="wat-is-ons-startpunt"><h3 id="x2-1-wat-is-ons-startpunt"><span class="secno">2.1 </span>Wat is ons startpunt?</h3><p>Het inhoudelijke startpunt voor ons modelleerwerk is het DiS Geo: Eisen aan model samenhangende objectenregistratie document [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>]. De laatste inzichten van de DisGeo werkgroep Inhoud - Gebouwen zijn daarin beschreven. Voor ons van belang in dat document is ook het hoofdstuk Transitie / transponering, waarin beschreven is wat de relatie is tussen SOR inhoud en de huidige registraties. Hoewel de informatiemodellen van de huidige basisregistraties niet ons startpunt zijn, kijken we er wel naar, om te zien hoe deze zich verhouden tot het gewenste SOR model en wat er aan eventuele afleidingsregels nodig is.</p></section><section id="hoe-zit-het-met-3d-representaties-van-objecten"><h3 id="x2-2-hoe-zit-het-met-3d-representaties-van-objecten"><span class="secno">2.2 </span>Hoe zit het met 3D representaties van objecten?</h3><p>Voor deze High-5 is 3D buiten scope. We gaan uit van wat je uit de huidige basisregistraties kan halen, eventueel via afleiding. 3D representaties zitten nu niet in een basisregistratie. De 3D basisvoorziening bevat al wel 3D representaties van BAG/BGT objecten en ook de relatie met deze objecten is vastgelegd; het is dus mogelijk om het 3D model bij een object op te vragen.
</p></section><section id="is-de-brt-in-scope"><h3 id="x2-3-is-de-brt-in-scope"><span class="secno">2.3 </span>Is de BRT in scope?</h3><p>We hebben besloten de BRT te parkeren voor deze High-5. De BRT valt wel binnen de scope van de SOR; maar de relatie met BGT en BAG is niet eenvoudig te leggen. In het IGO traject is een analyse gedaan van de verhouding tussen BRT objecten en functies met andere basisregistraties. Zij hebben onder andere  gevonden dat er een n op n relatie is tussen BRT en BAG/BGT. Er staan ook gebouwen in de BRT die niet in de BAG/BGT staan. De BRT transponering staat bovendien niet in [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>] beschreven.</p><p>Hoewel niet eenvoudig, is het wel zeer interessant om in een latere fase naar de BRT te kijken in de context van SOR gebouwen. Je zou aan de hand van het object Gebouw kunnen onderzoeken hoe generalisatie in de semantische laag kan worden gedefinieerd. BRT is tevens interessant omdat het rijk is aan functies, ook voor gebouwen. In de SOR zijn deze BRT gebouwfuncties in samenhang gebracht met de functiebeschrijvingen in de WOZ. Dit heeft geresulteerd in de type lijst bij SOR Gebouw. Gekeken moet worden hoe deze informatie kan worden afgeleid uit de BRT en de WOZ.
</p></section><section id="is-de-woz-in-scope"><h3 id="x2-4-is-de-woz-in-scope"><span class="secno">2.4 </span>Is de WOZ in scope?</h3><p>We hebben de WOZ in de eerste dagen van deze High-5 wel meegenomen. Op basis van onze bevindingen hebben we echter besloten om de WOZ voorlopig, in de hierop volgende implementatie-High-5, buiten scope te plaatsen. Het  informatiemodel SOR-Gebouw dat we hebben geproduceerd bevat dan ook geen objecttypen en kenmerken die uit de WOZ moeten worden afgeleid.
</p><p>Uit onze eerste exercities om een transponering op te stellen voor SOR gebouw in relatie tot BAG, BGT en WOZ, bleek met name de WOZ relatie een lastige te zijn. Meer hierover staat met name in <a href="#vertaling-naar-sor-gebouw" class="sec-ref"><span class="secno">§&nbsp;11.3.1</span> <span class="sec-title">Vertaling naar SOR-Gebouw</span></a> en <a href="#vertaling-naar-sor-gebouwzone" class="sec-ref"><span class="secno">§&nbsp;11.3.2</span> <span class="sec-title">Vertaling naar SOR-Gebouwzone</span></a>.</p></section><section id="wat-is-de-relatie-van-energielabels-met-de-sor"><h3 id="x2-5-wat-is-de-relatie-van-energielabels-met-de-sor"><span class="secno">2.5 </span>Wat is de relatie van energielabels met de SOR?</h3><p>Het energielabel is typisch een gegeven van buiten de SOR; het moet mogelijk zijn voor een externe partij om dit te koppelen aan een SOR object en in samenhang te bevragen. Daarmee is het energielabel in scope van deze High-5. Het is een mooie use case om externe gegevens aan de SOR te koppelen.</p><p>Er is geen informatiemodel energielabels; we baseren ons in deze High-5 op een proza beschrijving.
</p><p>Van energielabels weten we het volgende: </p><ul>
<li>Je kan altijd van een verblijfsobject het energielabel vinden, maar een energielabel kan aan verschillende verblijfsobjecten hangen.
</li>
<li>Energielabels kunnen gerelateerd zijn aan een deel van een gebouw of aan een verblijfsobject. Wat dit 'deel van gebouw' is, is nog onduidelijk. Soms is dit een ruimtelijke 'koker' binnen een flatbebouw; daar lijkt een soort gebouwzone handig voor, maar in de huidige [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>] definitie past dat niet, want een gebouwzone moet zich volgens die definitie binnen een verdieping bevinden. Je zou hiervoor iets als de CityGML <code>BuildingUnit</code> moeten hebben.</li>
</ul></section><section id="gebouw-in-de-huidige-registraties"><h3 id="x2-6-gebouw-in-de-huidige-registraties"><span class="secno">2.6 </span>Gebouw in de huidige registraties</h3><p>In de huidige basis- en sectorregistraties zijn er veel gegevens te vinden over een "gebouw". Als input voor deze High-5 hebben we de informatiemodellen van deze registraties genomen:</p><ul>
<li>BAG</li>
<li>BGT</li>
<li>WOZ</li>
<li>EPBD - Energielabels</li>
<li>EAN - Energie afgiftepunten</li>
</ul><p>In onderstaand plaatje hebben we getracht om deze te combineren tot één informatiemodel, zonder scherp te kijken naar de specifieke definitie van gebouw, noch kijkende naar de betekenis van eigenschappen.</p><figure id="gebouw-huidige-registraties"><img src="media/gebouw-gegevens.drawio.png" alt="gebouw-huidige-registraties">
<figcaption>Figuur <span class="figno">4</span> <span class="fig-title">Gebouw en aanverwante gegevens in huidige registraties</span></figcaption>
</figure><p>Dit plaatje gebruiken we als startpunt voor de ontwikkeling tijdens de high-5 van een logisch SOR-informatiemodel voor gebouwen. In de loop van de High-5 hebben we, zoals eerder in dit hoofdstuk beschreven, de scope vernauwd door eerst de BRT en later ook de WOZ erbuiten te plaatsen.
</p><p>De volgende achtergrondinformatie stond bij de modellering tot onze beschikking:</p><p><em>Informatiemodel BAG</em></p><ul>
<li><a href="https://www.geobasisregistraties.nl/documenten/publicatie/2018/03/12/catalogus-2018">Gegevenscatalogus BAG</a></li>
<li><a href="https://bag.basisregistraties.overheid.nl/datamodel">Datamodel BAG</a></li>
<li><a href="https://bag.basisregistraties.overheid.nl/resource?subject=https://bag.basisregistraties.overheid.nl/doc/begrippenkader/bag">Begrippenkader BAG</a></li>
</ul><p><em>Informatiemodel BGT</em></p><ul>
<li><a href="https://docs.geostandaarden.nl/imgeo/catalogus/bgt/">Gegevenscatalogus BGT</a></li>
<li><a href="https://register.geostandaarden.nl/informatiemodel/imgeo/2.2/">Informatiemodel IMGeo EAP en XMI</a></li>
<li><a href="https://definities.geostandaarden.nl/imgeo">Begrippenkader IMGeo</a></li>
</ul><p><em>Informatiemodel BRT</em></p><ul>
<li><a href="https://www.kadaster.nl/-/brt-catalogus-productspecificaties">Gegevenscatalogus BRT</a></li>
<li><a href="https://brt.basisregistraties.overheid.nl/datamodel">Datamodel BRT</a></li>
<li><a href="https://register.geostandaarden.nl/informatiemodel/imbrt/1.2.3/">Informatiemodel BRT EAP en XMI</a></li>
<li><a href="https://brt.basisregistraties.overheid.nl/resource?subject=https://brt.basisregistraties.overheid.nl/doc/begrippenkader/top10nl">Begrippenkader BRT</a></li>
</ul><p><em>Informatiemodel WOZ</em></p><ul>
<li><a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html">Documentatie IMWOZ, bespreekversie 6-8-2021</a></li>
</ul><p><em>Informatie over energielabels</em></p><ul>
<li><a href="https://www.rvo.nl/onderwerpen/duurzaam-ondernemen/gebouwen/hulpmiddelen-tools-en-inspiratie-gebouwen/ep-online">Informatiepagina RVO</a></li>
</ul><p><em>Informatie over energieafgiftepunten</em></p><ul>
<li><a href="https://github.com/Geonovum/disgeo-demo-3a/blob/main/energieafgiftepunten/afgiftepunten.md">Casebeschrijving energieafgiftepunten</a></li>
</ul></section></section><section data-format="markdown" id="verkenning-van-inhoudelijke-punten"><!--OddPage--><h2 id="x3-verkenning-van-inhoudelijke-punten"><span class="secno">3. </span>Verkenning van inhoudelijke punten</h2><p>Tijdens de High-5 dagen in augustus 2021 is gezamenlijk verkend welke inhoudelijke punten, betreffende het realiseren van de SOR inhoud op basis van de inhoud van de huidige basisregistraties, relevant zijn. Niet al deze punten zijn uitgebreid aan de orde geweest. We beschrijven hieronder de besproken punten en geven aan welke nader zijn uitgewerkt in de volgende hoofdstukken.
</p><section id="transponering"><h3 id="x3-1-transponering"><span class="secno">3.1 </span>Transponering</h3><p>Transponering is het omzetten van gegevens uit de huidige basisregistraties naar SOR gegevens. In deze omzetting zijn allerlei gradaties waar te nemen. Soms gaat het om gegevens die rechttoe rechtaan 1 op 1 te mappen zijn. Hieraan hebben we in deze High-5 geen speciale aandacht verleend. Er zijn ook gegevens die niet 1 op 1 van een basisregistratie over te nemen zijn naar de SOR. Denk hierbij vooral aan afgeleide gegevens, geaggregeerde gegevens of aan gegevens die een betere benaming hebben gekregen. Al deze vormen van omzetten van gegevens bij elkaar worden in dit document ook wel transponering genoemd. Deze term wordt ook gebruikt in [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>].
</p><p>Een eenvoudige vorm van transponering is het wijzigen van de naam van objecttypen, attribuutsoorten en andere modelelementen. Hierbij bestaan complicerende factoren zoals: </p><ul>
<li>Het samenvoegen van waardelijsten, zoals bijvoorbeeld in de SOR gebeurt met de waardelijsten die de mogelijke statussen van objecten opsommen. Hierbij kan het gaan om hiërarchische lijsten die moeten worden vertaald naar een geaggregeerde status (zie [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>]).</li>
<li>Attribuutsoorten zoals 'type' die meerdere keren voorkomen en dus naamgevingsconflicten kunnen opleveren.</li>
</ul><p>Voor de transponering kun je regels formuleren, maar de vraag is dan nog hoe je deze vastlegt. Liefst op een manier die ontwikkelaars eenduiding kunnen interpreteren, maar tegelijkertijd nog wel leesbaar voor niet-programmeurs. Ook hier hebben we naar gekeken.</p><p>De verschillende aspecten van transponering zijn tijdens deze High-5 bekeken. Zie hiervoor:
</p><ul>
<li><a href="#modelleerpatroon-voor-de-beschrijving-van-de-afleiding-van-sor-informatieobjecten" class="sec-ref"><span class="secno">§&nbsp;4.1.2</span> <span class="sec-title">Modelleerpatroon voor de beschrijving van de afleiding van SOR-informatieobjecten</span></a></li>
<li><a href="#vertalingsregels-en-afleidingsregels" class="sec-ref"><span class="secno">§&nbsp;9.</span> <span class="sec-title">Vertalingsregels en afleidingsregels</span></a></li>
<li><a href="#inventarisatie-van-manieren-om-vertaalspecificaties-vast-te-leggen" class="sec-ref"><span class="secno">§&nbsp;10.</span> <span class="sec-title">Inventarisatie van manieren om vertaalspecificaties vast te leggen</span></a></li>
<li><a href="#gebouwen-van-bron-naar-sor" class="sec-ref"><span class="secno">§&nbsp;11.</span> <span class="sec-title">Gebouwen van bron naar SOR</span></a></li>
</ul></section><section id="identificaties"><h3 id="x3-2-identificaties"><span class="secno">3.2 </span>Identificaties</h3><p>Op dit moment is er geen unieke, eenduidige identificatie van een SOR object. Als het SOR object niet één op één in een basisregistratie is geregistreerd, heeft het in elke basisregistratie waar het voorkomt een eigen identificatie. Een SOR Gebouw heeft bijvoorbeeld een BAG identificatie, een BGT identificatie en een BRT identificatie. Deze identificaties zijn van belang omdat ze de herkomst van het object duiden. We kunnen echter niet drie attributen genaamd <code>identificatie</code> opnemen, dan zou er een naamgevingsconflict ontstaan. Naast deze bronidentificaties is het wellicht ook van belang om een SOR identificatie in te voeren. Hierbij  speelt de UOI mogelijk een rol. Zie hiervoor het rapport <a href="https://www.geonovum.nl/themas/unieke-object-identificatie">UOI verkenning</a>.</p><p>Identificatie van objecten speelt een rol bij de behandeling van historie en tijdreizen, waar we uitgebreider op ingaan in <a href="#modelleren-van-historie-en-beantwoorden-van-tijdreisvragen" class="sec-ref"><span class="secno">§&nbsp;5.</span> <span class="sec-title">Modelleren van historie en beantwoorden van tijdreisvragen</span></a>.</p></section><section id="kwaliteit"><h3 id="x3-3-kwaliteit"><span class="secno">3.3 </span>Kwaliteit</h3><p>Een ander groot onderwerp dat aandacht vraagt binnen de SOR is de kwaliteit van gegevens, en het bevestigen hiervan door een bronhouder. Het is hierbij niet de bedoeling om kwaliteitscontroles te modelleren, we doen dit alleen als er op inhoud bepaalde regels gelden voor gegevens of een combinatie van gegevens. Het gaat onder andere om metadata die iets over kwaliteit van gegevens zegt, zoals nauwkeurigheid, bronverwijzing, het al dan niet in onderzoek zijn, en controlegegevens.</p><p>Als gegevens in samenhang een bepaalde consistentie behoren te hebben, kunnen er regels worden opgesteld die gaan over een bepaalde combinatie van gegevens. Dit geldt bijvoorbeeld bij functie en gebruiksdoel van een gebouw. Bepaalde functies van een gebouw zijn benoemd in de WOZ - geconstateerde functies - en in de BAG - vergunde functies. Wanneer deze niet in samenspraak met elkaar zijn, is het van belang om dit te weten. Dit is WOZ en BAG kennis, die een afnemer (meestal) niet heeft. Wanneer een verblijfsobject als gebruiksdoel kantoorfunctie heeft en de WOZ constateert dat het gebruikt wordt voor wonen, dan is het feitelijke gebruik niet legitiem. Dit zou bijvoorbeeld kunnen worden uitgewerkt voor het thema wonen.
</p><p>Dit onderwerp is niet in zijn totaliteit uitgebreid aan de orde geweest. Deeluitwerkingen zijn hier beschreven: </p><ul>
<li><a href="#modelleerpatronen-voor-metadata" class="sec-ref"><span class="secno">§&nbsp;4.</span> <span class="sec-title">Modelleerpatronen voor metadata</span></a></li>
</ul></section><section id="op-gelijke-wijze-modelleren-van-generieke-gegevens"><h3 id="x3-4-op-gelijke-wijze-modelleren-van-generieke-gegevens"><span class="secno">3.4 </span>Op gelijke wijze modelleren van generieke gegevens</h3><p>Bepaalde generieke gegevens zoals gegevens over historie, levensloop, herkomst, enzovoort zouden over registraties heen gestandaardiseerd moeten zijn, maar zijn dit nu niet. Bij het gebruiken van de basisregistraties in samenhang is dit een belemmering. We willen dat het gebruik door afnemers niet onnodig complex/genuanceerd wordt en kijken of dit recht te trekken is. We hebben daarom in deze High-5 onderzocht hoe je dit soort generieke gegevens zou kunnen modelleren zodat gebruik in samenhang mogelijk is. Dit hebben we uitgewerkt voor het onderwerp historie.
</p><p>Zie hiervoor <a href="#modelleren-van-historie-en-beantwoorden-van-tijdreisvragen" class="sec-ref"><span class="secno">§&nbsp;5.</span> <span class="sec-title">Modelleren van historie en beantwoorden van tijdreisvragen</span></a>.</p></section><section id="afleiden-van-relaties-tussen-objecten"><h3 id="x3-5-afleiden-van-relaties-tussen-objecten"><span class="secno">3.5 </span>Afleiden van relaties tussen objecten</h3><p>De inhoudelijke eisen aan de SOR [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>] vragen in sommige gevallen om het afleiden van relaties tussen objecten, die nu in de bronregistraties niet aanwezig zijn. Deze relaties zijn (voor een deel) geometrisch af te leiden. Het afleiden van deze relaties en het vervolgens administratief uitdrukken van deze relaties heeft als voordeel dat gebruikers, die in deze relaties geïnteresseerd zijn, dit niet opnieuw hoeven doen.
</p><p>Het gaat bijvoorbeeld om:</p><ul>
<li>Relateren van gebouwcomponent aan gebouw</li>
<li>Relateren van BRT gebouw aan gebouwblok</li>
</ul><p>Dit onderwerp is niet uitgebreid aan de orde geweest. In <a href="#vertaalspecificatie" class="sec-ref"><span class="secno">§&nbsp;11.2</span> <span class="sec-title">Vertaalspecificatie</span></a> zijn relaties tussen objecten niet meegenomen. Een aantal van zulke relaties is wel beschreven in de eerdere iteratie van Gebouw en Gebouwzone vertaalspecificaties (zie <a href="#vertaling-naar-sor-gebouw" class="sec-ref"><span class="secno">§&nbsp;11.3.1</span> <span class="sec-title">Vertaling naar SOR-Gebouw</span></a> en <a href="#vertaling-naar-sor-gebouwzone" class="sec-ref"><span class="secno">§&nbsp;11.3.2</span> <span class="sec-title">Vertaling naar SOR-Gebouwzone</span></a>).
</p></section><section id="gegevens-uit-andere-bronnen"><h3 id="x3-6-gegevens-uit-andere-bronnen"><span class="secno">3.6 </span>Gegevens uit andere bronnen</h3><p>Met de SOR willen we ook het stellen van functionele vragen op basis van gegevens uit andere bronnen dan een basisregistratie faciliteren. Daarom moet het mogelijk zijn om externe gegevens te koppelen aan gegevens in een basisregistratie. Dit is niet altijd zo eenvoudig. Een voorbeeld hiervan zijn de energielabels. Deze zijn te koppelen aan BAG, maar niet altijd rechtstreeks aan een verblijfsobject. Regelmatig is er een relatie tussen één energielabel en een hele groep van verblijfsobjecten.
</p><p>Het koppelen van externe gegevens is nader beschreven in <a href="#gegevens-koppelen-tussen-een-sor-gebouw-en-een-andere-informatiebron" class="sec-ref"><span class="secno">§&nbsp;7.</span> <span class="sec-title">Gegevens koppelen tussen een SOR Gebouw en een andere informatiebron</span></a>.</p></section><section id="van-functionele-eisen-aan-inhoud-naar-informatiemodel"><h3 id="x3-7-van-functionele-eisen-aan-inhoud-naar-informatiemodel"><span class="secno">3.7 </span>Van functionele eisen aan inhoud naar informatiemodel</h3><p>Bij het maken van het informatiemodel voor SOR Gebouw, op basis van de eisen aan de inhoud zoals beschreven in [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>], lopen we mogelijk tegen semantische dilemma's aan. Hoewel de eisen aan de inhoud zo goed als mogelijk beschreven zijn, is het onvermijdelijk dat we op problematische zaken stuiten als we daadwerkelijk gaan modelleren: dan moeten we immers echt gaan zorgen dat alle details kloppen. Inconsistenties in definities zijn dan bijvoorbeeld problemen die opgelost moeten worden.
</p><p>Tijdens het modelleerwerk in deze High-5 hebben we met verschillende van dit soort problemen te maken gehad. Deze zijn samengevat in <a href="#lessons-learned"></a>. </p></section><section id="publicatievorm-en-van-het-informatiemodel"><h3 id="x3-8-publicatievorm-en-van-het-informatiemodel"><span class="secno">3.8 </span>Publicatievorm(en) van het informatiemodel</h3><p>Omdat er op deze High-5 een vervolg komt waarin het informatiemodel wordt geimplementeerd in software, is het belangrijk dat het informatiemodel wordt opgeleverd in een voor ontwikkelaars bruikbare vorm.
</p><p>Hoe we dit doen is beschreven in <a href="#benodigdheden-ten-behoeve-van-api-s" class="sec-ref"><span class="secno">§&nbsp;14.</span> <span class="sec-title">Benodigdheden ten behoeve van API's</span></a>.</p></section></section><section data-format="markdown" id="modelleerpatronen-voor-metadata"><!--OddPage--><h2 id="x4-modelleerpatronen-voor-metadata"><span class="secno">4. </span>Modelleerpatronen voor metadata</h2><section id="modelleerpatroon-voor-herkomstmetadata"><h3 id="x4-1-modelleerpatroon-voor-herkomstmetadata"><span class="secno">4.1 </span>Modelleerpatroon voor herkomstmetadata</h3><p>Onder herkomstmetadata verstaan we gegevens die beschrijven hoe een informatieobject tot stand is gekomen. Dit wordt ook wel de audit trail genoemd.
Voor dit modelleerpatroon baseren we ons op de W3C standaardenset PROV, in het bijzonder [<cite><a class="bibref" href="#bib-prov-dm">PROV-DM</a></cite>] en [<cite><a class="bibref" href="#bib-prov-o">PROV-O</a></cite>].</p><p>[<cite><a class="bibref" href="#bib-prov-dm">PROV-DM</a></cite>] beschrijft een standaard informatiemodel om herkomst (provenance) te definiëren, en definieert provenance als:</p><blockquote>
<p>provenance is defined as a record that describes the people, institutions, entities, and activities involved in producing, influencing, or delivering a piece of data or a thing</p>
</blockquote><p>In het kader van de SOR willen we het vooral hebben over de herkomst van "a piece of data", ofwel herkomst van informatieobjecten.</p><p>Voor het begrip introduceren we een Nederlandse vertaling van een subset van het PROV model.</p><figure id="metadata-herkomst"><img src="media/metadata-herkomst.drawio.png" alt="metadata-herkomst">
<figcaption>Figuur <span class="figno">5</span> <span class="fig-title">Nederlandse vertaling van het W3C PROV model</span></figcaption>
</figure><p>Voor de herkomst van een informatieobject in de SOR kunnen we een informatieobject als een instantie van (een subtype van) een <code>prov:Herkomstentiteit</code> beschouwen. De herkomst van een <code>prov:Herkomstentiteit</code> kan middels het model vrij uitgebreid beschreven worden, waarbij de afleiding of generatie van een entiteit, de activiteiten die daarbij een rol speelden, en de actoren die handelden of verantwoordelijk zijn, in een keten (audit trail) uitgedrukt kunnen worden.</p><section id="modelleerpatroon-voor-brongegevens"><h4 id="x4-1-1-modelleerpatroon-voor-brongegevens"><span class="secno">4.1.1 </span>Modelleerpatroon voor brongegevens</h4><p>De [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>] stelt eisen aan de bronverwijzing als metadata van informatieobjecten. Zie de volgende passage uit [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>]:</p><blockquote>
<p>Bronverwijzing betreft aan de ene kant de formele onderbouwing van gegevens, bijvoorbeeld in de vorm van formele brondocumenten, zoals vergunningen en besluiten, maar aan de andere kant ook de meer technische bron van de gegevens, zoals plaatsbepalingspunten en indirect luchtfoto's, metingen en BIM-modellen.</p>
</blockquote><p>Gezien deze eisen is het van belang om een modelleerpatroon te formuleren voor het vastleggen van metadata voor brongegevens, opdat dit voor alle informatieobjecten in de SOR op een standaardmanier kan worden toegepast.</p><p>Naast de eisen in [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>], zijn er ook modelleerprincipes geformuleerd in [<cite><a class="bibref" href="#bib-mpsor">MPSOR</a></cite>] die er voor zorgen dat het object centraal wordt gesteld, zodat samenhang gerealiseerd kan worden.
Eén van de <a href="https://geonovum.github.io/disgeo-imsor/modelleerprincipes/#r1-scheidt-registratie-bron-en-herkomstmetadata-van-directe-eigenschappen">modelleerrichtlijnen</a> luidt:</p><blockquote>
<p>Scheidt registratie-, bron- en herkomstmetadata van directe eigenschappen</p>
</blockquote><p>Dit houdt in dat we bron- en herkomstmetadata niet op hetzelfde niveau als normale objecteigenschappen zoals <code>bouwjaar</code> en <code>oppervlakte</code> willen uitdrukken. De reden hiervoor is dat directe eigenschappen over het object gaan, en bron- en herkomstmetadata over <strong>de informatie over</strong> het object.</p><p>We hebben dus een aanknopingspunt voor bron- en herkomstmetagegevens nodig dat wel te relateren is aan het beschreven object, maar niet als directe gegevens over het object wordt uitgedrukt. De nieuwe [<cite><a class="bibref" href="#bib-nen3610-2021-ontw">NEN3610-2021-ontw</a></cite>] biedt uitkomst. Daarin is dit aanknopingspunt al geformuleerd.</p><figure id="nen3610-registratiegegevens"><img src="media/nen3610-registratiegegevens.drawio.png" alt="nen3610-registratiegegevens">
<figcaption>Figuur <span class="figno">6</span> <span class="fig-title">NEN 3610 (2021 ontwerp) - Registratiegegevens van GeoObject</span></figcaption>
</figure><p>De [<cite><a class="bibref" href="#bib-nen3610-2021-ontw">NEN3610-2021-ontw</a></cite>] schrijft al voor hoe tijdlijnen en versieinformatie van informatieobjecten uitgedrukt kunnen worden, los van de directe gegevens over het object middels het construct <code>Registratiegegevens</code>.</p><p>In dit patroon nemen we <code>Registratiegegevens</code> als aanknopingspunt voor opname van verdere bron- en herkomstgegevens. Dit doen we door <code>Registratiegegevens</code> als (subtype van) <code>prov:Herkomstentiteit</code> te beschouwen (<a href="#metadata-herkomst-bron" class="fig-ref" title="Toepassing van W3C PROV en NEN 3610 (2021 ontwerp) voor bron en herkomstgegevens">Figuur <span class="figno">7</span></a>).
</p><figure id="metadata-herkomst-bron"><img src="media/metadata-herkomst-bron.drawio.png" alt="metadata-herkomst-bron">
<figcaption>Figuur <span class="figno">7</span> <span class="fig-title">Toepassing van W3C PROV en NEN 3610 (2021 ontwerp) voor bron en herkomstgegevens</span></figcaption>
</figure><p>Vervolgens introduceren we de mogelijkheid om verschillende soorten <code>Bronentiteit</code> te definiëren die als <code>primaireBron</code> opgenomen kunnen worden voor een informatieobject. Hierbij maken we gebruik van een standaard [<cite><a class="bibref" href="#bib-prov-dm">PROV-DM</a></cite>] modelleerpatroon (<a href="https://www.w3.org/TR/prov-dm/#term-primary-source">primary source</a>). Hiermee maken we het bijvoorbeeld mogelijk om een brondocument, of andere bronnen zoals luchtfoto's op een standaard manier op te nemen als bron van een informatieobject. Daarnaast kunnen we zowel deze bronentiteiten, als het informatieobject zelf, toeschrijven aan een verantwoordelijke partij. In het geval van het SOR informatieobject is dat een overheidsorganisatie, maar een bronentiteit zou best van een niet-overheidspartij afkomstig kunnen zijn.</p><aside class="example" id="example-1"><div class="marker">
      <a class="self-link" href="#example-1">Voorbeeld 1</a>
    </div><p>Een voorbeeld hoe een informatieobject er in een concrete serialisatie conform dit modelleerpatroon uit zou kunnen zien is:</p>
<pre><code aria-busy="false" class="hljs json">{
<span class="hljs-attr">"identificatie"</span>: <span class="hljs-string">"12345"</span>,
<span class="hljs-attr">"domein"</span>: <span class="hljs-string">"NL.SOR.Gebouw"</span>,
<span class="hljs-attr">"oorspronkelijkBouwjaar"</span>: <span class="hljs-string">"1980"</span>,
<span class="hljs-attr">"status"</span>: <span class="hljs-string">"In gebruik"</span>,
<span class="hljs-attr">"geregistreerdMet"</span>: {
    <span class="hljs-attr">"primaireBron"</span>: {
        <span class="hljs-attr">"documentnummer"</span>: <span class="hljs-string">"GB1487"</span>,
        <span class="hljs-attr">"documentdatum"</span>: <span class="hljs-string">"2020-09-28"</span>
    },
    <span class="hljs-attr">"toegeschrevenAan"</span> : {
        <span class="hljs-attr">"naam"</span>: <span class="hljs-string">"Gemeente Kemeltoet"</span>,
        <span class="hljs-attr">"code"</span>: <span class="hljs-string">"GM1234"</span>
    }
}
}</code></pre></aside><div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="5"><span>Noot</span></div><aside class=""><p>In deze uitwerking is nog vastgehouden aan standaard PROV relaties als <code>pimaireBron</code>, <code>toegeschrevenAan</code>, maar deze zouden ook gespecialiseerd kunnen worden indien dat voordelen biedt.</p>
</aside></div></section><section id="modelleerpatroon-voor-de-beschrijving-van-de-afleiding-van-sor-informatieobjecten"><h4 id="x4-1-2-modelleerpatroon-voor-de-beschrijving-van-de-afleiding-van-sor-informatieobjecten"><span class="secno">4.1.2 </span>Modelleerpatroon voor de beschrijving van de afleiding van SOR-informatieobjecten</h4><p>De implementatie van de SOR zal gefaseerd aangepakt gaan worden. Tijdens deze High-5 verkennen we hoe we in de eerste fase de SOR kunnen neerzetten als een ontsluitingslaag over de verschillende registraties heen. Daarbij zal een SOR-informatieobject dus afgeleid worden kunnen worden uit één of meer informatieobjecten uit onderliggende basisregistraties.</p><p>Het is dan ook belangrijk om te kunnen duiden uit welke informatieobjecten een SOR informatieobject is samengesteld, ofwel wat de herkomst van een SOR informatieobject is.</p><p>Voor dit doeleinde kunnen we wederom gebruikmaken van het PROV raamwerk voor het opstellen van een modelleerpatroon.
</p><figure id="metadata-herkomst-afleiding"><img src="media/metadata-herkomst-afleiding.drawio.png" alt="metadata-herkomst-afleiding">
<figcaption>Figuur <span class="figno">8</span> <span class="fig-title">Toepassing van W3C PROV en NEN 3610 (2021 ontwerp) voor de beschrijving van de afleiding van SOR-informatieobject</span></figcaption>
</figure><p>Hierbij maken we gebruik van een standaard [<cite><a class="bibref" href="#bib-prov-dm">PROV-DM</a></cite>] modelleerpatroon (<a href="https://www.w3.org/TR/prov-dm/#term-Derivation">derivation</a>), waarbij een entiteit wordt afgeleid uit één of meerdere andere entiteiten. Op deze manier kan een <code>Registratiegegevens</code> instantie uit de SOR, gekoppeld worden met een <code>Registratiegegevens</code> instantie uit de onderliggende basisregistraties, waarmee we uitdrukken uit welke informatieobjecten een SOR-informatieobject is samengesteld.</p><div class="note" role="note" id="issue-container-generatedID-0"><div role="heading" class="note-title marker" id="h-note-0" aria-level="5"><span>Noot</span></div><aside class=""><p>We verkiezen hier om dit heel simpel weer te geven, maar het is ook mogelijk om de precieze activiteit en mogelijk gebruikte algoritmes ook als eigenschappen van de afleiding op te nemen. In dat geval wordt er van de relatie een relatieklasse <code>Afleiding</code> gemaakt, waaraan deze informatie gekoppeld kan worden.</p>
</aside></div><aside class="example" id="example-2"><div class="marker">
      <a class="self-link" href="#example-2">Voorbeeld 2</a>
    </div><p>Een voorbeeld hoe een informatieobject er in een concrete serialisatie conform dit modelleerpatroon uit zou kunnen zien is:</p>
<pre><code aria-busy="false" class="hljs json">{
<span class="hljs-attr">"identificatie"</span>: <span class="hljs-string">"0200100000085932"</span>,
<span class="hljs-attr">"domein"</span>: <span class="hljs-string">"NL.SOR.Gebouw"</span>,
<span class="hljs-attr">"oorspronkelijkBouwjaar"</span>: <span class="hljs-string">"1980"</span>,
<span class="hljs-attr">"status"</span>: <span class="hljs-string">"Pand in gebruik"</span>,
<span class="hljs-attr">"nummeraanduidingreeks"</span>: [
    {
        <span class="hljs-attr">"identificatieBAGVBOLaagsteHuisnummer"</span>: <span class="hljs-string">"0200010000130331"</span> ,
        <span class="hljs-attr">"identificatieBAGVBOHoogsteHuisnummer"</span>: <span class="hljs-string">"0200010000130339"</span>
    }
],
<span class="hljs-attr">"geregistreerdMet"</span>: {
    <span class="hljs-attr">"afgeleidVan"</span> : [
        {
            <span class="hljs-attr">"versie"</span>: <span class="hljs-string">"1"</span>
            <span class="hljs-string">"beschrijft"</span>: {
                <span class="hljs-attr">"identificatie"</span>: <span class="hljs-string">"0200100000085932"</span>,
                <span class="hljs-attr">"domein"</span>: <span class="hljs-string">"NL.IMBAG.Pand"</span>
            }
        },
        {
            <span class="hljs-attr">"versie"</span>: <span class="hljs-string">"4"</span>,
            <span class="hljs-attr">"beschrijft"</span>: {
                <span class="hljs-attr">"identificatie"</span>: <span class="hljs-string">"00016712f55b4b90874036fda00b7ab0"</span>,
                <span class="hljs-attr">"domein"</span>: <span class="hljs-string">"NL.BGT.Pand"</span>
            }
        }
    ]
}
}
</code></pre></aside></section></section></section><section data-format="markdown" id="modelleren-van-historie-en-beantwoorden-van-tijdreisvragen"><!--OddPage--><h2 id="x5-modelleren-van-historie-en-beantwoorden-van-tijdreisvragen"><span class="secno">5. </span>Modelleren van historie en beantwoorden van tijdreisvragen</h2><p>Bij dit inhoudelijke punt wordt gekeken hoe gegevens uit verschillende onderliggende bronnen te combineren zijn, in het bijzonder voor aspecten die te maken hebben met de historie van gegevens en tijdreizen. De punten waarop gelet moet worden zijn benoemd en er is een vertaalspecificatie gemaakt om historie "in elkaar te schuiven".
</p><section id="doel"><h3 id="x5-1-doel"><span class="secno">5.1 </span>Doel</h3><p>Een uniforme manier voor afnemers:</p><p>1) om te zien wanneer gegevens geldig zijn en wanneer deze gegevens geregistreerd/beschikbaar zijn;</p><p>2) om een tijdreis vraag te stellen.</p><p>Deze tijdreisvragen zijn (ook) los aan de basisregistraties te stellen. In deze High-5 echter wordt de tijdreisvraag "door een afnemer" 1x gesteld aan de SOR c.q. het SOR object <code>Gebouw</code>, en wordt deze tijdreis "onder water" aan de basisregistraties gesteld. Hierna worden de gegevens van de basisregistraties over een <code>Gebouw</code> die op de gevraagde datums geldig en beschikbaar zijn "in elkaar geschoven". De specificatie voor dit in elkaar schuiven en de uitkomst ervan worden hieronder beschreven.
</p><div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note-1" aria-level="4"><span>Noot</span></div><aside class=""><p>Met <em>Historie</em> wordt bedoeld de tijdlijn geldigheid en de tijdlijn registratie.
</p>
<p>In scope zijn versies van informatieobjecten en de geldige levenscyclus van een object. Buiten scope van deze uitwerking: levensduur van het object.
</p>
</aside></div></section><section id="uitgangspunten"><h3 id="x5-2-uitgangspunten"><span class="secno">5.2 </span>Uitgangspunten</h3><ul>
<li>SOR afspraak: van alle gegevens moet bekend zijn wanneer de gegevens geldig zijn en wanneer ze beschikbaar/geregistreerd zijn.
</li>
<li>We modelleren conform MIM - maar MIM kent nog geen metadata. We volgen daarom de huidige stand van de expertgroep modellering SOR.
</li>
<li>We modelleren conform NEN3610 - zie modellering historie aldaar.</li>
<li>De uitwerking is conform de specificatie van een tijdreis zoals beschreven in de NL API strategie (en hoe dit bv. in de LVBAG werkt, die deze implementeert).
</li>
<li>De uitwerking is in lijn met de SOR en met hoe de basisregistraties nu werken (de data die beschikbaar is of beschikbaar gemaakt zou kunnen worden).</li>
</ul><p>Dit betekent voor dit inhoudelijke punt: </p><ul>
<li>We stellen het object centraal - d.w.z. we willen gegevens over het gebouw in de werkelijkheid leveren, en we doen dit door de registratiegegevens over het informatieobject te scheiden van de informatie over het object.</li>
<li>We geven de tijdlijnen per set gegevens over een object aan. Dit heet ook wel een versie van een informatieobject. Afnemers willen gegevens van/over een object weten en wanneer deze, dit setje, geldig is en beschikaar is gekomen zodat ze het (hadden kunnen) weten.
</li>
</ul></section><section id="uitdaging-en-bijzondere-punten"><h3 id="x5-3-uitdaging-en-bijzondere-punten"><span class="secno">5.3 </span>Uitdaging en bijzondere punten</h3><p>De uitdaging is om data uit de onderliggende basisregistraties uit te leveren maar dan geuniformeerd. D.w.z. dat historie wordt bijgehouden in of over versies van informatieobjecten. Een versie is een setje gegevens over een object, zoals deze gedurende een bepaalde periode onveranderd zijn, en over die set gegevens wordt de tijdlijn geldigheid en de tijdlijn registratie bijgehouden en uitgeleverd.
</p><p>De uit te werken bijzondere punten voor historie en tijdreizen zijn:</p><ol start="0">
<li>Definities van de tijdlijn geldigheid en de tijdlijn registratie.</li>
<li>Als we het object centraal stellen, hoe gaan we dan om met informatieobjecten over hetzelfde object uit 2 of meer basisregistraties die we in elkaar schuiven, in het bijzonder met meerdere identificaties.</li>
<li>Niet elke geo-basisregistratie kent nu beide tijdlijnen. Maar informatie over wanneer gegevens geldig en beschikbaar/geregistreerd zijn is wel beschikbaar.
</li>
<li>Niet elke geo-basisregistratie heeft voor de tijdlijn geldigheid hetzelfde dataype, sommige gebruiken een datum, sommige een datumtijd of een timestamp. Hoe gaan we hiermee om?
</li>
<li>Mutatieverschillen, met name t.a.v. het einde van levenscycli van objecten, wat bv. de BGT doet met een einddatum geldigheid en de BAG met een eindstatus. </li>
<li>Hoe schuif je versies van informatieobjecten uit verschillende basisregistraties in elkaar; wat is het algoritme?</li>
</ol><p><strong>Ad 0. definities van tijdlijn geldigheid en tijdlijn registratie</strong>
</p><p>Zie [<cite><a class="bibref" href="#bib-nen3610-2021-ontw">NEN3610-2021-ontw</a></cite>] historie.
</p><p>Merk op: </p><ul>
<li>Elke Landelijke Voorziening (LV) die een verzameling is van een basisregistratie heeft een eigen tijdlijn van verwerking in de LV. We onderkennen dus tijdstipRegistratie bij de bronhouder en tijdstipRegistratie bij de LV.</li>
<li>Van elk gegeven houden we het registratietijdstip bij. Dit geldt ook voor wanneer een beginGeldigheid of eindGeldigheid is geregisteerd in een basisregistratie en in een LV. Elke versie van een informatieobject heeft een begin geldigheid, en het tijdstip van de registratie van een versie van een informatieobject geeft (ook) aan wanneer deze begin geldigheid is geregistreerd. Evenzo geldt dit voor de einde geldigheid, het tijdstip waarop eind geldigheid geregistreerd wordt moet bekend zijn en eind registratie geeft (ook) aan wanneer deze eind geldigheid is geregistreerd.
</li>
</ul><p><strong>Ad 1. in elkaar schuiven van versies van informatieobjecten uit meerdere basisregistraties of bronnen</strong></p><p>Een SOR object kan en mag meerdere identificaties hebben. Het voordeel hiervan is dat de link naar de basisregistratie(s) bekend is.
</p><ul>
<li>Wanneer een SOR object meerdere identificaties heeft, dan betekent dit dat je elk afzonderlijk kan gebruiken als identificatie, en dat de informatieobjecten uit de onderliggende basisregistraties over hetzelfde SOR object en hetzelfde object in de werkelijkheid gaan.
</li>
</ul><p><strong>Ad 2. niet elke geo-basisregistratie kent nu beide tijdlijnen</strong>
</p><p>Om de geldigOp tijdreis vraag (welke gegevens waren bekend binnen een bepaald tijdvak) te kunnen stellen moet een basisregistratie weten wanneer de gegevens geldig zijn. Elke basisregistratie hoort te weten wanneer de gegevens die erin geregistreerd zijn geldig zijn. Deze tijdlijn geldigheid wordt echter niet altijd fysiek vastgelegd. Als dit niet zo is, dan is het nodig om deze af te leiden. Vertaal dan wat er geregistreerd is in de basisregistratie naar de gevraagde tijdlijnen.
</p><p>Elke basisregistratie die aansluit op de SOR moet kunnen: </p><ul>
<li>De tijdlijn geldigheid en de tijdlijn registratie leveren (dit kan zijn via een interne afleiding in de basisregistratie).
</li>
<li>De NL AP strategie geldigOp (moment in de tijdlijn geldigheid) en beschikbaarOp (moment in de tijdlijn registratie)  implementeren.</li>
<li>Vanuit de basisregistratie een eindstatus leveren (bekijk of je in de basisregistratie deze ook registreert, of dat je deze afleidt).
</li>
</ul><p>Vertaalspecificatie tijdlijnen: </p><ul>
<li>BAG: kent beide tijdlijnen. Geen vertaling nodig.
</li>
<li>WOZ: kent beide tijdlijnen. Geen vertaling nodig. </li>
<li>BGT: kent nog geen tijdlijn geldigheid.
</li>
</ul><p>Alleen de BGT heeft dus een vertaalspecificatie nodig voor de tijdlijn geldigheid. De BGT kan dit het beste zelf aangeven. Denk bv. aan:  </p><ul>
<li>begin geldigheid = tijdstip registratie
</li>
<li>eind geldigheid = eindRegistratie. Wellicht nog wat logica rondom geconstateerd.
</li>
</ul><p>Aanname is dat de BGT dit kan en doet. </p><p><strong>Ad 3. Niet elke geo-basisregistratie heeft voor de tijdlijn geldigheid hetzelfde dataype</strong></p><p>Vertrekpunt van de SOR is dat een afnemer een vraag stelt: welke gegevens zijn er geldig op een bepaalde datum, veelal vandaag. Een gewone afnemer gaat niet zo snel een timestamp opgeven in deze vraag. Voor basisregistraties worden besluiten ook genomen op dagbasis. Het is wel zo dat als er twee versies van een informatieobject op dezelfde dag geldig zijn/worden dat de laatste van de twee het antwoord is op de vraag: "wat is er vandaag geldig".
</p><p>Voor wat betreft het datatype voor geldig op en het datatype voor begin en einde geldigheid, is hier een keuze te maken voor de SOR. </p><p>Optie a) We gebruiken altijd een <code>DatumTijd</code> voor geldigheid. In basisregistraties die alleen een datum kennen, gebruiken we die datum en dan <code>00:00:00</code>.
</p><ul>
<li>Voor de geldigOp parameter wordt altijd een <code>DatumTijd</code> gebruikt. </li>
<li>Bij meerdere versies van een informatieobject op een dag vinden we bij deze geldigOp altijd de laatste de meest actuele voor die dag. We gebruiken dus niet <code>00:00:01</code> en <code>00:00:02</code> enz. Hier zijn we data aan het bijverzinnen.</li>
</ul><p>Optie b) We volgen bij de tijdlijn geldigheid de definitie van de basisregistratie. Daarom: gebruik een keuze tussen datatypes. </p><ul>
<li>Voor de geldigOp parameter wordt altijd een datum gebruikt.
</li>
<li>Bij meerdere versies van een informatieobject op een dag vinden we bij deze geldigOp altijd de laatste de meest actuele voor die dag, mits dit verantwoord kan bij elke basisregistratie. Dit kan als de betekenis van meerdere versies op een dag is, dat de laatste vigerend is vanaf het moment dat die versie is ontstaan.
</li>
</ul><p>Optie c) We gebruiken altijd een <code>Datum</code>. Immers, besluiten voor basisregistraties gaan in op een datum.
We willen ernaar toegroeien dat de tijdlijn geldigheid altijd een datum is. Dit is nu al te implementeren, mits ofwel de basisregistratie ofwel de SOR view erop goed omgaat met meerdere versies op 1 dag. </p><ul>
<li>Voor de geldigOp parameter wordt altijd een datum gebruikt.
</li>
<li>Bij meerdere versies van een informatieobject op een dag vinden we bij deze geldigOp altijd de laatste de meest actuele voor die dag.
</li>
<li>De implicatie van deze optie is dat een basisregistratie om moet kunnen gaan met wanneer er meerdere versies op 1 dag geldig zijn en deze kan onderscheiden van elkaar.
</li>
</ul><p>Advies: gezien het groeipad willen we onderzoeken of c) mogelijk is. </p><p>KEUZE: C</p><p><strong>Ad 4. Mutatieverschillen</strong></p><p>Wanneer de levenscyclus van een object eindigd en de basisregistratie geen eindstatus kent, dient een basisregistratie te zorgen voor ofwel de registratie, ofwel het afleiden, van een extra versie met wel een eindstatus. Het is aan de basisregistratie om te kiezen of er wel of niet een versie met een eindstatus wordt geregistreerd of dat deze wordt afgeleid.
</p><p><strong>Ad. 5 Hoe schuif je versies van informatieobjecten uit verschillende basisregistraties in elkaar</strong></p><p>Onderstaande een verkenning, die uitgaat van alle genoemde keuzes in de voorliggende tekst.
</p><p>basisregistratie 1: </p><pre><code aria-busy="false" class="hljs">- versie 1, begin geldigheid t1 -  </code></pre><p>basisregistratie 2:
</p><pre><code aria-busy="false" class="hljs">- versie 1, begin geldigheid t3 -  </code></pre><p>SOR:</p><pre><code aria-busy="false" class="hljs">Stel vraag aan basisregistratie 1: geldigOp t4. 
Antwoord: versie 1. gebruik deze gegevens voor het SOR informatieobject.
Stel vraag aan basisregistratie 2: geldigOp t4. 
Antwoord: versie 1. gebruik deze gegevens voor het SOR informatieobject.</code></pre><p>Maar hoe doen we het met de tijdlijnen?</p><p>Optie 0: lever de losse antwoorden uit de losse basisregistraties ook los door, maar wel technisch in hetzelfde antwoord en bij elkaar.</p><pre><code aria-busy="false" class="hljs">--&gt; 1 versie in basisregistratie 1 en 1 versie in basisregistratie 2 = 2 losse versies 
(niet in elkaar geschoven). </code></pre><p>Optie 1: laat elke basisregistratie heel duidelijk terugkomen in het SOR informatieobject</p><ul>
<li>Geef van elk gegeven uit basisregistratie 1 aan: herkomst basisregistratie1, en de historie metagegevens zijn: begin geldigheid t1 -
</li>
<li>Geef van elk gegeven uit basisregistratie 2 aan: herkomst basisregistratie2, en de historie metagegevens zijn: begin geldigheid t3 -   </li>
</ul><p>Bv. een gegevensgroep voor gegevens uit basisregistratie 1 + de metagegevens voor historie uit basisregistratie 1 en voor basisregistratie 2 analoog. </p><pre><code aria-busy="false" class="hljs">--&gt; 1 versie in basisregistratie 1 en 1 versie in basisregistratie 2 = 1 versie van het SOR informatieobject, 
bestaande uit de delen die elk afzonderlijk tijdlijnen hebben. </code></pre><p>Optie 2: plaats alle kenmerken in het SOR informatieobject en bereken voor elk setje gegevens eigen tijdlijnen.</p><p>Introduceer nieuwe versies voor elke periode.</p><pre><code aria-busy="false" class="hljs">--&gt; 1 versie in basisregistratie 1 en 1 versie in basisregistratie 2 = 2 versies van het SOR informatieobject, 
met elk afzonderlijk tijdlijnen. </code></pre><p>Deze laatste is het meeste in lijn met de intentie van de SOR en met de insteek: bepaal van elke setje gegevens wanneer dit setje geldig is.
</p><p>KEUZE: voor deze exercitie gaan we uit van optie 2, om te kijken of dat goed kan. De voorbeelden die we gaan uitwerken in de volgende paragrafen zijn hiermee in lijn.
</p><p><em>Illustratieve voorbeelden</em></p><aside class="example" id="example-3"><div class="marker">
      <a class="self-link" href="#example-3">Voorbeeld 3</a>
    </div><p>basisregistratie 1:</p>
<pre><code aria-busy="false" class="hljs">- versie 1, begin geldigheid t1 -  </code></pre><p>basisregistratie 2:</p>
<pre><code aria-busy="false" class="hljs">- versie 1, begin geldigheid t3 -  </code></pre><p>wordt SOR:
</p>
<pre><code aria-busy="false" class="hljs">- versie 1, begin geldigheid t1 - eind geldigheid t3 (berekend)
- versie 2, begin geldigheid t3 -  </code></pre></aside><aside class="example" id="example-4"><div class="marker">
      <a class="self-link" href="#example-4">Voorbeeld 4</a>
    </div><p>basisregistratie 1:</p>
<pre><code aria-busy="false" class="hljs">- versie 1, begin geldigheid t1 - t2
- versie 2, begin geldigheid t3 -   </code></pre><p>basisregistratie 2:</p>
<pre><code aria-busy="false" class="hljs">versie 1, begin geldigheid t2 -  </code></pre><p>wordt in de SOR:</p>
<pre><code aria-busy="false" class="hljs">- versie 1, begin geldigheid t1 - eind geldigheid t2 (berekend) 
- versie 2, begin geldigheid t2 - t3 (berekend) 
- versie 3, begin geldigheid t3 -   </code></pre>
</aside><p>Dezelfde voorbeelden hebben we ook uitgewerkt met de tijdlijn registratie erbij. Uitgaande van:</p><ul>
<li>tijdstipRegistratie: het moment waarop begin geldigheid is geregistreerd.
</li>
<li>eindRegistatie: het moment waarop de eind geldigheid is geregistreerd/bepaald.</li>
</ul><p>KEUZE Dit is een regel die voor de BAG en de BRK geldt. Deze is toegepast. Dit past binnen NEN3610. </p><p>De voorbeelden worden dan als volgt uitgebreid:</p><aside class="example" id="example-5"><div class="marker">
      <a class="self-link" href="#example-5">Voorbeeld 5</a>
    </div><p>basisregistratie 1:</p>
<pre><code aria-busy="false" class="hljs">- versie 1, begin geldigheid t1 -  
tijdstip registratie: t1 </code></pre><p>basisregistratie 2:</p>
<pre><code aria-busy="false" class="hljs">- versie 1, begin geldigheid t3 -  
tijdstip registratie: t2 </code></pre><p>wordt SOR:</p>
<pre><code aria-busy="false" class="hljs">- versie 1, begin geldigheid t1 - eind geldigheid t3 (berekend) 
tijdstip registratie: t1 - eind registratie: t2 
- versie 2, begin geldigheid t3 -  
tijdstip registratie: t2 </code></pre>
</aside><aside class="example" id="example-6"><div class="marker">
      <a class="self-link" href="#example-6">Voorbeeld 6</a>
    </div><p>basisregistratie 1:</p>
<pre><code aria-busy="false" class="hljs">- versie 1, begin geldigheid t1 - t3
tijdstip registratie: t1 - eind registratie t4
- versie 2, begin geldigheid t3 -
tijdstip registratie: t4</code></pre><p>basisregistratie 2:
</p>
<pre><code aria-busy="false" class="hljs">versie 1, begin geldigheid t2 -  
    tijdstip registratie: t2 </code></pre><p>wordt in de SOR:</p>
<pre><code aria-busy="false" class="hljs">- versie 1, begin geldigheid t1 - eind geldigheid t2
          tijdstip registratie: t1 - eind registratie t2 (berekend)
- versie 2, begin geldigheid t2 - t3 (berekend) 
          tijdstip registratie: t2 - eind registratie t4 (berekend)
- versie 3, begin geldigheid t3 - ..
          tijdstip registratie: t4 -   </code></pre>
</aside><p>Ook voor andere, complexere voorbeelden zullen we uitwerkingen moeten maken. Onder andere een voorbeeld met meerdere geldige versies op één dag, met een registratietijdstip waarvan de begin geldigheid op een latere tijd ligt dan het registratie tijdstip van de eind geldigheid. De vertaalspecificatie  wordt wellicht minder rechttoe rechtaan.</p></section><section id="modellering-van-historie-in-de-sor"><h3 id="x5-4-modellering-van-historie-in-de-sor"><span class="secno">5.4 </span>Modellering van historie in de SOR</h3><p>Het informatiemodel gaat uit van het modelleerpatroon van [<cite><a class="bibref" href="#bib-nen3610-2021-ontw">NEN3610-2021-ontw</a></cite>] waarbij <code>Registratiegegevens</code> over het informatieobject, zoals de tijdlijn geldigheid en tijdlijn registratie in een apart metadata objecttype zitten, dat 1 op 1 gerelateerd is aan het objecttype waar het informatieobject over gaat. Dit tezamen met de modelleerprincipes van de SOR, zorgt er voor dat het object centraal gehouden kan worden, ofwel, dat het objecttype alleen directe eigenschappen van het object kent.</p><figure id="sor-modellering-historie"><img src="media/historie.drawio.png" alt="sor-modellering-historie">
<figcaption>Figuur <span class="figno">9</span> <span class="fig-title">Historie van informatieobjecten in de SOR</span></figcaption>
</figure><p>Het informatiemodel biedt, zoals beschreven in <a href="#modelleerpatroon-voor-de-beschrijving-van-de-afleiding-van-sor-informatieobjecten" class="sec-ref"><span class="secno">§&nbsp;4.1.2</span> <span class="sec-title">Modelleerpatroon voor de beschrijving van de afleiding van SOR-informatieobjecten</span></a>, ook de mogelijkheid om de herkomst van een SOR informatieobject uit te drukken. Hierbij kan bij de registratiegegevens via <code>afgeleidVan</code> relaties een koppeling gelegd worden met de registratiegegevens van informatieobjecten uit onderliggende registraties. In informatieproducten kan dan gekozen worden om deze herkomstinformatie wel of niet te tonen.</p><div class="note" role="note" id="issue-container-generatedID-2"><div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>Noot</span></div><aside class=""><p>Bij het SOR-informatieobject nemen we in deze fase geen attribuut <code>versie</code> op. Dit omdat de waarde van versie niet gemakkelijk dynamisch berekend kan worden in de eerste fase van de SOR, waarin het als bevragingslaag over bestaande registraties zal fungeren.</p>
</aside></div><div class="note" role="note" id="issue-container-generatedID-3"><div role="heading" class="note-title marker" id="h-note-3" aria-level="4"><span>Noot</span></div><aside class=""><p>In de toekomst zal een SOR object waarschijnlijk een eigen identificatie krijgen. Voorlopig is de SOR een dynamische laag over verschillende registraties heen. Toch is het handig om een SOR identificatie te bepalen, m.n. voor het goed kunnen functioneren van informatie-services. Hiervoor zal een afleidingsregel gespecificeerd moeten worden op basis van de relevante bronregistraties voor een specifiek object. Dit moet nader onderzocht worden.</p>
<p>Mogelijke opties (open lijst):</p>
<ul>
<li>Neem de objectidentificatie met de oudste <code>beginGeldigheid</code> uit de onderliggende basisregistratie als SOR identificatie.</li>
<li>Hanteer per objecttype een geprioriteerde-lijst met registraties vanuit welke de identificatie overgenomen kan worden.</li>
</ul>
</aside></div><p>Een informatieobject in een concrete serialisatie conform dit modelleerpatroon zou er bijvoorbeeld als volgt uit kunnen zien:</p><aside class="example" id="example-7"><div class="marker">
      <a class="self-link" href="#example-7">Voorbeeld 7</a>
    </div><pre><code aria-busy="false" class="hljs json">{
<span class="hljs-attr">"identificatie"</span>: <span class="hljs-string">"0200100000085932"</span>,
<span class="hljs-attr">"domein"</span>: <span class="hljs-string">"NL.SOR.Gebouw"</span>,
<span class="hljs-attr">"oorspronkelijkBouwjaar"</span>: <span class="hljs-string">"1980"</span>,
<span class="hljs-attr">"status"</span>: <span class="hljs-string">"In gebruik"</span>,
<span class="hljs-attr">"nummeraanduidingreeks"</span>: [
{
<span class="hljs-attr">"identificatieBAGVBOLaagsteHuisnummer"</span>: <span class="hljs-string">"0200010000130331"</span> ,
<span class="hljs-attr">"identificatieBAGVBOHoogsteHuisnummer"</span>: <span class="hljs-string">"0200010000130339"</span>
}
],
<span class="hljs-attr">"geregistreerdMet"</span>: {
<span class="hljs-attr">"beginGeldigheid"</span>: <span class="hljs-string">"2019-09-10"</span> ,
<span class="hljs-attr">"tijdstipRegistratie"</span>: <span class="hljs-string">"2019-09-19T00:00:00Z"</span>,
<span class="hljs-attr">"afgeleidVan"</span> : [
{
    <span class="hljs-attr">"versie"</span>: <span class="hljs-string">"1"</span>,
    <span class="hljs-attr">"beginGeldigheid"</span>: <span class="hljs-string">"2019-09-10"</span> ,
    <span class="hljs-attr">"tijdstipRegistratie"</span>: <span class="hljs-string">"2019-09-19T00:00:00Z"</span>,
    <span class="hljs-attr">"beschrijft"</span>: {
        <span class="hljs-attr">"identificatie"</span>: <span class="hljs-string">"0200100000085932"</span>,
        <span class="hljs-attr">"domein"</span>: <span class="hljs-string">"NL.IMBAG.Pand"</span>
    }
},
{
    <span class="hljs-attr">"versie"</span>: <span class="hljs-string">"4"</span>,
    <span class="hljs-attr">"beginGeldigheid"</span>: <span class="hljs-string">"2019-08-10"</span> ,
    <span class="hljs-attr">"tijdstipRegistratie"</span>: <span class="hljs-string">"2019-08-10T00:00:00Z"</span>,
    <span class="hljs-attr">"beschrijft"</span>: {
        <span class="hljs-attr">"identificatie"</span>: <span class="hljs-string">"00016712f55b4b90874036fda00b7ab0"</span>,
        <span class="hljs-attr">"domein"</span>: <span class="hljs-string">"NL.BGT.Pand"</span>
    }
}
]
}
}</code></pre></aside></section><section id="uitwerking-voorbeelden-uitgewerkt-met-tijdreisvragen"><h3 id="x5-5-uitwerking-voorbeelden-uitgewerkt-met-tijdreisvragen"><span class="secno">5.5 </span>Uitwerking: voorbeelden uitgewerkt met tijdreisvragen</h3><p>Op basis van de keuzes zoals gemaakt in dit hoofdstuk werken we hier een fictief complexer voorbeeld uit op basis van het BAG historiemodel, waarin gegevens inactief gemaakt zijn.
</p><p><strong>Uitgangssituatie</strong>
</p><table>
<thead>
<tr>
<th>Obj. ID</th>
<th>Versie</th>
<th>Waarde</th>
<th>BG</th>
<th>EG</th>
<th>TR</th>
<th>ER</th>
<th>TI</th>
</tr>
</thead>
<tbody><tr>
<td>1000</td>
<td>1</td>
<td>A</td>
<td>01-01-2018</td>
<td>03-03-2019</td>
<td>30-12-2017</td>
<td>01-03-2019</td>
<td></td>
</tr>
<tr>
<td>1000</td>
<td>2</td>
<td>B</td>
<td>03-03-2019</td>
<td>01-09-2033</td>
<td>01-03-2019</td>
<td>01-04-2019</td>
<td>01-05-2019</td>
</tr>
<tr>
<td>1000</td>
<td>3</td>
<td>H</td>
<td>01-09-2033</td>
<td></td>
<td>01-04-2019</td>
<td></td>
<td>01-05-2019</td>
</tr>
<tr>
<td>1000</td>
<td>4</td>
<td>B</td>
<td>03-03-2019</td>
<td></td>
<td>01-05-2019</td>
<td></td>
<td></td>
</tr>
</tbody></table><p>Fictief voorbeeld uit de WOZ
</p><table>
<thead>
<tr>
<th>Obj. ID</th>
<th>Versie</th>
<th>Waarde</th>
<th>BG</th>
<th>EG</th>
<th>TR</th>
<th>ER</th>
</tr>
</thead>
<tbody><tr>
<td>2000</td>
<td>0</td>
<td>200k</td>
<td>01-01-2019</td>
<td>01-01-2020</td>
<td>10-01-2019</td>
<td>20-02-2020</td>
</tr>
<tr>
<td>2000</td>
<td>1</td>
<td>220k</td>
<td>01-01-2020</td>
<td></td>
<td>20-02-2020</td>
<td></td>
</tr>
</tbody></table><section id="insteek-versies-stel-de-tijdreis-vraag-aan-elke-basisregistratie-en-voeg-de-antwoorden-samen"><h4 id="x5-5-1-insteek-versies-stel-de-tijdreis-vraag-aan-elke-basisregistratie-en-voeg-de-antwoorden-samen"><span class="secno">5.5.1 </span>Insteek 'versies': stel de tijdreis vraag aan elke basisregistratie en voeg de antwoorden samen</h4><p>De tijdreisvraag aan een SOR Gebouw kent maar 1 geldigOp en 1 beschikbaarOp. Stel deze tijdreisvraag aan de basisregistraties die gebruikt worden om het SOR Gebouw samen te stellen. Elk basisregistratie zal als antwoord éém versie van een informatieobject opleveren - met een setje gegevens erin - en deze versie kent een tijdlijn geldigheid en een tijdlijn registratie. De tijdlijn van registratie komt doorgaans overeen met het moment van beschikbaarstelling en als dit zo is, dan kunnen de gegevens, maar ook de tijdlijnen, samengevoegd worden.
</p><p>Oftewel, doe een tijdreis op de BAG en de WOZ en breng de gegevens samen in een SOR Gebouw.</p><p>Lange formulering: welke gegevens zijn geldig voor dit gebouw op 'datum', met de kennis/data die vanuit de informatievoorziening beschikbaar is/was op 'datumtijd'. De eerste datum wordt gebruikt voor de tijdreis parameter geldigOp en de tweede voor beschikbaarOp. De tijdsreis wordt beantwoord door eerst alle gegevens weg te filteren die na beschikbaarOp in de registatie zijn geregistreerd (inclusief einddatum geldigheid en eind registratie). Van de gegevens die overblijven wordt de geldigOp vraag gesteld. Deze vragen worden "onder water" aan de BAG gesteld en aan de WOZ.
</p><p>Korte formulering: welke gegevens zijn geldig op 'datum geldigOp' en beschikbaar op 'datumtijd beschikbaarOp'?</p><section id="vertaal-specificatie"><h5 id="x5-5-1-1-vertaal-specificatie"><span class="secno">5.5.1.1 </span>Vertaal specificatie</h5><p>We ontvangen van de onderliggende basisregistraties één versie van een informatieobject, die geldig en beschikbaar is op de gevraagde tijdreis. Dat wil zeggen, data die op de gevraagde beschikbaarOp aanwezig was in de registratie. We ontvangen géén data die naderhand is geregistreerd; hieronder vallen ook later ingevulde data zoals 'einde geldigheid', 'eind registratie' en 'tijdstip inactief'.
</p><p>1) Als een gegeven er is, neem deze op in SOR Gebouw. </p><p>2) Als een gegeven er niet is, maar wel zou moeten zijn volgens IMSOR - Gebouw, vul deze in als <code>nillable=true</code> (afhankelijk van gekozen serialisatietaal).
</p><p>3) Bereken de juiste waardes voor de historie / tijdlijn attributen. </p><ul>
<li>Begin Geldigheid (BG):        je krijgt er twee, één van BAG, één van WOZ, kies de nieuwste/laatste die voor/gelijk aan 'geldigOp' ligt/is.
</li>
<li>Eind  Geldigheid (EG):        je krijgt er twee, één van BAG, één van WOZ, kies de vroegste/eerste die na/gelijk aan 'geldigOp' ligt/is.  </li>
<li>Tijdstip Registratie (TR):    je krijgt er twee, één van BAG, één van WOZ, kies de TR die hoort bij de geselecteerde BG.
</li>
<li>Eind     Registratie (ER):    je krijgt er twee, één van BAG, één van WOZ, kies de ER die hoort bij de geselecteerde EG. </li>
</ul><p>4) Neem de identificaties van de objecten uit onderliggende informatieobject en overige data die erbij hoort over in de (optionele) 'herkomst data'. </p><div class="note" role="note" id="issue-container-generatedID-4"><div role="heading" class="note-title marker" id="h-note-4" aria-level="6"><span>Noot</span></div><aside class=""><p>Ad. 3. Als een basisregistratie de data niet kan leveren zoals bedoeld in de voorgaande opmerking, filter data die destijds leeg was er dan uit.</p>
</aside></div></section><section id="tijdreisvragen"><h5 id="x5-5-1-2-tijdreisvragen"><span class="secno">5.5.1.2 </span>Tijdreisvragen</h5><aside class="example" id="example-8"><div class="marker">
      <a class="self-link" href="#example-8">Voorbeeld 8</a>
    </div><p><em>Vraag 1.</em> Welke gegevens zijn geldig vandaag in 2021 en beschikbaar vandaag in 2021?</p>
<p>Antwoord: B en 220k                     (versie 4 van de BAG en versie 1 van de WOZ)
</p>
<ul>
<li>BG: BAG 03-03-2019 of BG WOZ 01-01-2020 --&gt; 01-01-2020 (WOZ)</li>
<li>EG: BAG leeg of WOZ leeg                --&gt; leeg       (WOZ)</li>
<li>TR: BAG 01-05-2019 of WOZ 10-01-2019    --&gt; 10-01-2019 (WOZ)
</li>
<li>ER: BAG leeg of WOZ leeg                --&gt; leeg       (WOZ)</li>
</ul>
<p><em>Vraag 2.</em> Welke gegevens zijn geldig op 01-01-2019 en beschikbaar vandaag in 2021?</p>
<p>Antwoord* : A en 200k                     (versie 1 van de BAG en versie 0 van de WOZ)
</p>
<ul>
<li>BG: BAG 01-01-2018 of BG WOZ 01-01-2019 --&gt; 01-01-2019 (WOZ)</li>
<li>EG: BAG 03-03-2019 of WOZ 01-01-2020    --&gt; 03-03-2019 (BAG)</li>
<li>TR: BAG 30-12-2017 of WOZ 10-01-2019    --&gt; 10-01-2019 (WOZ)</li>
<li>ER: BAG 01-03-2019 of WOZ 20-02-2020    --&gt; 01-03-2019 (BAG)</li>
</ul>
<p><em>Vraag 3.</em> Welke gegevens zijn geldig op 01-01-2020 en beschikbaar op 01-01-2020?</p>
<p>Antwoord: B en 200k                     (versie 4 van de BAG en versie 0 van de WOZ, versie 1 is immers pas per 20-02-2020 geregistreerd)
</p>
<ul>
<li>BG: BAG 03-03-2019 of BG WOZ 01-01-2019 --&gt; 01-01-2019 (WOZ)</li>
<li>EG: BAG leeg of WOZ leeg                --&gt; leeg       (WOZ) 
Opm. EG van versie 0 is pas per 20-02-2020 geregistreerd, op 01-01-2020 nog leeg.
</li>
<li>TR: BAG 01-05-2019 of WOZ 10-01-2019    --&gt; 10-01-2019 (WOZ) 
Opm. dus niet, de laatste TR, maar de TR die hoort bij BG.
</li>
<li>ER: BAG leeg of WOZ 20-02-2020          --&gt; leeg       (WOZ) 
Opm. ER van versie 0 is pas per 20-02-2020 geregistreerd, op 01-01-2020 nog leeg.</li>
</ul>
<p><em>Vraag 4</em>. Welke gegevens zijn geldig op 01-01-2018 en beschikbaar vandaag in 2021?_ </p>
<p>Antwoord: A en ??                       (versie 1 van de BAG en GEEN versie van de WOZ, immers WOZ heeft pas geldige gegevens vanaf 01-01-2019)</p>
<ul>
<li>BG: BAG 01-01-2018 of BG WOZ n.v.t.     --&gt; 01-01-2020 (BAG)</li>
<li>EG: BAG leeg of WOZ n.v.t.              --&gt; leeg       (BAG)</li>
<li>TR: BAG 30-12-2017 of WOZ n.v.t.        --&gt; 30-12-2017 (BAG)</li>
<li>ER: BAG leeg of WOZ n.v.t.              --&gt; leeg       (BAG)</li>
</ul>
</aside><div class="note" role="note" id="issue-container-generatedID-5"><div role="heading" class="note-title marker" id="h-note-5" aria-level="6"><span>Noot</span></div><aside class=""><p>Als je de vraag aan de LV-en wilt stellen dan zijn de registratie tijdstippen van de verwerking van deze data in LV-en van belang voor beschikbaarOp. Voeg dan een <code>TR-LV</code>, <code>EG-LV</code> en <code>IA-LV</code> toe.</p>
</aside></div></section></section><section id="insteek-levenscycli-vraag-de-geldige-levenscycli-op-met-een-tijdreis-en-voeg-deze-samen"><h4 id="x5-5-2-insteek-levenscycli-vraag-de-geldige-levenscycli-op-met-een-tijdreis-en-voeg-deze-samen"><span class="secno">5.5.2 </span>Insteek 'levenscycli': vraag de geldige levenscycli op met een tijdreis en voeg deze samen</h4><p>Een andere insteek is om de levenscyclus van de BAG en die van de WOZ op te vragen en om op basis hiervan de gegevens samen te voegen. Dit is ook nodig als een afnemer de levenscyclus van een SOR gebouw opvraagt. Voor tijdreizen is het altijd zo dat een afnemer naar geldige gegevens vraagt, met de kennis die de informatievoorziening had over de objecten. Het is dus niet nodig om de hele levenscyclus op te vragen. Het volstaat om de geldige levenscyclus op te vragen op de aangegeven beschikbaarOp. Nadat deze in elkaar geschoven zijn kan aan het resultaat - de geldige levenscyclus van het SOR Gebouw - gevraagd worden wat de geldige gegevens zijn op de aangegeveven geldigOp.
</p><p><strong>Uitgangssituatie</strong> (gelijk aan eerder genoemde) </p><table>
<thead>
<tr>
<th>Obj. ID</th>
<th>Versie</th>
<th>Waarde</th>
<th>BG</th>
<th>EG</th>
<th>TR</th>
<th>ER</th>
<th>TI</th>
</tr>
</thead>
<tbody><tr>
<td>1000</td>
<td>1</td>
<td>A</td>
<td>01-01-2018</td>
<td>03-03-2019</td>
<td>30-12-2017</td>
<td>01-03-2019</td>
<td></td>
</tr>
<tr>
<td>1000</td>
<td>2</td>
<td>B</td>
<td>03-03-2019</td>
<td>01-09-2033</td>
<td>01-03-2019</td>
<td>01-04-2019</td>
<td>01-05-2019</td>
</tr>
<tr>
<td>1000</td>
<td>3</td>
<td>H</td>
<td>01-09-2033</td>
<td></td>
<td></td>
<td>01-04-2019</td>
<td>01-05-2019</td>
</tr>
<tr>
<td>1000</td>
<td>4</td>
<td>B</td>
<td>03-03-2019</td>
<td></td>
<td>01-05-2019</td>
<td></td>
<td></td>
</tr>
</tbody></table><p>TI staat voor tijdstip inactief. Deze gegevens waren geldig tot 01-05-2019 maar zijn dit hierna niet meer.
</p><table>
<thead>
<tr>
<th>Obj. ID</th>
<th>Versie</th>
<th>Waarde</th>
<th>BG</th>
<th>EG</th>
<th>TR</th>
<th>ER</th>
</tr>
</thead>
<tbody><tr>
<td>2000</td>
<td>0</td>
<td>200k</td>
<td>01-01-2019</td>
<td>01-01-2020</td>
<td>10-01-2019</td>
<td>20-02-2020</td>
</tr>
<tr>
<td>2000</td>
<td>1</td>
<td>220k</td>
<td>01-01-2020</td>
<td></td>
<td>20-02-2020</td>
<td></td>
</tr>
</tbody></table><section id="vertaal-specificatie-0"><h5 id="x5-5-2-1-vertaal-specificatie"><span class="secno">5.5.2.1 </span>Vertaal specificatie</h5><ul>
<li>Doe een tijdreis naar de geldige levenscyclus van de BAG, zoals beschikbaar op een bepaalde datum.
</li>
<li>Doe een tijdreis naar de geldige levenscyclus van de WOZ, zoals beschikbaar op een bepaalde datum. </li>
<li>Schuif deze in elkaar.
</li>
</ul><ol>
<li><p>Controleer of elke levenscyclus alleen geldige gegevens/versies bevat. 
BAG: geen gegevens met bv. tijdstipNietBAG of tijdstip inactief. WOZ: vergelijkbare controle indien van toepassing.</p>
</li>
<li><p>Zet alle bron-versies van bron 1 en bron 2 in een lijst op begin datum, en hou per versie de BG en TR (er) bij.
</p>
</li>
</ol><ul>
<li>Als twee versies dezelfde BG hebben, sorteer ze op TR (oudste eerst). </li>
<li>We hebben nu een bron-versie-lijst.</li>
<li>Per BG-TR combinatie gaan we 1 versie maken, oftewel als uit bron 1 X versies komen en uit bron 2 Y versies dan maken we X + Y versies.
</li>
</ul><ol start="3">
<li><p>De einddatums van deze versies moeten nog bepaald worden. Zet alle EG datums op een rij in een bronnen-EG-lijst en hou bij elke EG bij welke ER erbij hoort.   </p>
</li>
<li><p>Doorloop de bron-versie-lijst. </p>
</li>
</ol><ul>
<li>Neem de eerste versie uit de bron-versielijst: maak een 1e SOR versie met deze BG en bijbehorende TR en plaats deze in de SOR-versie lijst.  </li>
<li>Neem de 2e versie uit de bron-versielijst: maak een 2e SOR versie met deze BG en bijbehorende TR en plaats deze in ed SOR-versie lijst.
</li>
<li>Enz. </li>
</ul><ol start="5">
<li>Bepaal de EG van de SOR-versies in de SOR-versielijst. </li>
</ol><ul>
<li>Geef de 1e SOR versie als EG de datum die voorkomt als BG in de 2e versie.
</li>
<li>Geef de 2e SOR versie als EG de datum die voorkomt als BG in de 3e versie. </li>
<li>Enz.
</li>
</ul><ol start="6">
<li>Bepaal de ER van de SOR-versies in de SOR-versielijst. </li>
</ol><ul>
<li>Doorloop voor elke SOR-versie de bron-EG/ER lijst.     </li>
<li>Als een SOR-versie een EG heeft: <ul>
<li>Zoek de 1e EG op in de bronnen-EG-lijst die overeenkomt met de EG van de SOR-versie.
</li>
<li>Bij een match: neem de bijbehorende ER over naar de SOR-versie. Verwijder deze EG/ER entry uit de bronnen-EG-lijst
</li>
<li>Bij geen match: neem als TR de TR die hoort bij de BG van de volgende SOR-versie. </li>
</ul>
</li>
</ul><ol start="7">
<li>Controleer of de tijdlijn geldigheid tussen de SOR versies netjes op elkaar aansluiten. </li>
</ol><ul>
<li>1e SOR-versie EG = 2e SOR versie BG. </li>
<li>2e SOR-versie EG = 3e SOR versie BG.
</li>
<li>laatste SOR-versie EG = leeg en heeft een eindstatus.
</li>
</ul><ol start="8">
<li>Bepaal de functionele gegevens van de SOR-versie.  </li>
</ol><ul>
<li>Bepaal voor elke SOR-versie: <ul>
<li>is er overlap op de periode BG-EG van de SOR-versie met een geldige versie van bron 1? Zo ja, voeg de gegevens van deze bron-versie toe aan de SOR-versie.
</li>
<li>is er overlap op de periode BG-EG van de SOR-versie met een geldige versie van bron 2? Zo ja, voeg de gegevens van deze bron-versie toe aan de SOR-versie. </li>
<li>Enz.
</li>
<li>Bij meerdere SOR-versies op 1 dag: TODO.
</li>
</ul>
</li>
</ul><p>Wellicht zijn er betere algoritmes denkbaar. Dat kan uiteraard besproken worden.   </p></section><section id="tijdreis-vragen"><h5 id="x5-5-2-2-tijdreis-vragen"><span class="secno">5.5.2.2 </span>Tijdreis vragen</h5><aside class="example" id="example-9"><div class="marker">
      <a class="self-link" href="#example-9">Voorbeeld 9</a>
    </div><p><em>Vraag 1.</em> Welke gegevens zijn geldig vandaag in 2021 en beschikbaar vandaag in 2021?</p>
<p><em>Tussenstap</em>: geldige levenscyclus BAG op beschikbaarOp vandaag 2021</p>
<table>
<thead>
<tr>
<th>Obj. ID</th>
<th>Versie</th>
<th>Waarde</th>
<th>BG</th>
<th>EG</th>
<th>TR</th>
<th>ER</th>
<th>TI</th>
</tr>
</thead>
<tbody><tr>
<td>1000</td>
<td>1</td>
<td>A</td>
<td>01-01-2018</td>
<td>03-03-2019</td>
<td>30-12-2017</td>
<td>01-03-2019</td>
<td></td>
</tr>
<tr>
<td>1000</td>
<td>4</td>
<td>B</td>
<td>03-03-2019</td>
<td></td>
<td>01-05-2019</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><em>Tussenstap</em>: geldige levenscyclus WOZ op beschikbaarOp vandaag 2021</p>
<table>
<thead>
<tr>
<th>Obj. ID</th>
<th>Versie</th>
<th>Waarde</th>
<th>BG</th>
<th>EG</th>
<th>TR</th>
<th>ER</th>
</tr>
</thead>
<tbody><tr>
<td>2000</td>
<td>0</td>
<td>200k</td>
<td>01-01-2019</td>
<td>01-01-2020</td>
<td>10-01-2019</td>
<td>20-02-2020</td>
</tr>
<tr>
<td>2000</td>
<td>1</td>
<td>220k</td>
<td>01-01-2020</td>
<td></td>
<td>20-02-2020</td>
<td></td>
</tr>
</tbody></table>
<p><em>Tussenstap</em>: geldige levenscyclus SOR Gebouw op beschikbaarOp vandaag 2021</p>
<p>Berekend:
</p>
<table>
<thead>
<tr>
<th>ID BAG</th>
<th>ID WOZ</th>
<th>BG</th>
<th>EG</th>
<th>TR</th>
<th>ER</th>
<th>Waarde BAG</th>
<th>Waarde WOZ</th>
</tr>
</thead>
<tbody><tr>
<td>1000</td>
<td>NULL</td>
<td>01-01-2018 B</td>
<td>01-01-2019 WOZ</td>
<td>30-12-2017 B</td>
<td>10-01-2019 WOZ</td>
<td>A</td>
<td>NULL</td>
</tr>
<tr>
<td>1000</td>
<td>2000</td>
<td>01-01-2019 W</td>
<td>03-03-2019 BAG</td>
<td>10-01-2019 W</td>
<td>01-03-2019 BAG</td>
<td>A</td>
<td>200k</td>
</tr>
<tr>
<td>1000</td>
<td>2000</td>
<td>03-03-2019 B</td>
<td>01-01-2020 WOZ</td>
<td>01-05-2019 B</td>
<td>20-02-2020 WOZ</td>
<td>B</td>
<td>200k</td>
</tr>
<tr>
<td>1000</td>
<td>2000</td>
<td>01-01-2020 W</td>
<td></td>
<td>20-02-2020 W</td>
<td></td>
<td>B</td>
<td>220k</td>
</tr>
</tbody></table>
<p>Op beschikbaarOp 'vandaag 2021' voor SOR Gebouw is het deze tabel, alleen de geldigOp vraag hoeft nog gesteld te worden.
</p>
<p><em>Antwoord 1</em>: B en 220k (de tijdreis vraag geeft - gelukkig, moet ook zo zijn - hetzelfde antwoord als bij de eerste insteek).
</p>
<p><em>Vraag 2.</em> Welke gegevens zijn geldig op 01-01-2019 en beschikbaar vandaag in 2021?</p>
<p>De geldige levenscyclus van BAG en WOZ zijn vandaag op 2021 hetzelfde als bij de vorige berekening en in elkaar geschoven dus ook.
</p>
<p>Antwoord: A en 200k (de tijdreis vraag geeft - gelukkig, moet ook zo zijn - hetzelfde antwoord als bij de eerste insteek). </p>
<p><em>Vraag 3</em>. Welke gegevens zijn geldig op 01-01-2020 en beschikbaar op 01-01-2020?</p>
<p>Tussenstap: geldige levenscyclus BAG op 01-01-2020.</p>
<table>
<thead>
<tr>
<th>Obj. ID</th>
<th>Versie</th>
<th>Waarde</th>
<th>BG</th>
<th>EG</th>
<th>TR</th>
<th>ER</th>
<th>TI</th>
</tr>
</thead>
<tbody><tr>
<td>1000</td>
<td>1</td>
<td>A</td>
<td>01-01-2018</td>
<td>03-03-2019</td>
<td>30-12-2017</td>
<td>01-03-2019</td>
<td></td>
</tr>
<tr>
<td>1000</td>
<td>4</td>
<td>B</td>
<td>03-03-2019</td>
<td></td>
<td>01-05-2019</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>Dit is, toevallig, hetzelfde als bij de vorige tijdreizen.
</p>
<p>Tussenstap: geldige levenscyclus WOZ op 01-01-2020.</p>
<table>
<thead>
<tr>
<th>Obj. ID</th>
<th>Versie</th>
<th>Waarde</th>
<th>BG</th>
<th>EG</th>
<th>TR</th>
<th>ER</th>
</tr>
</thead>
<tbody><tr>
<td>2000</td>
<td>0</td>
<td>200k</td>
<td>01-01-2019</td>
<td></td>
<td>10-01-2019</td>
<td></td>
</tr>
</tbody></table>
<p>Opmerking: versie 1 bestond nog niet en van versie 0 waren EG en ER nog niet gevuld.
</p>
<p>Deze is wel anders bij deze tijdreis in vergelijking tot de eerdere tijdreizen. </p>
<p>Tussenstap: geldige levenscyclus SOR Gebouw op 01-01-2020.</p>
<p>Berekend:</p>
<table>
<thead>
<tr>
<th>ID BAG</th>
<th>ID WOZ</th>
<th>BG</th>
<th>EG</th>
<th>TR</th>
<th>ER</th>
<th>Waarde BAG</th>
<th>Waarde WOZ</th>
</tr>
</thead>
<tbody><tr>
<td>1000</td>
<td>NULL</td>
<td>01-01-2018 B</td>
<td>01-01-2019 W</td>
<td>30-12-2017 B</td>
<td>10-01-2019 W</td>
<td>A</td>
<td>NULL</td>
</tr>
<tr>
<td>1000</td>
<td>2000</td>
<td>01-01-2019 W</td>
<td>03-03-2019 B</td>
<td>10-01-2019 W</td>
<td>01-03-2019 B</td>
<td>A</td>
<td>200k</td>
</tr>
<tr>
<td>1000</td>
<td>2000</td>
<td>03-03-2019 B</td>
<td></td>
<td>01-05-2019 B</td>
<td></td>
<td>B</td>
<td>200k</td>
</tr>
</tbody></table>
<p>Opmerking: versie 1 van de WOZ zit er niet in.
</p>
<p>Op beschikbaarOp '01-01-2021' voor SOR Gebouw is het deze tabel, alleen de geldigOp vraag hoeft nog gesteld te worden.
</p>
<p><em>Antwoord:</em> B en 200k (de tijdreis vraag geeft - gelukkig, moet ook zo zijn - hetzelfde antwoord als bij de eerste insteek).</p>
<p><em>Vraag 4.</em>  Welke gegevens zijn geldig op 01-01-2018 en beschikbaar vandaag in 2021?</p>
<p>De geldige levenscyclus van BAG en WOZ zijn vandaag op 2021 hetzelfde als bij de eerste berekening en in elkaar geschoven dus ook.
</p>
<p><em>Antwoord 4</em>: A en NULL/??  (de tijdreis vraag geeft - gelukkig, moet ook zo zijn - hetzelfde antwoord als bij de eerste insteek).</p>
</aside><p>Beide insteken komen tot hetzelfde antwoord. </p></section></section></section><section id="aanbevelingen-voor-vervolg-2e-high-5"><h3 id="x5-6-aanbevelingen-voor-vervolg-2e-high-5"><span class="secno">5.6 </span>Aanbevelingen voor vervolg (2e high-5)</h3><p>Voor de aanbevelingen wordt verwezen naar paragraaf <a href="#aanbevelingen-met-betrekking-tot-historie">Aanbevelingen met betrekking tot historie</a></p></section></section><section data-format="markdown" id="implementatieaspecten-van-historie"><!--OddPage--><h2 id="x6-implementatieaspecten-van-historie"><span class="secno">6. </span>Implementatieaspecten van historie</h2><p>Er zijn verschillende manieren waarop historie in linked data gerepresenteerd kan worden.  Deze manieren hebben verschillende voor- en nadelen die we hier inzichtelijk maken.</p><section id="variant-1-uitspraak-reificatie"><h3 id="x6-1-variant-1-uitspraak-reificatie"><span class="secno">6.1 </span>Variant 1: Uitspraak reïficatie</h3><p>In deze variant wordt de historie volledig weergegeven binnen de graaf structuur zelf.  De graaf structuur bevat zowel de uitspraken over objecten, alsook de registratieve gegevens die bij die uitspraken horen (bijvoorbeeld begin- en eind geldigheid).  Een visuele weergave hiervan is te vinden in <a href="#historie-uitspraak" class="fig-ref" title="Historie representatie op basis van uitspraak reïficatie">Figuur <span class="figno">10</span></a>.</p><p>Het afzonderlijk representeren van uitspraken als op zichzelfstaande entiteiten wordt in linked data “uitspraak reïficatie” genoemd.</p><p>Deze variant maakt gebruikt van:</p><ol>
<li>Standaard RDF triples.</li>
<li>RDF uitspraak reïficatie.</li>
<li>Sets van RDF uitspraken</li>
</ol><figure id="historie-uitspraak"><img src="media/historie-uitspraak.png" alt="historie-uitspraak">
<figcaption>Figuur <span class="figno">10</span> <span class="fig-title">Historie representatie op basis van uitspraak reïficatie</span></figcaption>
</figure></section><section id="variant-2-graaf-reificatie"><h3 id="x6-2-variant-2-graaf-reificatie"><span class="secno">6.2 </span>Variant 2: Graaf reïficatie</h3><p>In deze variant wordt de historie weergegeven buiten de graaf structuur.  De graaf structuur bevat de uitspraken over objecten.  De registratieve gegevens over die uitspraken worden toegekend aan de totale graaf waarin de uitspraken over objecten zich bevinden.  Een visuele weergave hiervan is te vinden in <a href="#historie-graaf" class="fig-ref" title="Historie representatie op basis van graaf-reïficatie">Figuur <span class="figno">11</span></a>.</p><p>Het afzonderlijk representeren van grafen als op zichzelfstaande entiteiten wordt in linked data “graaf reïficatie” genoemd.</p><p>Deze variant maakt gebruik van:</p><ol>
<li>Standaard RDF triples.</li>
<li>RDF graaf reïficatie.</li>
</ol><figure id="historie-graaf"><img src="media/historie-graaf.png" alt="historie-graaf">
<figcaption>Figuur <span class="figno">11</span> <span class="fig-title">Historie representatie op basis van graaf-reïficatie</span></figcaption>
</figure></section><section id="variant-3-graaf-reificatie-uitspraak-reificatie"><h3 id="x6-3-variant-3-graaf-reificatie-uitspraak-reificatie"><span class="secno">6.3 </span>Variant 3: Graaf reïficatie + uitspraak reïficatie</h3><p>In deze variant wordt de historie weergegeven binnen en buiten de graaf.  Binnen de graaf bevinden zich zowel uitspraken over objecten, alsook sommige registratieve gegevens over die uitspraken.  Hiervoor wordt binnen de graaf gebruik gemaakt van uitspraak reïficatie.  Naast de registratieve gegevens binnen de graaf zijn er ook registratiegegevens die over de graaf zelf gaan.  Hiervoor wordt graaf reïficatie toegepast.  Een visuele weergave hiervan is te vinden in <a href="#historie-graaf-uitspraak" class="fig-ref" title="Historie opslag op basis van graphs">Figuur <span class="figno">12</span></a>.</p><p>Deze variant maakt gebruik van:</p><ol>
<li>Standaard RDF triples.</li>
<li>RDF uitspraak reïficatie.</li>
<li>RDF graaf reïficatie.</li>
</ol><figure id="historie-graaf-uitspraak"><img src="media/historie-graaf-uitspraak.png" alt="historie-graaf-uitspraak">
<figcaption>Figuur <span class="figno">12</span> <span class="fig-title">Historie opslag op basis van graphs</span></figcaption>
</figure></section><section id="variant-4-ontkoppeling"><h3 id="x6-4-variant-4-ontkoppeling"><span class="secno">6.4 </span>Variant 4: Ontkoppeling</h3><p>In deze variant wordt de representatie van observaties losgekoppeld van de representatie van objecten.  Beide representaties worden weergegeven binnen de graaf structuur en zijn verbonden middels een herleidbaarheidsrelatie.  Inhoudelijke eigenschappen komen twee keer voor: één keer op het niveau van de observatie en één keer op het niveau van het object.  Een visuele weergave hiervan is te vinden in <a href="#historie-soc" class="fig-ref" title="Historie representatie op basis van ontkoppeling">Figuur <span class="figno">13</span></a>.</p><p>Deze aanpak wordt momenteel toegepast binnen IGO.</p><p>Deze variant maakt gebruikt van:</p><ol>
<li>Standaard RDF triples.</li>
</ol><figure id="historie-soc"><img src="media/historie-soc.png" alt="historie-soc">
<figcaption>Figuur <span class="figno">13</span> <span class="fig-title">Historie representatie op basis van ontkoppeling</span></figcaption>
</figure></section><section id="variant-5-ontkoppeling-data-cube"><h3 id="x6-5-variant-5-ontkoppeling-data-cube"><span class="secno">6.5 </span>Variant 5: Ontkoppeling + Data Cube</h3><p>Deze variant lijkt op variant 4, maar maakt gebruik van de <a href="https://www.w3.org/TR/vocab-data-cube/">Data Cube</a> standaard om de uitspraken over observaties op een gestandaardiseerde manier vast te leggen.  Een visuele weergave hiervan is te vinden in <a href="#historie-soc-data-cube" class="fig-ref" title="Historie representatie op basis van ontkoppeling en Data Cube">Figuur <span class="figno">14</span></a>.</p><figure id="historie-soc-data-cube"><img src="media/historie-soc-data-cube.png" alt="historie-soc-data-cube">
<figcaption>Figuur <span class="figno">14</span> <span class="fig-title">Historie representatie op basis van ontkoppeling en Data Cube</span></figcaption>
</figure></section><section id="vergelijkingstabel"><h3 id="x6-6-vergelijkingstabel"><span class="secno">6.6 </span>Vergelijkingstabel</h3><table>
  <caption>
    Tabel 1 ― Vergelijking tussen de voor- en nadelen van de verschillende varianten voor historie representatie in linked data.
  </caption>
  <thead>
    <tr><th></th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr>
  </thead>
  <tbody>
    <tr><th>duplicatie van eigenschappen</th><td>+</td><td>+</td><td>+</td><td>-</td><td>-</td></tr>
    <tr><th>standaards-conform</th><td>+</td><td>+</td><td>+</td><td>-</td><td>+</td></tr>
    <tr><th>metadata opslag op uitspraak niveau</th><td>+</td><td>-</td><td>+</td><td>-</td><td>+</td></tr>
    <tr><th>technische haalbaarheid: grafen</th><td>+</td><td>-</td><td>-</td><td>+</td><td>+</td></tr>
    <tr><th>technische haalbaarheid: reïficatie</th><td>-</td><td>+</td><td>-</td><td>+</td><td>+</td></tr>
  </tbody>
</table></section></section><section data-format="markdown" id="gegevens-koppelen-tussen-een-sor-gebouw-en-een-andere-informatiebron"><!--OddPage--><h2 id="x7-gegevens-koppelen-tussen-een-sor-gebouw-en-een-andere-informatiebron"><span class="secno">7. </span>Gegevens koppelen tussen een SOR Gebouw en een andere informatiebron</h2><figure id="voorbeeld-informatie"><img src="media/voorbeeld-informatie.png" alt="voorbeeld-informatie">
<figcaption>Figuur <span class="figno">15</span> <span class="fig-title">Informatie over een gebouw uit verschillende bronnen
</span></figcaption></figure><p>Dit betreft use cases waarin een informatiebron (niet de SOR zelf) wilt koppelen met een object in de SOR, zoals een informatiebron met energiegegevens.
</p><p>De bronnen waaruit de SOR wordt samengesteld zijn andere bronnen dan waar de energiegegevens worden bijgehouden. Wat in ieder geval niet de bedoeling is, is het overnemen en opslaan van de data uit deze bronnen naar de SOR. In plaats daarvan beogen we een federatief stelsel, waarin de verschillende bronnen worden bevraagd en de data uit deze bronnen in samenhang geleverd kunnen worden aan afnemers. De informatiebron met energiegegevens kan gecombineerd worden met de informatiebron SOR (of een basisregistratie).
</p><p>In dit geval gaat het niet om het aanbrengen van samenhang tussen gegevens van de basisregistraties onder de SOR. Daarover hebben we in een eerdere High 5 al veel gezegd onder de noemer <a href="https://geonovum.github.io/disgeo-demo/#governance-op-het-snijvlak">Governance op het snijvlak</a>.</p><p>We hebben het hier over het aanbrengen van samenhang tussen gegevens <em>uit andere bronnen</em> met de data van de SOR. Anders gezegd, de SOR kent de energiegegevens niet, maar de energiegegevens kent wel een SOR object (of basisregistratie object) en door een koppeling hiertussen te leggen zijn beide informatiebronnen integraal te bevragen en kunnen gegevens bij elkaar gebracht worden.
</p><p>We noemen de niet-SOR bronnen in onderstaande tekst: andere bronnen. </p><p>De belangrijkste stap is voor een andere bron om eerst een betrouwbare koppeling te leggen van een andere bron naar de SOR, al dan niet via de BAG, de BGT, de WOZ, enz. Dit is op zichzelf niet eenvoudig. je kan hierbij denken aan een koppeling op basis van een automatische matching op basis van adres, geometrie, of beide.
</p><section id="manieren-van-koppelen"><h3 id="x7-1-manieren-van-koppelen"><span class="secno">7.1 </span>Manieren van koppelen</h3><p>Bij het leggen van een koppeling zijn in theorie verschillende manieren denkbaar. We kijken naar elk van deze en naar de voors en tegens ervan.
</p><ul>
<li>optie 1: Deze koppeling zou een beheerde relatie kunnen zijn vanuit een bestaand object uit een andere bron naar een SOR object. </li>
<li>optie 2: Deze koppeling zou een nieuw "koppeling" object kunnen zijn, een geobjectiveerde relatie, die een bestaand object uit een andere bron met een SOR object koppelt. Deze verandert het SOR object niet en verandert het eigen bronobject niet. Je zou dit een koppelklasse kunnen noemen.</li>
<li>optie 3: Deze koppeling zou een uitbreiding of aanvulling kunnen zijn van een bestaand SOR objecttype.</li>
</ul><p>Voorbeelden van deze koppelingen zijn: </p><ul>
<li>De EAN-BAG koppeling (beheerde relatie vanuit een eigen object, het energieafgiftepunt, uit een andere bron naar een BR/SOR object)
</li>
<li>De BRK-BAG koppeling (koppelklasse die beide bronnen niet aanpast)</li>
<li>De BGT-BAG koppeling (Semantische relatie tussen BGT Pand en BAG Pand)</li>
</ul><p><strong>Uitgangspunten:</strong></p><p><strong><em>1. De koppeling loopt in principe altijd van een "andere" bron naar de SOR.</em></strong></p><p>Voordelen:
</p><ul>
<li>Er is geen impact op de SOR, maar het koppelt wel beide bronnen aan elkaar;</li>
<li>Er ontstaat een eco-systeem waarmee informatie uit bronnen gekoppeld kan worden met de SOR en de basisregistraties.
</li>
<li>Via deze koppelingen zijn andere bronnen ook met elkaar te koppelen. Als een bron A met object A1 een koppeling heeft met SOR object S1 en een andere bron B met object B1 heeft deze koppeling ook, dan zijn ook A1 en B1 ook (indirect) gekoppeld. Afhankelijk van de semantiek van de koppelingen naar S kan deze indirecte koppeling zelfs verder gebruikt worden.
</li>
</ul><p>Implicaties:</p><ul>
<li>Andere bronnen (moeten) gaan koppelen met de SOR (koppelingen naar basisregistraties worden vervangen door koppelingen naar de SOR);</li>
</ul><p><strong><em>2. Binnen de SOR zelf zijn er koppelingen tussen de BAG en de BGT, de BAG en de WOZ, maar deze zijn voor de gebruikers van de SOR verborgen.</em></strong></p><p><strong><em>3. Van de SOR naar een andere bron zal er geen koppeling zijn (in theorie wel mogelijk).</em></strong></p><p><strong><em>4. Een koppeling kan ook gelegd worden als deze zuiver geometrisch kan worden bepaald.</em></strong></p><p>Nadat een koppeling is gelegd, moet deze ook beheerd worden. Maar zodra de koppeling er is, kunnen gegevens uit de SOR en uit de "andere" bron bij elkaar gebracht worden. 
Hier zijn een aantal opties denkbaar.
</p></section><section id="combineren-van-de-eigen-bron-met-sor-gegevens"><h3 id="x7-2-combineren-van-de-eigen-bron-met-sor-gegevens"><span class="secno">7.2 </span>Combineren van de eigen bron met SOR gegevens</h3><p>Er zijn verschillende modelleerpatronen waaraan gedacht kan worden. Deze patronen hebben we in de High-5 verkend. Elk patroon heeft eigen voordelen en nadelen; er is nog geen voorkeur uitgesproken, en nog geen advies per situatie. We gaan deze opties verder onderzoeken.</p><p>Algemeen kunnen we wel de volgende voorwaarden stellen voor een samenhangend stelsel van informatie gekoppeld aan de SOR:</p><ul>
<li>Maak goed duidelijk wat de herkomst van het gegeven is qua bron - uit de SOR of uit een externe bron, bijvoorbeeld het energie domein;</li>
<li>Wanneer je wilt meedoen in het samenhangende stelsel zal jouw dataset moeten voldoen aan dezelde logische aspecten als de SOR</li>
<li>voor tijdreizen is dezelfde uitdrukking van tijdlijnen nodig</li>
<li>voor het kunnen koppelen of platslaan van identificatie is dezelfde manier van identificeren nodig</li>
</ul><p>Dat levert de volgende voordelen op:</p><ul>
<li>Afnemers kunnen via de ontsluiting van het samenhangende stelsel informatie uit verschillende datasets in combinatie met de SOR informatie opvragen, zonder dat ze deze combinatie zelf moeten maen.</li>
<li>Een afnemer hoeft niet de bronnen apart te bevragen en zelf de software te ontwikkelen;</li>
<li>De bron-beheerder en de SOR-beheerder kunnen er samen voor zorgen dat het informatieproduct functioneel helemaal goed/juist is, afnemers hoeven dit niet te doen.
</li>
</ul><p>Daarbij spelen de volgende implicaties: </p><ul>
<li>De verantwoordelijkheid van het meeleveren van gegevens komt bij de informatieproductleverancier te liggen (in overleg met de SOR);</li>
<li>De eisen aan gegevens voor basisregistraties gaan ook gelden voor de informatievoorziening die het informatieproduct levert, zoals de beschrijving en de standaarden die hiervoor gelden, de historie tijdlijnen en tijdreis mogelijkheden.
</li>
</ul><section id="voorbeeldcasus"><h4 id="x7-2-1-voorbeeldcasus"><span class="secno">7.2.1 </span>Voorbeeldcasus</h4><p>Voor het duiden van deze verschillende modelelerwijzes gebruiken we de voorbeeldcasus uitgebeeld in <a href="#koppelen-voorbeeldcase" class="fig-ref" title="Voorbeeldcasus te koppelen informatiemodellen">Figuur <span class="figno">16</span></a>. We hebben twee "externe" objecttypes <code>Gebouwdeel</code> en <code>MijnGebouw</code> die we op verschillende manieren willen koppelen met <code>Gebouw</code> uit de SOR.</p><figure id="koppelen-voorbeeldcase"><img src="media/koppelen-voorbeeldcase.drawio.png" alt="koppelen-voorbeeldcase">
<figcaption>Figuur <span class="figno">16</span> <span class="fig-title">Voorbeeldcasus te koppelen informatiemodellen</span></figcaption>
</figure></section><section id="relateren-van-verschillende-objecttypes"><h4 id="x7-2-2-relateren-van-verschillende-objecttypes"><span class="secno">7.2.2 </span>Relateren van verschillende objecttypes</h4><section id="optie-1-koppelen-vanuit-een-andere-bron-naar-de-sor-met-een-relatie"><h5 id="x7-2-2-1-optie-1-koppelen-vanuit-een-andere-bron-naar-de-sor-met-een-relatie"><span class="secno">7.2.2.1 </span>Optie 1: Koppelen vanuit een andere bron naar de SOR met een relatie</h5><p>Deze koppeling zou een beheerde relatie kunnen zijn vanuit een andere bron object naar een SOR object. Dit kan op verschillende manieren:</p><section id="a-meegemodelleerd-in-dataset-als-relatie"><h6 id="x7-2-2-1-1-a-meegemodelleerd-in-dataset-als-relatie"><span class="secno">7.2.2.1.1 </span>a: Meegemodelleerd in dataset als relatie</h6><p>Je kunt een relatie meemodelleren in een dataset door vanuit die dataset een relatie op te nemen naar een SOR-object. De relatie wordt een (nieuwe) eigenschap van een al bestaand object uit de eigen/andere bron.
</p><p>Om aan te duiden dat deze relatie verwijst naar een extern informatiemodel gebruiken we het stereotype <a href="https://docs.geostandaarden.nl/mim/mim/#externe-koppeling">«Externe koppeling»</a> uit [<cite><a class="bibref" href="#bib-mim">MIM</a></cite>]. Merk op dat we in het externe informatiemodel verwijzen naar objecttype <code>Gebouw</code> uit de SOR. Het doel hiervan is het kunnen verwijzen naar een SOR Gebouw d.m.v. de identificatie van de SOR. Het is, in de representatie als data, belangrijk om niet alleen een directe referentie naar de identificatie op te nemen, maar om daadwerkelijk een objectstructuur van het gerefereerde object op te nemen. Dit laatste maakt het gemakkelijk om datastructuren als het ware over elkaar heen te leggen (zie datavoorbeelden in JSON).</p><figure id="koppelen-relateren-meegemodelleerd"><img src="media/koppelen-relateren-meegemodelleerd.drawio.png" alt="koppelen-relateren-meegemodelleerd">
<figcaption>Figuur <span class="figno">17</span> <span class="fig-title">Relatie met SOR object meegemodelleerd in (externe) dataset</span></figcaption>
</figure><aside class="example" id="example-10"><div class="marker">
      <a class="self-link" href="#example-10">Voorbeeld 10</a>
    </div><p><strong>Instantiedata voorbeeld in JSON:</strong></p>
<p><strong><em>Extern:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "456",
"domein": "extern/gebouwdeel",
"energieprestatie": 1.23,
"gebruiksfunctie": {
  "code": "wonen"
}
"ligtIn": {
  "identificatie": "123",
  "domein": "sor/gebouw",
}
}</code></pre>
<p><strong><em>SOR:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "123",
"domein": "sor/gebouw",
"bouwjaar": "1988"
}</code></pre>
<p><strong><em>In Samenhang:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "456",
"domein": "extern/gebouwdeel",
"energieprestatie": 1.23,
"gebruiksfunctie": {
  "code": "wonen"
}
"ligtIn": {
  "identificatie": "123",
  "domein": "sor/gebouw",
  "bouwjaar": "1988"
}
}</code></pre>
</aside><p><strong>Implicaties</strong></p><ul>
<li>Je beheert de relatie bij de andere objectinformatie</li>
</ul></section><section id="b-apart-beheerde-linkset"><h6 id="x7-2-2-1-2-b-apart-beheerde-linkset"><span class="secno">7.2.2.1.2 </span>b: Apart beheerde "linkset"</h6><p>Wanneer je een objecttype uit een bestaande dataset wilt koppelen aan de SOR, zonder het objecttype, of de dataset, zelf aan te passen is het mogelijk om een aparte "linkset" op te stellen. De link van het object A1 naar het SOR object S1 wordt dan buiten het bestaande object beheert, als link. De link bevat alleen de identificatie van A1 en van S1. De link is een aanvulling op het bestaande object, maar wordt wel los beheerd.
</p><p>Een linkset is niets meer dan een set van relaties tussen instanties van twee objecttypen, van het bestaande object naar het SOR object. </p><p>Deze linkset kan onderdeel zijn van dezelfde dataset die je wilt koppelen aan de SOR, maar kan ook een losse dataset zijn met verschillend beheer.</p><figure id="koppelen-relateren-linkset"><img src="media/koppelen-relateren-linkset.drawio.png" alt="koppelen-relateren-linkset">
<figcaption>Figuur <span class="figno">18</span> <span class="fig-title">Relatie met SOR object meegemodelleerd in (externe) apart beheerde "linkset"</span></figcaption>
</figure><aside class="example" id="example-11"><div class="marker">
      <a class="self-link" href="#example-11">Voorbeeld 11</a>
    </div><p><strong>Instantiedata voorbeeld in JSON:</strong></p>
<p><strong><em>Extern:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "456",
"domein": "extern/gebouwdeel",
"energieprestatie": 1.23,
"gebruiksfunctie": {
  "code": "wonen"
}
}</code></pre>
<p><strong><em>Extern (linkset):</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "456",
"domein": "extern/gebouwdeel",
"ligtIn": {
  "identificatie": "123",
  "domein": "sor/gebouw"
}
}</code></pre>
<p><strong><em>SOR:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "123",
"domein": "sor/gebouw",
"bouwjaar": "1988"
}</code></pre>
<p><strong><em>In Samenhang:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "456",
"domein": "extern/gebouwdeel",
"energieprestatie": 1.23,
"gebruiksfunctie": {
  "code": "wonen"
}
"ligtIn": {
  "identificatie": "123",
  "domein": "sor/gebouw",
  "bouwjaar": "1988"
}
}</code></pre>
</aside><p>Ook hier maken we gebruik van objectstructuur plus identificatie om informatie "over elkaar heen te leggen" en in samenhang te presenteren.</p><div class="note" role="note" id="issue-container-generatedID-6"><div role="heading" class="note-title marker" id="h-note-6" aria-level="7"><span>Noot</span></div><aside class=""><p>Semantisch is er geen verschil tussen optie 1.a en optie 1.b. Het verschil is dat in dit geval het beheer van de relatie apart staat van de andere informatie van het externe <code>Gebouwdeel</code>.</p>
</aside></div><p><strong>Implicaties:</strong></p><ul>
<li>De SOR en je eigen objecten worden niet geraakt, op geen enkele manier, maar er is wel een relatie gelegd.
</li>
<li>Je kan de historie van de relatie los beheren.</li>
<li>De link en het bestaande object hebben elk eigen historie.
</li>
</ul></section></section><section id="optie-2-apart-beheerde-koppelinstanties"><h5 id="x7-2-2-2-optie-2-apart-beheerde-koppelinstanties"><span class="secno">7.2.2.2 </span>Optie 2: Apart beheerde koppelinstanties</h5><p>Een andere optie is het definieren van een nieuw objecttype, die de koppeling vertegenwoordig tussen objecten van objecttype A uit bron A en objecttype S uit de SOR. We noemen dit een koppelklasse. Een Koppelklasse is een speciaal construct waarmee twee objecttypes aan elkaar gekoppeld kunnen worden met uitgaande relatiesoorten vanuit de Koppelklasse naar de Objecttypes die met elkaar gekoppeld worden. Semantisch gezien is dit gelijk aan het relateren van twee objecten.
</p><p>Bv. het objecttype AS-koppeling. Koppelingen komen te liggen tussen individuele objecten/instanties van A en individuele objecten/instantie van S, door middel van AS-objecten, die verwijzingen hebben naar A en S. Bv. een koppeling AS1 tussen A1 en S1 of AS2 tussen A21 en S35 enz. </p><p>Het beheer van de koppeling zit dan in principe op het niveau van de koppelklasse.</p><div class="note" role="note" id="issue-container-generatedID-7"><div role="heading" class="note-title marker" id="h-note-7" aria-level="6"><span>Noot</span></div><aside class=""><p>De koppelklasse en de koppelinstanties/koppelobjecten staan los van de objecten die gekoppeld worden. De objecten die gekoppeld worden, worden niet geraakt en de koppelklasse heeft eigen historie. De koppelklasse ondersteund navigatie over de relaties van beide kanten, van A naar S en van S naar A. Aanvullend kunnen gegevens zoals de koppelingswijze of andere extra informatie opgenomen worden in de koppelklasse.
</p>
</aside></div><div class="note" role="note" id="issue-container-generatedID-8"><div role="heading" class="note-title marker" id="h-note-8" aria-level="6"><span>Noot</span></div><aside class=""><p>Bij het gebruik van een koppelklasse is het niet mogelijk om informatie "over elkaar heen te leggen" voor gebruik in samenhang, zoals bij dat optie 1 kan. A kent de koppelklasse AS niet en S kent de koppelklasse AS ook niet. A en S zijn in deze zin volledig ontkoppelt. Alleen AS heeft weet van A en S en de koppeling ertussen. Het is noodzakelijk zijn om ergens te beschrijven hoe gegevens uit de gekoppelde objecten, via de relatie tussen de twee objecttypes die verbonden worden door de koppelklasse, in samenhang bij elkaar gebracht moeten worden.</p>
</aside></div><figure id="koppelen-relateren-koppelklasse"><img src="media/koppelen-relateren-koppelklasse.drawio.png" alt="koppelen-relateren-koppelklasse">
<figcaption>Figuur <span class="figno">19</span> <span class="fig-title">Relatie met SOR object als instantie van een koppelklasse in (externe) dataset</span></figcaption>
</figure><aside class="example" id="example-12"><div class="marker">
      <a class="self-link" href="#example-12">Voorbeeld 12</a>
    </div><p><strong>Instantiedata voorbeeld in JSON:</strong></p>
<p><strong><em>Extern:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "456",
"domein": "extern/gebouwdeel",
"energieprestatie": 1.23,
"gebruiksfunctie": {
  "code": "wonen"
}
}</code></pre>
<p><strong><em>Extern (koppelinstantie):</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "789",
"domein": "extern/gebouwdeel-gebouw",
"gebouwdeel": {
  "identificatie": "456",
  "domein": "extern/gebouwdeel",
},
"gebouw": {
  "identificatie": "123",
  "domein": "sor/gebouw"
}
}</code></pre>
<p><strong><em>SOR:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "123",
"domein": "sor/gebouw",
"bouwjaar": "1988"
}</code></pre>
<p><strong><em>In Samenhang:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "456",
"domein": "extern/gebouwdeel",
"energieprestatie": 1.23,
"gebruiksfunctie": {
  "code": "wonen"
}
"ligtIn": {
  "identificatie": "123",
  "domein": "sor/gebouw",
  "bouwjaar": "1988"
}
}</code></pre>
</aside><p><strong>Implicaties:</strong></p><ul>
<li>De SOR en je eigen objecten worden niet geraakt, op geen enkele manier, maar er is wel een koppeling.
</li>
<li>Je kan de historie van de koppeling los beheren.</li>
<li>Je moet afleidingsregels specificeren om de semantische relatie tussen de gekoppelde objecten te manifesteren.</li>
</ul></section></section><section id="uitbreiden-van-een-bestaand-objecttype"><h4 id="x7-2-3-uitbreiden-van-een-bestaand-objecttype"><span class="secno">7.2.3 </span>Uitbreiden van een bestaand objecttype</h4><p><strong>Voorwaarde</strong>:
</p><ul>
<li>Dit kan alleen als je eigen objecttype echt overeenkomt met wat er in de SOR onder een Gebouw wordt verstaan. Als dat zo is dan is dit semantisch direct goed geregeld.
</li>
<li>In de implementatie zal het, vanwege het bijhouden van historie, nodig zijn om in je eigen object historie bij te houden op dezelfde manier als de SOR dit doet. </li>
</ul><section id="optie-1-specialiseer-het-sor-object-en-gebruik-dezelfde-identificatie"><h5 id="x7-2-3-1-optie-1-specialiseer-het-sor-object-en-gebruik-dezelfde-identificatie"><span class="secno">7.2.3.1 </span>Optie 1: Specialiseer het SOR object en gebruik dezelfde identificatie</h5><p>Hier breiden we een SOR objecttype in een externe dataset uit door deze op informatiemodelniveau te specialiseren en op instantieniveau gebruik te maken van de SOR identificatie voor identificeren van het object waarvoor we de gespecialiseerd beschrijving opnemen.</p><div class="note" role="note" id="issue-container-generatedID-9"><div role="heading" class="note-title marker" id="h-note-9" aria-level="6"><span>Noot</span></div><aside class=""><p>Het is hier belangrijk om onderscheid te maken tussen het object (het ding wat willen beschrijven) en het informatieobject (de set aan gegevens over het ding). De identificatie identificeert het ding en niet de informatie over het ding. De informatie over het ding wordt uniek gemaakt door de gekoppelde registratiegegevens. Daarom is het mogelijk om de object-identificatie die de SOR gebruikt her te gebruiken.</p>
</aside></div><figure id="koppelen-uitbreiden-extenden"><img src="media/koppelen-uitbreiden-specialiseren.drawio.png" alt="koppelen-uitbreiden-specialiseren">
<figcaption>Figuur <span class="figno">20</span> <span class="fig-title">Specialiseer het SOR object in (externe) dataset en gebruik de SOR identificatie</span></figcaption>
</figure><aside class="example" id="example-13"><div class="marker">
      <a class="self-link" href="#example-13">Voorbeeld 13</a>
    </div><p><strong>Instantiedata voorbeeld in JSON:</strong></p>
<p><strong><em>Extern:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "123",
"domein": "sor/gebouw",
"capaciteit": 550
}</code></pre>
<p><strong><em>SOR:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "123",
"domein": "sor/gebouw",
"bouwjaar": "1988"
}</code></pre>
<p><strong><em>In Samenhang:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "123",
"domein": "sor/gebouw",
"bouwjaar": "1988",
"capaciteit": 550
}</code></pre>
</aside><p><strong>Implicaties</strong>:</p><ul>
<li>Het is direct duidelijk dat alle definities en afbakeningen van de SOR ook gelden voor de extensie (de specialisatie is je eigen object, het SOR Gebouw is de generalisatie).</li>
<li>Hergebruik van de identificatie maakt het gemakkelijk om de externe (uitbreiding van ) gegevens te combineren met de SOR gegevens.</li>
</ul></section><section id="optie-2-stel-het-externe-object-gelijk-aan-het-sor-object-met-een-speciale-relatie-isgelijkaan"><h5 id="x7-2-3-2-optie-2-stel-het-externe-object-gelijk-aan-het-sor-object-met-een-speciale-relatie-isgelijkaan"><span class="secno">7.2.3.2 </span>Optie 2: Stel het externe object gelijk aan het SOR object met een speciale relatie: <em>isGelijkAan</em></h5><p>Het is niet altijd mogelijk om dezelfde identificatie als de SOR te gebruiken. Mogelijk bestaat er al een andere identificatie in de externe registratie die ook waarde heeft buiten de context van de SOR. Deze optie introduceert een speciale relatie <code>isGelijkAan</code>, waarmee objecten aan elkaar gelijkgesteld kunnen worden. Binnen het SOR stelsel zou met deze speciale relatie kunnen bepalen dat twee verschillende identificatie platgeslagen kunnen worden tot 1 om zo de objectinformatie te kunnen combineren.
</p><div class="note" role="note" id="issue-container-generatedID-10"><div role="heading" class="note-title marker" id="h-note-10" aria-level="6"><span>Noot</span></div><aside class=""><p>Omdat we hier gebruikmaken van een relatie, zijn de opties uit <a href="#relateren-van-verschillende-objecttypes" class="sec-ref"><span class="secno">§&nbsp;7.2.2</span> <span class="sec-title">Relateren van verschillende objecttypes</span></a> ook hiermee in combinatie toe te passen. Zo zouden de <code>isGelijkAan</code> relaties bijvoorbeeld ook in een apart beheerde linkset worden opgenomen.</p>
</aside></div><figure id="koppelen-uitbreiden-gelijkstellen"><img src="media/koppelen-uitbreiden-gelijkstellen.drawio.png" alt="koppelen-uitbreiden-gelijkstellen">
<figcaption>Figuur <span class="figno">21</span> <span class="fig-title">Gebruik eigen identificatie voor (extern) object en stel dat object gelijk aan SOR object</span></figcaption>
</figure><aside class="example" id="example-14"><div class="marker">
      <a class="self-link" href="#example-14">Voorbeeld 14</a>
    </div><p><strong>Instantiedata voorbeeld in JSON:</strong></p>
<p><strong><em>Extern:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "456",
"domein": "sor/mijn-gebouw",
"capaciteit": 550,
"isGelijkAan": {
  "identificatie": "123",
  "domein": "sor/gebouw"
}
}</code></pre>
<p><strong><em>SOR:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "123",
"domein": "sor/gebouw",
"bouwjaar": "1988"
}</code></pre>
<p><strong><em>In Samenhang:</em></strong></p>
<pre><code class="language-json hljs" aria-busy="false">{
"geregistreerdMet": {},
"identificatie": "123",
"domein": "sor/gebouw",
"bouwjaar": "1988",
"capaciteit": 550
}</code></pre>
</aside><p><strong>Implicaties</strong>:</p><ul>
<li>Je kunt jouw objectinformatie samenvoegen met objectinformatie uit de SOR zonder de identificatie her te gebruiken.</li>
<li>De <code>isGelijkAan</code> relatie kan op verschillende manieren gelegd worden. Zie <a href="#relateren-van-verschillende-objecttypes" class="sec-ref"><span class="secno">§&nbsp;7.2.2</span> <span class="sec-title">Relateren van verschillende objecttypes</span></a></li>
</ul></section></section></section><section id="aanbeveling"><h3 id="x7-3-aanbeveling"><span class="secno">7.3 </span>Aanbeveling</h3><p>Voor de aanbevelingen wordt verwezen naar paragraaf <a href="#aanbevelingen-met-betrekking-tot-koppelen">Aanbevelingen met betrekking tot koppelen</a>.</p></section></section><section data-format="markdown" id="imsor-gebouw-0"><!--OddPage--><h2 id="x8-imsor-gebouw"><span class="secno">8. </span>IMSOR Gebouw</h2><p>De gegevenscatalogus van het tijdens de High-5 geproduceerde IMSOR Gebouw informatiemodel, inclusief diagram(men), is hier te vinden:
</p><ul>
<li><a href="https://geonovum.github.io/disgeo-demo-3b/">IMSOR Samenhangend gebouw informatiemodel</a> (ReSpec document)</li>
</ul></section><section data-format="markdown" id="vertalingsregels-en-afleidingsregels"><!--OddPage--><h2 id="x9-vertalingsregels-en-afleidingsregels"><span class="secno">9. </span>Vertalingsregels en afleidingsregels</h2><section id="inleiding-0"><h3 id="x9-1-inleiding"><span class="secno">9.1 </span>Inleiding</h3><p>Om te komen tot een samenhangend Gebouw in de SOR, moet data gecombineerd worden uit de BAG, BGT, WOZ en BRT. Om te weten welke data hoe gecombineerd moet worden, is een informatieanalyse nodig en veel kennis van de huidige basisregistraties. Op basis van deze informatieanalyse moeten vertaalregels gespecificeerd worden. De vertaalregels kunnen vervolgens worden gebruikt in de omzetting van data uit de huidige basisregistraties naar de SOR. In een slimme architectuur kunnen deze regels een plek krijgen in de 'semantische laag' die ervoor zorgt dat de data uit de huidige basisregistraties in samenhang kunnen worden benaderd. De vertaalregels vertellen dan precies hoe de data uit de basisregistraties moeten worden omgezet naar data conform het IMSOR model.
</p><p>Tijdens deze High-5 hebben we een eerste (zeer kleinschalig!) begin gemaakt met het opstellen van zulke vertaalspecificaties, vooral om te beproeven waar we bij dit werk allemaal tegenaan lopen. </p><p>We hebben voor de SOR objecttypen <code>Gebouw</code>, <code>Gebouwzone</code> en <code>Gebouwlaag</code> een eerste aanzet tot een mapping gemaakt. Hierbij bleek dat je in zo'n mapping twee soorten gevallen tegenkomt:
</p><ul>
<li>Het gegeven is aanwezig in een bronregistratie en moet worden <em>vertaald</em> naar een gegeven in de SOR (en hierbij heb je dan nog allerlei gradaties van eenvoudige naar complexe mappings). Bijvoorbeeld: het gegeven <code>bouwlaag</code> van WOZ deelobject kan worden vertaald naar <code>bouwlaagnummer</code> van SOR Gebouwzone.</li>
<li>Het gegeven is niet als zodanig aanwezig in een bronregistratie, maar kan wel worden <em>afgeleid</em>. Bijvoorbeeld: de 2.5D geometrie van Gebouwlaag. Gebouwlaag zit als attribuut in de WOZ, maar niet met een eigen geometrie. Dit gegeven kan op een slimme manier wellicht wel worden afgeleid uit de in WOZ en BAG aanwezige gegevens over 2D geometrie, gebouwtype, oppervlakte en bouwjaar.</li>
</ul><p>Voor het realiseren van een semantische laag bovenop huidige registraties (volgens het model van de SOR) zijn dus <em>vertalingsregels</em> en <em>afleidingsregels</em>  nodig. Deze willen we vastleggen op conceptueel niveau, zodat ze onafhankelijk zijn van een specifieke technische omgeving en (met hulp van de informatiemodelleur) zowel door domeinexperts als door programmeurs begrepen kunnen worden. </p><p>Vertalingsregels geven aan hoe de gegevens uit verschillende bronnen zich laten vertalen in gegevens conform het model van de SOR. Deze regels kunnen gericht zijn op de specifieke registraties in het kader van de SOR, waarbij mappings worden toegepast gebaseerd op transponeringstabellen. Echter is het ook wenselijk om deze regels zodanig op te stellen dat ze generiek genoeg zijn voor hergebruik buiten de context van de basisregistraties. Dit zou waardevol zijn voor de aansluiting met sectorale registraties; het gaat dan over breed toepasbare modelleerpatronen.</p><p>Afleidingsregels zijn nodig om uniformiteit te waarborgen. In gevallen waar het belangrijk is om afgeleide informatie vast te leggen in de SOR, dient deze afleiding op gestructureerde wijze te worden vastgelegd. Hiermee kunnen interpretatieverschillen in de inwinning/vastlegging van gegevens worden vermeden.
</p><p>Afleidingsregels hebben betrekking op datgene wat momenteel niet expliciet in de registraties is opgenomen, maar wel van belang is voor de SOR. In principe zullen er geen afleidingsregels worden gespecificeerd voor bestaande registratiegegevens die momenteel worden afgeleid uit andere registraties. Echter is het wel belangrijk deze gevallen in kaart te brengen, zodat in een latere fase kan worden gekeken naar automatische afleiding vanuit de SOR.
</p></section><section id="verschillende-soorten-vertalingsregels"><h3 id="x9-2-verschillende-soorten-vertalingsregels"><span class="secno">9.2 </span>Verschillende soorten vertalingsregels</h3><p>Vertalingsregels kunnen eenvoudige één op één mappings zijn, maar ook complexe omzettingen. Toen we keken naar de mappings vanuit BAG, BGT en WOZ naar SOR Gebouw kwamen we op vertalingsregels die van zeer eenvoudig to zeer complex gingen. In deze paragraaf geven we een overzicht van de varianten.
</p><p>Vertalingsregels kunnen betrekking hebben op vertalingen tussen de volgende elementen:</p><table>
<thead>
<tr>
<th>In basisregistratie</th>
<th>In SOR</th>
<th>Voorbeeld</th>
</tr>
</thead>
<tbody><tr>
<td>waardelijst waarde</td>
<td>waardelijst waarde</td>
<td>Simpel geval: BRT-Gebouw.typeGebouw <code>Toren</code> = SOR-Gebouw.type <code>Toren</code>. Het komt ook voor dat de waarde in de bronregistratie een nauwer begrip lijkt te zijn van een waarde in de SOR, bijvoorbeeld: BRT-Gebouw.typeGebouw <code>Boortoren</code> &lt; (specifieker dan) SOR-Gebouw.type <code>Toren</code>*. Soms lijkt er een relatie te zijn tussen de waardes van lijsten die behoren tot verschillende objecttypes. In deze gevallen is extra aandacht nodig voor het mappen en afleiden van attributen/relaties.</td>
</tr>
<tr>
<td>objecttype</td>
<td>objecttype</td>
<td>BAG Pand = SOR Gebouw</td>
</tr>
<tr>
<td>attribuutsoort waarde</td>
<td>attribuutsoort waarde</td>
<td>BAG-Pand.oorspronkelijk bouwjaar <code>&lt;waarde&gt;</code> = SOR-Gebouw.oorsponkelijk bouwjaar <code>&lt;waarde&gt;</code></td>
</tr>
<tr>
<td>waardelijst waarde</td>
<td>objecttype</td>
<td>BGT-BegroeidTerreindeel.fysiekvoorkomen <code>heide</code> = SOR-Heide.</td>
</tr>
<tr>
<td>objecttype</td>
<td>waardelijst waarde</td>
<td>nog niet gevonden</td>
</tr>
<tr>
<td>waardelijst waarde</td>
<td>attribuutsoort waarde</td>
<td>nog niet gevonden</td>
</tr>
<tr>
<td>attribuutsoort waarde</td>
<td>waardelijst waarde</td>
<td>WOZ-object.aanduiding_repeterend <code>ja</code> = SOR-Gebouw.aard <code>repeterend</code></td>
</tr>
<tr>
<td>objecttype</td>
<td>attribuutsoort waarde</td>
<td>nog niet gevonden</td>
</tr>
<tr>
<td>attribuutsoort waarde</td>
<td>objecttype</td>
<td>WOZ <code>bouwlaag</code> attribuut met getalswaarde wordt in SOR objecttype <code>Bouwlaag</code> met eigen 2.5D geometrie. NB hierbij moet de geometrie afgeleid worden.</td>
</tr>
</tbody></table><div class="note" role="note" id="issue-container-generatedID-11"><div role="heading" class="note-title marker" id="h-note-11" aria-level="4"><span>Noot</span></div><aside class=""><p>*Idealiter zou de nadere relatie tussen BRT <code>Boortoren</code> en SOR <code>Toren</code> al in de context van de registratie worden gespecificeerd, echter zijn zulke hiërarchische lijsten niet beschikbaar. Bij bevragingen vanuit de SOR is dit wel belangrijk, vooral wanneer er vanuit de SOR nadere relaties bestaan met waardes/concepten uit verschillende registraties. Gebruikers hebben deze vastlegging nodig wanneer ze niet bekend zijn met de inhoud van alle onderliggende registraties.
</p>
</aside></div></section></section><section data-format="markdown" id="inventarisatie-van-manieren-om-vertaalspecificaties-vast-te-leggen"><!--OddPage--><h2 id="x10-inventarisatie-van-manieren-om-vertaalspecificaties-vast-te-leggen"><span class="secno">10. </span>Inventarisatie van manieren om vertaalspecificaties vast te leggen</h2><p>Zoals in het vorige hoofdstuk is uitgelegd, zijn er in de SOR vertalingsregels en afleidingsregels nodig die uitdrukken hoe de SOR inhoud zich verhoudt tot de gegevens in de bestaande basisregistraties. Deze regels willen we vastleggen op conceptueel niveau, zodat ze onafhankelijk zijn van een specifieke technische omgeving en zowel door domeinexperts als door programmeurs begrepen kunnen worden.
</p><p>Hiervoor hadden we niet direct een uitdrukkingsvorm voorhanden. Meestal worden vertaalspecificaties, vaak transformaties genoemd, in een technische omgeving uitgedrukt. Soms gebeurt dit op basis van vertaal- of 'mapping'-tabellen; deze hebben een niet-formeel karakter en complexere regels zijn er moeilijk in uit te drukken. We hebben tijdens de High-5 een korte inventarisatieronde gedaan van mogelijke uitdrukkingsvormen voor vertaalspecificaties.</p><section id="inspire-harmonisatiemethode"><h3 id="x10-1-inspire-harmonisatiemethode"><span class="secno">10.1 </span>INSPIRE harmonisatiemethode</h3><p>Bij het harmoniseren van eigen data naar INSPIRE geharmoniseerde data moet veel data getransformeerd worden uit bronsystemen naar het INSPIRE datamodel.
</p><p>Vaak wordt hier de tool <a href="https://www.wetransform.to/products/halestudio/">HALE studio</a> voor gebruikt. Hierin kun je vertaalspecificaties voor gegevens uitdrukken. Hoe dit precies eruit ziet en of je deze vertaalspecificaties ook kunt hergebruiken buiten de HALE omgeving weten we nog niet.</p><p>In het programma Basisregistratie Ondergrond (BRO) zijn vertaalspecificaties gemaakt van bron naar INSPIRE in Excel tabellen. Zie <a href="https://github.com/BROprogramma/GLD/blob/gh-pages/INSPIRE/Grondwater%20INSPIRE%20mapping.xlsx?raw=true">voorbeeld</a>.
</p></section><section id="niet-formele-vertaaltabel"><h3 id="x10-2-niet-formele-vertaaltabel"><span class="secno">10.2 </span>Niet-formele vertaaltabel</h3><p>In het IGO project zijn <a href="https://labs.kadaster.nl/demonstrators/architectuur-selfservice/KnowledgeGraph/">vertaalspecificaties</a> opgenomen in een vertaaltabel die kon worden gebruikt om samen met domeinexperts (die de inhoud kenden) vast te leggen hoe gegevens moesten worden gemapt of afgeleid. Daarna zijn deze specificaties in <a href="https://labs.kadaster.nl/demonstrators/architectuur-selfservice/LDViews/">SPARQL construct statements</a> geïmplementeerd.
</p><p>Ook in het programma Basisregistratie Ondergrond (BRO) zijn vertaalspecificaties vastgelegd in een vertaaltabel (zie onder INSPIRE harmonisatiemethode).</p></section><section id="visuele-mapping-tools"><h3 id="x10-3-visuele-mapping-tools"><span class="secno">10.3 </span>Visuele mapping tools</h3><p>Er bestaan ook visuele mapping tools. Binnen het IGO traject werd bijvoorbeeld de tool <a href="https://www.weaverhq.com/why-weaver.html">Weaver</a> gebruikt. Zie <a href="https://kadaster.wvr.io/bag2-0/home">voorbeeld</a>.</p><p>In de context van XML transformatie zijn er visuele mapping tools op de markt, waaruit XSLT gegenereerd kan worden voor de technische transformatie; zie bijvoorbeeld <a href="http://www.stylusstudio.com/xslt-mapper.html">Stylus Studio</a>. Er is echter nooit een visuele uitdrukkingsvorm gestandaardiseerd. Deze visuele mapping tools hebben dezelfde beperking als mapping tabellen: complexere mappings zijn niet altijd goed te visualiseren.</p></section><section id="uml"><h3 id="x10-4-uml"><span class="secno">10.4 </span>UML</h3><p>UML heeft voor zover wij konden ontdekken geen mogelijkheid om vertaalspecificaties uit te drukken in modelvorm. Hierbij plaatsen we de kanttekening dat UML zeer uitgebreid is, waardoor het kan zijn dat er wel een mogelijkheid bestaat die wij over het hoofd zagen.
</p><p>UML biedt wel in klasse-diagrammen een mogelijkheid om aan te geven dat een property van een class <code>derived</code> is. Maar meer dan een aanduiding is dit niet; je kunt niet aangeven hoe de property zich verhoudt tot datgene waaruit hij is afgeleid.</p><p>Imvertor gebruikt wel een soort mapping relaties tussen conceptuele en logische modellen: <a href="https://support.ptc.com/help/modeler/r9.1/en/index.html#page/Integrity_Modeler/umlprofile/UML_Trace.html">tracing</a>. Of dit geschikt is voor onze doeleinden hebben we niet kunnen bepalen.
</p></section><section id="qvt"><h3 id="x10-5-qvt"><span class="secno">10.5 </span>QVT</h3><p><a href="https://en.wikipedia.org/wiki/QVT">Query/View/Transformation (QVT)</a> is een aan UML gerelateerde standaard voor model transformaties. Ons is geen bestaande toepassing hievan bekend, maar vanwege de nauwe relatie met UML is het de moeite waard om ons hier verder in te verdiepen. Tijdens de High-5 hebben we dat nog niet gedaan.</p></section><section id="xslt"><h3 id="x10-6-xslt"><span class="secno">10.6 </span>XSLT</h3><p><a href="https://www.w3.org/TR/xslt/">XSLT</a> is een bekende declaratatieve transformatietaal waarin je kunt uitdrukken wat de transformatieregels zijn om van een bronformaat naar een doelformaat te komen. Het declaratieve karakter maakt de taal interessant; dit betekent dat de transformatieregels niet uitdrukken HOE een computer de vertaling van bron naar doel moet uitvoeren, maar alleen WAT de relatie is tussen bron en gewenste doel.
</p><p>XSLT is echter een uitdrukkingsvorm op technisch implementatie-niveau (het zijn scripts; niet te lezen voor een domeinexpert) en werkt alleen met XML input. Daardoor is het voor ons doel niet geschikt. </p></section><section id="prov"><h3 id="x10-7-prov"><span class="secno">10.7 </span>PROV</h3><p>Met PROV ([<cite><a class="bibref" href="#bib-prov-dm">PROV-DM</a></cite>] en [<cite><a class="bibref" href="#bib-prov-o">PROV-O</a></cite>]) kun je vastleggen hoe gegevens van elkaar zijn afgeleid. Dit is vergelijkbaar met <a href="#modelleerpatroon-voor-de-beschrijving-van-de-afleiding-van-sor-informatieobjecten">hoe je dat doet voor informatieobjecten</a>.</p><p>Voor het vastleggen van de herkomst van een gegeven, moeten we het gegeven als <code>PROV Entiteit</code> modelleren. Dit betekent dat we een individueel gegeven als object moeten kunnen beschrijven, zodat we deze kunnen voorzien van extra eigenschappen. Hoe je dit het beste kunt doen moet verder onderzocht worden.</p></section><section id="shacl-rules"><h3 id="x10-8-shacl-rules"><span class="secno">10.8 </span>SHACL Rules</h3><p>Met <a href="https://www.w3.org/TR/shacl-af/#rules">SHACL Rules</a> ([<cite><a class="bibref" href="#bib-shacl-af">SHACL-AF</a></cite>]) is het mogelijk om op basis van "shapes" in bestaande in RDF uitgedrukte gegevens, in combinatie met generatieregels, nieuwe gegevens af te leiden.</p></section><section id="graphql"><h3 id="x10-9-graphql"><span class="secno">10.9 </span>GraphQL</h3><p>In GraphQL specificeer je een standaardschema, dat de brondata beschrijft, en een doelschema, dat beschrijft wat je terug wilt krijgen. Deze druk je uit in GraphQL queries. Net als bij XSLT heeft GraphQL een declaratief karakter.</p><p>Net als XSLT is GraphQL een taal op technisch implementatie-niveau, maar het abstraheert wel van verschillende soorten datastores. Daarom vinden we het interessant om te verkennen in de volgende High-5.
</p></section><section id="rml"><h3 id="x10-10-rml"><span class="secno">10.10 </span>RML</h3><p>Met <a href="https://rml.io/">RML</a> (RDF Mapping Languague) kun je willekeurige gestructureerde data transformeren naar een doelmodel in RDF. De ingrediënten voor een mapping zijn:</p><ul>
<li>Een manier om data te verkrijgen;</li>
<li>Een manier om over een deel van de data te itereren;</li>
<li>Een mapping naar het doelmodel.</li>
</ul><p>Een vergelijkbare mapping-opzet zou ook toegepast kunnen worden voor het transponeren van gegevens. Hiervoor zouden bouwblokken uit RML hergebruikt kunnen worden. RML heeft bijvoorbeeld een rijke mogelijkheid om transformatiefuncties mee te nemen in een mapping op een declaratieve manier.</p></section></section><section data-format="markdown" id="gebouwen-van-bron-naar-sor"><!--OddPage--><h2 id="x11-gebouwen-van-bron-naar-sor"><span class="secno">11. </span>Gebouwen van bron naar SOR</h2><section id="benodigde-bag-en-bgt-objecten"><h3 id="x11-1-benodigde-bag-en-bgt-objecten"><span class="secno">11.1 </span>Benodigde BAG en BGT objecten</h3><p>In scope voor deze High5 zijn de SOR objecttypen uit [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>] <a href="https://docs.geostandaarden.nl/disgeo/emso/#gebouw">paragraaf 5.3</a>, voor zover deze te vormen zijn uit alleen BAG en BGT data. Bovendien is het objecttype <code>Installatie</code> in scope vanwege de beoogde koppeling met energiegegevens. De lijst met gebruikte SOR objecttypen is:</p><ul>
<li><code>Gebouw</code></li>
<li><code>Gebouwcomponent</code></li>
<li><code>Open bouwwerk</code></li>
<li><code>Installatie</code></li>
<li><code>Verblijfsobject</code></li>
</ul><p>Niet in scope uit EMSO paragraaf 5.3:</p><ul>
<li><code>Bouwlaag</code>, dit is een nieuw objecttype</li>
<li><code>Ruimte</code>, dit is een nieuw objecttype</li>
<li><code>Toegangsdeur</code>, dit is een ('grotendeels') nieuw objecttype</li>
</ul><p>De volgende objecttypen uit de BAG en BGT zijn nodig voor de transponering van bron naar deze SOR objecttypen: </p><p>BAG:
</p><ul>
<li><code>Pand</code></li>
<li><code>Verblijfsobject</code></li>
</ul><p>BGT: </p><ul>
<li><code>Pand</code></li>
<li><code>OverigBouwwerk</code> type= <code>Bunker</code> | <code>Schuur</code> | <code>Open loods</code> | <code>Overkapping</code></li>
<li><code>Gebouwinstallatie</code> type= <code>Bordes</code> | <code>Luifel</code> | <code>Toegangstrap</code></li>
<li><code>Kunstwerkdeel</code> type= <code>Perron</code></li>
</ul></section><section id="vertaalspecificatie"><h3 id="x11-2-vertaalspecificatie"><span class="secno">11.2 </span>Vertaalspecificatie</h3><p>In het [<cite><a class="bibref" href="#bib-emso">EMSO</a></cite>] document, dat de inhoudelijke eisen aan de SOR beschrijft, is geen sprake meer van 'panden'; in plaats daarvan wordt het objecttype <code>Gebouw</code> geïntroduceerd. Meeste BAG/BGT panden kunnen één op één worden omgezet naar SOR Gebouw. In een aantal gevallen zullen BAG/BGT panden worden omgezet naar SOR Open bouwwerken. Daarnaast kan een aantal typen BGT <code>OverigBouwwerk</code> gemapt worden naar SOR <code>Gebouw</code>(typen <code>Bunker</code> of <code>Schuur</code>) en naar SOR <code>Open bouwwerk</code> (typen <code>Open loods</code> of <code>Overkapping</code>). Andere typen BGT <code>OverigBouwwerk</code> zijn ook weer terug te vinden in SOR <code>Installatie</code>.
</p><p>Het volledige overzicht van de verhouding tussen deze objecttypen en eigenschappen in de bronregistraties en de SOR is beschreven in de <a href="https://github.com/Geonovum/disgeo-demo-3a/blob/main/transponering/mapping-deel-Gebouw-en-VBO.xlsx">mapping van Gebouw en Verblijfsobject</a> (excel). </p></section><section id="eerste-verkenning-van-de-vertaalspecificatie"><h3 id="x11-3-eerste-verkenning-van-de-vertaalspecificatie"><span class="secno">11.3 </span>Eerste verkenning van de vertaalspecificatie</h3><p>De hieronder volgende tekst en tabellen zijn eerdere versies van de vertaalspecificaties. Ze zijn opgenomen omdat de bij de verkenning opgetekende overwegingen relevant kunnen zijn. Kijk voor de meest recente inzichten in de <a href="https://github.com/Geonovum/disgeo-demo-3a/blob/main/transponering/mapping-deel-Gebouw-en-VBO.xlsx">mapping van Gebouw en Verblijfsobject</a> (excel).
</p><p>In een eerdere fase, voordat de scope voor deze High5 was vastgesteld, is een eerste analyse uitgevoerd van de vertaling van objecten uit BGT, BRT, BAG en WOZ naar SOR. Hierbij is vooral gekeken naar de SOR objecttypen  <code>Gebouw</code> en <code>Gebouwzone</code>. Hoewel het hier niet om een complete vertaalspecificatie gaat, wordt de vertaling naar deze objecttypes wel in hoofdlijnen beschreven voor elk eigenschap opgenomen in de SOR. Hierbij is ook rekening gehouden met gegevens die mogelijk afkomstig zijn uit andere registraties (zoals de BRT of WOZ). De analyse wordt hieronder gepresenteerd, in de vorm van tabellen.
</p><p>Een van de hoofdconclusies was dat de relatie tussen de typering van gebouwen in de SOR en de gebruiksdoelen, functies en typen van gebouwen in de BAG, WOZ en de BRT complex blijkt te zijn. Dat betekent ook dat het mogelijk nog heel lastig wordt om de geharmoniseerde SOR gebouwen, met name wat betreft de WOZ data, te vormen op basis van de huidige basisregistraties. In ieder geval is voor het maken van de juiste vertaalspecificaties veel inhoudelijke kennis van het WOZ informatiemodel en de WOZ data nodig.</p><section id="vertaling-naar-sor-gebouw"><h4 id="x11-3-1-vertaling-naar-sor-gebouw"><span class="secno">11.3.1 </span>Vertaling naar SOR-Gebouw</h4><table>
<thead>
<tr>
<th>Gegeven in SOR</th>
<th>Herkomst</th>
<th>Transponering</th>
</tr>
</thead>
<tbody><tr>
<td>Identificatie</td>
<td>BAG en BGT</td>
<td><a href="https://bag.basisregistraties.overheid.nl/begripdetail?subject=http://bag.basisregistraties.overheid.nl/id/begrip/Identificatiecode_Pand">BAG pand identificatie</a> én <a href="http://definities.geostandaarden.nl/imgeo/id/begrip/Identificatie">BGT Pand identificatie</a> overnemen, of <a href="http://definities.geostandaarden.nl/imgeo/id/begrip/Identificatie">BGT OverigBouwwerk identificatie</a> wanneer SOR-Gebouw getypeerd wordt als <code>vestingsgebouw</code>, <code>bijgebouw</code> of <code>schuur</code>.</td>
</tr>
<tr>
<td>Geometrie</td>
<td>BAG en BGT</td>
<td>In het geval dat het SOR gebouw niet een <code>vestingsgebouw</code> (<code>Bunker</code>) of <code>bijgebouw</code> (<code>Schuur</code>) is, zullen er in principe twee geometrieën aanwezig zijn: omtrekgeometrie van de BAG en grondvlakgeometrie van de BGT. Beide nemen we over bij het gebouw. Wanneer het wel om één van de eerder genoemde typeringen gaat, zal er alleen een BGT geometrie aanwezig zijn en nemen we die over.</td>
</tr>
<tr>
<td>Type</td>
<td>Nieuw / BRT / WOZ</td>
<td>Dit is een nieuw attribuut. De 'hoofdtyperingen' die hier worden geïntroduceerd zijn niet aanwezig in de huidige modellen, met uitzondering van <code>Toren</code> (BRT) <code>Schuur</code> en <code>Bunker</code> (BGT). Alle nadere typeringen in de waardelijst lijken zowel uit de <a href="https://brt.basisregistraties.overheid.nl/begripdetail?subject=http://brt.basisregistraties.overheid.nl/id/begrip/TypeGebouw">BRT</a> als uit de WOZ te kunnen komen. De exacte herkomst is dus onduidelijk. Vaak is het 1:1 overgenomen (waarbij het om soortgelijke begrippen kan gaan, maar ook nadere typeringen - zie ook de lijst met voorbeelden van vertalingsregels), soms zijn de termen/begrippen anders beschreven - om deze reden is het belangrijk na te gaan in hoeverre deze termen en begrippen daadwerkelijk overeenkomen in betekenis (en in de data). Hiervoor is nadere analyse nodig en gedetailleerde kennis van de inhoud.</td>
</tr>
<tr>
<td>Aard</td>
<td>Nieuw / WOZ</td>
<td>Het attribuut zelf is nieuw ten opzichte van de registraties, de waardes niet. Voor <code>Repeterend</code> heeft de WOZ een attribuut <code>aanduiding repeterend</code>. De transponering voor de waardes <code>Heterogeen</code> en <code>Vrijstaand</code> is minder expliciet. <code>Vrijstaand</code> komt vaak terug in de typeringen van SOR <code>Verblijfsobjecten</code> (de waardes in deze lijst, waar <code>vrijstaand</code> in voorkomt, zijn afkomstig van de waardelijst  <code>Type</code> voor WOZ-objecten). Het is dus mogelijk een gegeven dat moet worden afgeleid. De herkomst van <code>Heterogeen</code> is onduidelijk.</td>
</tr>
<tr>
<td>Oorspronkelijk bouwjaar</td>
<td>BAG</td>
<td>Direct uit de BAG te halen, bij <a href="https://bag.basisregistraties.overheid.nl/begripdetail?subject=http://bag.basisregistraties.overheid.nl/id/begrip/Bouwjaar"><code>bouwjaar</code></a>. Let wel op dat WOZ <code>Deelobjecten</code> (vaak SOR <code>Gebouwzones</code>) ook een <code>bouwjaar</code> bevatten. In principe zou het oudste bouwjaar binnen <code>Deelobjecten</code> overeen moeten komen met het BAG <code>bouwjaar</code>. Wanneer dit niet het geval is, kan er sprake zijn van incorrecte data.</td>
</tr>
<tr>
<td>Naam</td>
<td>BRT</td>
<td>De naam van een SOR <code>Gebouw</code> is alleen aanwezig wanneer deze in de BRT bestaat. Aangezien de mapping tussen BRT en BAG/BGT - voor gebouwen - niet vanzelfsprekend is, eist de mapping van deze eigenschap meer aandacht.</td>
</tr>
<tr>
<td>Status</td>
<td>BAG en BGT</td>
<td>De SOR definitie voor <code>Bestaand</code> omvat de huidige twee BAG-statussen <code>Pand in gebruik</code> en 'Pand in gebruik (niet ingemeten)'. En de definitie voor <code>Afgevoerd</code> omvat de huidige twee BAG-statussen <code>Niet gerealiseerd pand</code> en <code>Pand ten onrechte opgevoerd</code>. Alle andere statussen kunnen direct vanuit de BAG worden gemapt, met uitzondering van <code>In sloop</code> - dit is een nieuw begrip, waarbij nieuwe gegevens ingewonnen zullen moeten worden op een later stadium.</td>
</tr>
<tr>
<td>Relatie (vanuit bouwlaag): Bouwlaag ligt in Gebouw</td>
<td>?</td>
<td>Nog niet aan toegekomen.</td>
</tr>
<tr>
<td>Relatie (vanuit gebouwcomponent): Gebouwcomponent hoort bij Gebouw</td>
<td>-</td>
<td>De relatie is in de brondata niet aanwezig, maar is met behulp van de geometrieën uit de BGT af te leiden (de gebouwcomponent zit immers aan het gebouw vast).</td>
</tr>
<tr>
<td>Relatie (vanuit toegangsdeur): Toegangsdeur hoort bij Gebouw</td>
<td>?</td>
<td>Nog niet aan toegekomen.</td>
</tr>
<tr>
<td>Relatie (vanuit installatie): Installatie hoort bij Gebouw</td>
<td>?</td>
<td>Nog niet aan toegekomen.</td>
</tr>
</tbody></table></section><section id="vertaling-naar-sor-gebouwzone"><h4 id="x11-3-2-vertaling-naar-sor-gebouwzone"><span class="secno">11.3.2 </span>Vertaling naar SOR-Gebouwzone</h4><p>Het SOR objecttype <code>Gebouwzone</code> is gebaseerd op het WOZ <code>Deelobject</code>. Op basis van de huidige WOZ kun je vermoedelijk wel voor een groot deel de SOR gebouwzones afleiden. Het WOZ deelobject kan in eenvoudige situaties een heel woonhuis zijn, maar er kunnen ook meerdere deelobjecten voor één huis zijn: bijvoorbeeld de woning zelf, een garage en een serre. De indeling in deelobjecten wordt gemaakt op basis van wat voor de waardebepaling van het object van belang is (bijvoorbeeld op basis van mate van isolatie), en niet puur op gegevens zoals het bouwjaar. De bronhouders doen veel marktanalyse en gebruiken hierbij bijvoorbeeld informatie uit verkoopplatforms zoals Funda. Daarnaast wordt de WOZ gevoed met informatie uit de BAG over wijzigingen aan objecten zoals verbouwingen.</p><p>Om een idee te krijgen van de data kunnen we kijken in het <a href="https://www.wozwaardeloket.nl/">WOZ waardeloket</a>. Hierin staan alleen de WOZ waarden per WOZ object, maar de contouren van WOZ deelobjecten zijn waar er een directe relatie met de BAG in de data zit, wel gevisualiseerd.</p><p>De onderstaande tabel beschrijft voor de gegevens die bij SOR <code>Gebouwzone</code> zijn gespecificeerd, of en hoe deze uit de brondata gehaald kan worden.
</p><table>
<thead>
<tr>
<th>Gegeven in SOR</th>
<th>Herkomst</th>
<th>Transponering</th>
</tr>
</thead>
<tbody><tr>
<td>Identificatie</td>
<td>WOZ</td>
<td>WOZ <code>Deelobject</code> heeft een eigenschap <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_attribute_WDO_WOZDeelobject_nummerWOZDeelObject"><code>nummerWOZDeelObject</code></a> die we kunnen overnemen. Dit nummer is uniek in combinatie met het bijbehorende <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_attribute_WOZ_WOZObject_wozObjectnummer">WOZ <code>objectnummer</code></a>.</td>
</tr>
<tr>
<td>Geometrie</td>
<td>BAG/BGT</td>
<td>WOZ deelobjecten hebben in de WOZ geen geometrie (in theorie wel - zie <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_attribute_WDO_WOZDeelobject_geometrie"><code>geometrie</code></a>, maar deze wordt niet ingewonnen). Wel zijn ze gekoppeld aan de BAG voor zover er een corresponderend BAG object is. Bijvoorbeeld de geometrie van een woonhuis en van een schuur kun je uit de BAG halen via het gekoppelde verblijfsobject of pand. Maar de geometrie van een tuin of bijvoorbeeld een zwembad, carport,  paardenrijbak of agrarische grond niet. De geometrieën van dat soort objecten zitten (deels) in de BGT. Via BAG pand en BGT pand zou je misschien het bij een pand horende erf (tuin) en andere objecten (bordes, carport, luifel, ...) kunnen vinden op basis van geometrische nabijheid en/of in combinatie met het kadastraal perceel.</td>
</tr>
<tr>
<td>Geometrie afbakening</td>
<td>?</td>
<td>Dit gegeven herkennen we niet. Het lijkt meer een gegeven te zijn voor de bijhouder van de WOZ, de bronhouder, maar niet een gegeven dat voor afnemers relevant is. Het zit niet in de huidige registratie. In een situatie waarin 1 deelobject correspondeert met 1 pand, zou je de BAG of BGT kunnen gebruiken. Vergelijk dan de BAG en BGT geometrie met elkaar: als de polygonen hetzelfde of bijna hetzelfde zijn is het betrouwbaar om uit één van beide het oppervlak te berekenen, anders moet je opletten want dan heeft het gebouw een niet rechttoe-rechtaan vorm.</td>
</tr>
<tr>
<td>Bouwlaagnummer</td>
<td>WOZ</td>
<td>1 op 1 over te nemen uit WOZ deelobject <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_attribute_WDO_WOZDeelobject_bouwlaag"><code>bouwlaag</code></a>. NB In de SOR een verplicht gegeven, maar in de WOZ alleen gevuld als de bouwlaag relevant is voor de waardebepaling.</td>
</tr>
<tr>
<td>Bouwjaar</td>
<td>WOZ</td>
<td>Opgenomen bij deelobject als ofwel <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_attribute_WDO_BouwjaarOfBouwjaarKlasse_bouwjaar"><code>bouwjaar</code></a> (type <code>gYear</code>), ofwel <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_attribute_WDO_BouwjaarOfBouwjaarKlasse_bouwjaarKlasse"><code>bouwjaarklasse</code></a> (vrij tekstveld). Toelichting: het WOZ deelobject <code>bouwjaar</code> kan hetzelfde zijn als het oorspronkelijk bouwjaar in de BAG, maar in de WOZ is de informatie over bouwjaar gedetailleerder: als er meerdere deelobjecten zijn, bijvoorbeeld een apart deelobject voor later aanbouwde delen van een pand, is voor elk van deze deelobjecten het daadwerkelijke bouwjaar opgenomen. Het oudste bouwjaar binnen een set deelobjecten zou overeen moeten komen met BAG oorspronkelijk bouwjaar, zo niet dan duidt dat op incorrecte data.</td>
</tr>
<tr>
<td>Type</td>
<td>WOZ</td>
<td>Dit is in WOZ de gebruikscode (ook wel 'deelobjectcode') - waarschijnlijk het <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_attribute_WDO_WOZDeelobject_typeWOZDeelobject">typeWOZDeelObject</a>. Hiervoor is een mapping nodig. Zie transponeringstabel.</td>
</tr>
<tr>
<td>Aard</td>
<td>WOZ</td>
<td>Kan waarschijnlijk 1 op 1 worden overgenomen, maar dit gegeven zien wij eigenlijk als iets dan vooral belang heeft voor de bronhouder, niet voor de afnemer.</td>
</tr>
<tr>
<td>Gebruiksoppervlakte</td>
<td>WOZ</td>
<td>WOZ deelobject <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_attribute_WDO_WOZDeelobject_oppervlakte"><code>oppervlakte</code></a> in combinatie met <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_attribute_WDO_WOZDeelobject_codeBrutoNettoOppervlakte"><code>codeBrutoNettoOppervlakte</code></a>. Dit geeft aan dat de oppervlakte op verschillende manieren bepaald kan zijn. Als de oppervlakte de gebruiksoppervlakte is, kan die 1 op 1 worden overgenomen. Anders is wellicht een berekening mogelijk. Verder: bij deelobjecten zijnde een woning werd altijd de inhoud in plaats van het oppervlakte bijgehouden. Bij niet woningen was dit wel het oppervlakte. Momenteel zijn de bronhouders de inhoudsgegevens naar oppervlakte aan het omzetten. Aandachtspunt voor ons: Als we met WOZ data gaan experimenteren, moeten we een gemeente selecteren die de transitie van inhoud naar oppervlakte al hebben gemaakt voor woningen. En deze gemeente moet het oppervlak dan wel per deelobject hebben geregistreerd (er zijn ook gemeenten die het gehele oppervlakte bij het WOZ object opnemen).</td>
</tr>
<tr>
<td>Status</td>
<td>WOZ</td>
<td>Mapping: WOZ deelobject <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_attribute_WDO_WOZDeelobject_statusWOZDeelObject"><code>statusWOZDeelObject</code></a>. Dit is/was in de WOZ als percentages uitgedrukt; zie <a href="https://www.waarderingskamer.nl/woz-voor-woningen/woningen-in-aanbouw/#c570">Voortgangspercentages bouw</a>. Het IMWOZ specificeert het gegeven <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_attribute_WDO_WOZDeelobject_statusWOZDeelObject"><code>statusWOZDeelObject</code></a> met een waardelijst en op niveau WOZ-object de <a href="https://www.waarderingskamer.nl/hulpmiddelen-gemeenten/objectcodering/">aanduiding in aanbouw</a>. Beide zijn te transponeren, zie tabel hieronder.</td>
</tr>
<tr>
<td>Hoort bij vbo</td>
<td>WOZ</td>
<td>Mapping: WOZ deelobject <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_association_WDO_WOZDeelobject_bestaatUit"><code>bestaatUit</code></a> of <a href="https://imvertor-tst.armatiek.nl/modellen/IMWOZ/IMWOZ.html#detail_association_WDO_WOZDeelobject_bestaatUitPand"><code>bestaatUitPand</code></a>. Als het WOZ deelobject correspondeert met BAG objecten (verblijfsobject, standplaats, ligplaats of pand), dan is deze relatie in de brondata opgenomen. Niet alle gebouwzones corresponderen met een BAG object (denk aan tuin, zwembad, ...). Zo niet dan is het een type object dat niet in de BAG zit maar wellicht wel in de BGT. Zie verder de transponering bij het gegeven geometrie.</td>
</tr>
<tr>
<td>Ligt op bouwlaag</td>
<td>WOZ</td>
<td>Dit zit in de WOZ als eigenschap van WOZ deelobject, maar het is een apart object in de SOR met 2.5D geometrie, dus een vlak met voor elk coördinatenpaar een z waarde. Je kunt de geometrie bij gebouwen met eenvoudige vormen (als de BAG en BGT geometrie ongeveer hetzelfde zijn) van de BAG overnemen en dan aan de hand van bouwlaagnummer, bouwjaar en woningtype een hoogte erbij genereren. In het oppervlakte verdiepingsdocument voor gemeenten staat een tabel die kan worden toegepast om het volume van woningen, afhankelijk van hun type en bouwjaar, om te rekenen naar oppervlakte, waarbij per bouwjaarklasse een verdiepinghoogte wordt gehanteerd (zie hieronder). Dit zou je kunnen hanteren als z waarde voor bouwlagen van woningen.</td>
</tr>
</tbody></table><figure id="fig-tabel-met-omrekenfactor-woningvolume-naar-oppervlakte-bron"><img src="media/bouwlaag-verdiepingshoogtetabel.png" alt="bouwlaag verdiepingshoogtetabel">
<figcaption>Figuur <span class="figno">22</span> <span class="fig-title">Tabel met omrekenfactor woningvolume naar oppervlakte (<a href="https://docplayer.nl/23780541-Oppervlakte-verdiepingsdocument-voor-gemeenten.html">bron</a>)</span></figcaption>
</figure><p><strong>Transponering van waardelijst <code>status</code></strong></p><p>De status (levenscyclus fase) van WOZ deelobjecten wordt bijgehouden als percentage, waarbij <code>0%</code> betekent dat de bouw van een object in voorbereiding is, en <code>100%</code> dat het een bestaand object is waarvan de bouw gereed is. De WOZ is niet geïnteresseerd in de voorfase (ontwerp, planning), alleen in gerealiseerde objecten; maar wel vanaf start bouw. Als de fundering van een gebouw ligt mag al <code>20%</code> van de uiteindelijke waarde aangeslagen worden.
</p><p>In het IMWOZ wordt echter ook een gegeven <code>aanduiding in aanbouw</code> gespecificeerd. Hoe zich dit precies verhoudt tot de status moet nog worden uitgezocht. </p><p>In de SOR kent de <code>Gebouwzone</code> een levenscyclus met statussen zoals gedefiniëerd voor alle functionele ruimten.
</p><p>De globale transponeringstabel: </p><table>
<thead>
<tr>
<th>SOR status functionele ruimte</th>
<th>transponering percentage</th>
<th>transponering waardelijst</th>
</tr>
</thead>
<tbody><tr>
<td>Ontwerp</td>
<td>niet in WOZ</td>
<td>niet in WOZ?</td>
</tr>
<tr>
<td>In voorbereiding</td>
<td>WOZ deelobject met statuspercentage kleiner dan <code>100%</code>, eventueel in combinatie met <code>aanduiding in aanbouw</code></td>
<td>1 (gevormd, niet actief)</td>
</tr>
<tr>
<td>Bestaand</td>
<td>WOZ deelobject met statuspercentage = <code>100%</code></td>
<td>0 (actief)</td>
</tr>
<tr>
<td>Onbruikbaar</td>
<td>WOZ deelobject met staat van onderhoud = <code>vervallen</code> (dit zou erin moeten zitten, maar is mogelijk wel lastig af te leiden)</td>
<td>8 (beëindigd)</td>
</tr>
<tr>
<td>Opgeheven</td>
<td>?</td>
<td>8 (beëindigd)</td>
</tr>
<tr>
<td>Afgevoerd</td>
<td>niet in WOZ (deze objecten komen naar verwachting nooit vanuit de BAG in de WOZ)</td>
<td>9 (ten onrechte opgevoerd)</td>
</tr>
</tbody></table></section></section></section><section data-format="markdown" id="specificatie-van-de-vertaling-van-historie"><!--OddPage--><h2 id="x12-specificatie-van-de-vertaling-van-historie"><span class="secno">12. </span>Specificatie van de vertaling van historie</h2><p>BAG, BGT en IM Gebouw volgen alle NEN3610:2011 of 2021 en NEN3610 komt overeen met de SOR.
</p><p>We onderscheiden de tijdslijn Geldigheid, de tijdslijn Registratie bij de bronhouder en de tijdslijn Registratie bij de LV. Dit houden we bij per versie van een object.
</p><p>Deze gegevens willen we voor BGT gegevens afleiden uit de BGT en voor de BAG uit de BAG. Onderstaand is de mapping beschreven. </p><ul>
<li>Tijdreizen met de <code>geldigOp</code> parameter werkt altijd op de tijdslijn Geldigheid
</li>
<li>Tijdreizen met de <code>beschikbaarOp</code> parameter werkt altijd op de tijdslijn Registratie van de desbetreffende voorziening van waaruit geleverd wordt (tijdstip van commit in die database).
</li>
</ul><p>In deze High-5 hebben we te maken met de LVBGT en de LVBAG. Dus <code>beschikbaarOp</code> mapped op de registratie tijd <em>in de LV</em>. Eigenlijk het tijdstip van beschikbaarstellen maar dat is in dit geval hetzelfde. De gebruiker stelt een vraag: geldigOp Tg en beschikbaarOp Tb en de API vertaalt dit request onder water naar het tijdstip registratie in de LV. Bij het opleveren van de data in de response worden de velden van de LV-en gemapped naar de velden van IM Gebouw.
</p><section id="historie-in-im-gebouw"><h3 id="x12-1-historie-in-im-gebouw"><span class="secno">12.1 </span>Historie in IM Gebouw</h3><p>IM Gebouw - registratie gegevens: in de definitie van <code>tijdstipRegistratie</code> en <code>eindRegistratie</code> van de versie van een object staat: “Tijdstip waarop deze versie van het informatieobject beschikbaar was via deze dienst.” - dit komt in dit geval overeen met tijdstip registratie in de LV.
</p><p>Vanwege de vertaal specificatie van de BAG en BGT samen moet in IM Gebouw de <code>beginGeldigheid</code> en <code>eindGeldigheid</code> een date time zijn of een datatype keuze. </p><p>Vanwege de vertaalspecificatie van de BAG en BGT samen moet in IM Gebouw de <code>tijdstipRegistratie</code> en <code>eindRegistratie</code> een date time zijn.
</p><p>Bij beide tijdslijnen is nog een leerpunt hoe we ermee omgaan dat de BAG werkt met date, BGT met date time. </p></section><section id="historie-in-bag"><h3 id="x12-2-historie-in-bag"><span class="secno">12.2 </span>Historie in BAG</h3><table>
<thead>
<tr>
<th>IMBAG LV</th>
<th>Toelichting</th>
<th>IM Gebouw</th>
</tr>
</thead>
<tbody><tr>
<td>begin geldigheid</td>
<td>begin geldigheid in de BAG (datum)</td>
<td>begin geldigheid</td>
</tr>
<tr>
<td>eind geldigheid</td>
<td>eind geldigheid in de BAG (datum)</td>
<td>begin geldigheid</td>
</tr>
<tr>
<td>tijdstip registratie</td>
<td>tijdstip registratie in de BAG (datum tijd)</td>
<td>Niet</td>
</tr>
<tr>
<td>eind registratie</td>
<td>eind registratie in de BAG (datum tijd)</td>
<td>Niet</td>
</tr>
<tr>
<td>tijdstip registratie LV</td>
<td>tijdstip registratie in de LVBAG (datum tijd)</td>
<td>tijdstip registratie</td>
</tr>
<tr>
<td>eind registratie LV</td>
<td>eind registratie in de LVBAG (datum tijd)</td>
<td>eind registratie</td>
</tr>
</tbody></table><p>Beëindigde objecten: BAG heeft altijd een versie/voorkomen, ook als een object beëindigd is. Een voorkomen heeft dan een eindstatus, zie vertaal specificatie 'status'
(en <a href="https://imbag.github.io/praktijkhandleiding/artikelen/wat-is-het-verschil-tussen-actieve-voorkomens-actuele-voorkomens-en-huidige-voorkomens">https://imbag.github.io/praktijkhandleiding/artikelen/wat-is-het-verschil-tussen-actieve-voorkomens-actuele-voorkomens-en-huidige-voorkomens</a> )
</p><p>Versies van objecten met bijzondere tijdstippen erin:</p><p><code>indicatieNietBAG</code>: Dit is een LV veld om versies niet niet in de BAG voorkomen te verwijderen uit de LVBAG (logisch niet technisch). Dit veld zit (nog) niet in IM Gebouw.
</p><p>Negeer deze versie als <code>indicatieNietBAG</code> gevuld is en <code>beschikbaarOp</code> &gt;= <code>indicatieNietBAG</code>.</p><p>Map deze versie wel naar IM Gebouw als <code>indicatieNietBAG</code> leeg is, of als <code>beschikbaarOp</code> &lt; <code>indicatieNietBAG</code>.
</p><p>OF neem dit veld toch gewoon over naar IM Gebouw, door IM Gebouw uit te breiden in de API met dit veld. Dit lijkt eenvoudiger voor de High-5. </p><p><code>tijdstipInactief</code>: Dit is een BAG veld. Dit veld zit (nog) niet in IM Gebouw.
</p><p>Negeer deze versie als inactief gevuld is en <code>beschikbaarOp</code> &gt;= <code>inactief</code>.
</p><p>Map deze versie wel naar IM Gebouw als inactief leeg is, of als <code>beschikbaarOp</code> &lt; <code>inactief</code>.
</p><p>OF neem dit veld toch gewoon over naar IM Gebouw, door IM Gebouw uit te breiden in de API met dit veld. Dit lijkt eenvoudiger voor de High-5.
</p><p><code>tijdstipInactiefLV</code>: Dit is een LVBAG veld. Dit veld zit (nog) niet in IM Gebouw. </p><p>Negeer deze versie als <code>inactiefLV</code> gevuld is en <code>beschikbaarOp</code> &gt;= <code>inactiefLV</code>.
</p><p>Map deze versie wel naar IM Gebouw als <code>inactiefLV</code> leeg is, of als <code>beschikbaarOp</code> &lt; <code>inactiefLV</code>.
</p><p>OF neem dit veld toch gewoon over naar IM Gebouw, door IM Gebouw uit te breiden in de API met dit veld. Dit lijkt eenvoudiger voor de High-5.
</p></section><section id="historie-in-bgt"><h3 id="x12-3-historie-in-bgt"><span class="secno">12.3 </span>Historie in BGT</h3><p>BGT wint gegevens in op een bepaalde datum en op dat moment worden het object, in een verschijningsvorm, geconstateerd. De BGT registreert deze gegevens vervolgens.
</p><p>De BGT kent de volgende gegevens: </p><table>
<thead>
<tr>
<th>IMBGT LV</th>
<th>Toelichting</th>
<th>IM Gebouw</th>
</tr>
</thead>
<tbody><tr>
<td>tijdstip registratie</td>
<td>tijdstip registratie in de BGT</td>
<td>beginGeldigheid</td>
</tr>
<tr>
<td>eind registratie</td>
<td>eind registratie in de BGT</td>
<td>eindGeldigheid</td>
</tr>
<tr>
<td>publicatiedatum LV</td>
<td>tijdstip registratie in de LVBGT</td>
<td>tijdstip registratie</td>
</tr>
<tr>
<td>publicatiedatum LV</td>
<td>zie vertaal specificatie iets verderop</td>
<td>eind registratie</td>
</tr>
</tbody></table><p>Beëindigde objecten: zie vertaalspecificatie iets verderop.
</p><p>Versies van objecten met bijzondere tijdstippen erin: niet aanwezig.
</p><p><strong>Tijdslijn geldigheid</strong></p><p>Gewenst gegeven: <code>beginGeldigheid</code> van een voorkomen van object.
</p><ul>
<li>Zie: <code>IMGeo-Object</code>
<code>tijdstipRegistratie</code> (8.1.4)</li>
<li>Bv. voorkomen 1, <code>IMGeo-Object</code>
<code>tijdstipRegistratie</code> bij bronhouder is <code>2-1-2021</code> (ingewonnen op 1-1, maar geregistreerd op 2-1)</li>
<li>Dit wordt in IM Gebouw, voorkomen 1, <code>beginGeldigheid</code> is <code>2-1-2021</code></li>
</ul><p>Gewenst gegeven: <code>eindGeldigheid</code> van een voorkomen van object </p><ul>
<li>Zie: <code>IMGeo-Object</code>
<code>eindRegistratie</code> (8.1.5)</li>
<li>Bv. voorkomen 1, <code>IMGeo-Object</code>
<code>eindRegistratie</code> (8.1.5) bij bronhouder is <code>2-3-2021</code></li>
<li>Dit wordt in IM Gebouw, voorkomen 1, <code>eindGeldigheid</code> is <code>2-3-2021</code></li>
</ul><p><strong>Tijdslijn registratie bij LV (t.b.v. tijdreizen)</strong></p><p>Gewenst gegeven: <code>tijdstipRegistratie</code> in LVBGT van een voorkomen van object
</p><ul>
<li>Zie: <code>IMGeo-Object</code>
<code>LV-Publicatiedatum</code> (8.1.6)</li>
<li>Bv. voorkomen 1, LVBGT, <code>Publicatiedatum</code>
<code>3-1-2021</code></li>
<li>Dit wordt in IM Gebouw, voorkomen 1, <code>tijdstipRegistratieLV</code> is <code>3-1-2021</code></li>
</ul><p>Gewenst gegeven: <code>eindRegistratie</code> in LVBGT van een voorkomen van object </p><ul>
<li>Zie: <code>IMGeo-Object</code>
<code>LV-Publicatiedatum</code> (8.1.6) van het opvolgende voorkomen.
</li>
<li>Bv. voorkomen <strong>2</strong>, <code>Publicatiedatum</code>
<code>3-3-2021</code></li>
<li>Dit wordt in IM Gebouw, voorkomen <strong>1</strong>, <code>eindRegistratieLV</code> is <code>3-3-2021</code></li>
</ul><p><strong>Vertaal specificatie eindRegistratie</strong>
</p><p>Elke versie van een object heeft in IM Gebouw een eind registratie (eind registratie in de LV).
</p><p>Er is echter geen PublicatieDatumEind in de LVBGT, dus deze eindRegistratie kan je niet 1 op 1 mappen, maar moet je afleiden van het <em>opvolgende</em> objectversie en daarvan de <code>LV-Publicatiedatum</code>.
</p><p>Als er een opvolgende versie bestaat: neem hiervan publicatiedatum LV en gebruik deze als <code>eindRegistratie</code>. </p><p>Als er geen opvolgende versie bestaat: dan is er toch wel een <code>eindRegistratie</code>. Zie vertaal specificatie van beeindigde objecten, die een nieuw opvolgende objectversie creëert (met een eindstatus). Het <code>tijdstipRegistratie</code> van dat <em>opvolgende</em> voorkomen is dat de <code>eindRegistratie</code> van <em>deze</em> versie.
</p><p>Je kan kiezen: leid dit af tijdens bevraging, of registreer dit bij het inladen. We willen leren wat handiger is.  </p><p><strong>Vertaal specificatie beëindigde objecten</strong>
</p><p>Als een object beëindigd is in de BGT dan is er na dit moment geen versie van het object meer. De BGT gebruikt hier geen nieuwe versie met een eindstatus, en dit is wel de bedoeling in IM Gebouw. In IM Gebouw is er dus wel een versie van het object, met een eindstatus. Deze extra versie met een eindstatus kan je niet mappen, maar moet je afleiden.
</p><p>ALS een versie uit de BGT een gevulde <code>objectEindtijd</code> (8.1.2) heeft dan is deze versie de <em>laatste versie</em> uit de (LV)BGT. </p><p>Maak een nieuwe versie van het object, met:</p><ul>
<li>Alle gegevens hetzelfde als het laatste versie uit de (LV)BGT, die een gevulde <code>objectEindRegistratie</code> heeft.
</li>
<li>Geef deze als <code>beginGeldigheid</code>: de <code>eindGeldigheid</code> van het laatste versie uit de (LV)BGT (die een <code>objectEindtijd</code> heeft).
</li>
<li>Geef deze als <code>eindGeldigheid</code>: leeg</li>
<li>Geef deze als <code>beginRegistratie</code> (BH): de <code>eindRegistratie</code> van het laatste versie uit de (LV)BGT (die een <code>objectEindtijd</code> heeft)
</li>
<li>Geef deze als <code>eindRegistratie</code> (BH): leeg </li>
<li>Geef deze als <code>beginRegistratie</code> (LV): publicatiedatum van het voorliggende voorkomen.
</li>
<li>Geef deze als <code>eindRegistratie</code> (LV): leeg </li>
<li>Pas de vertaalspecificatie voor IM Gebouw 'status' toe
</li>
</ul><p>Je kan kiezen: leid dit af tijdens bevraging, of registreer dit bij het inladen. We willen leren wat handiger is.  </p><p><strong>Tijdslijn registratie bij de bronhouder</strong></p><p>Zit niet in de registratie gegevens van IM Gebouw, wanneer we IM Gebouw samenstellen vanuit de LVBGT.
</p><p>Mogelijk komen deze gegevens wel in de API response om de controleren of de herleidbaarheid van de gegevens klopt.
</p><p>Gewenst gegeven: <code>tijdstipRegistratie</code> Bronhouder van de versie van een object</p><ul>
<li>Zie: <code>IMGeo-Object</code>
<code>tijdstipRegistratie</code> (8.1.4)</li>
<li>Bv. voorkomen 1, <code>IMGeo-Object</code>
<code>tijdstipRegistratie</code>
<code>2-1-2021</code> (ingewonnen op 1-1, maar geregistreerd op 2-1).</li>
<li>Dit wordt in IM Gebouw, voorkomen 1: zit nu niet in IM Gebouw.
</li>
<li>Kan eventueel als bonus gegeven worden opgenomen in de API, dan: ‘tijdstip registratie authentieke bron’ is <code>2-1-2021</code></li>
</ul><p>Gewenst gegeven: <code>eindRegistratie</code> Bronhouder van een versie van een object</p><ul>
<li>Zie: <code>IMGeo-Object</code>
<code>eindRegistratie</code> (8.1.5)</li>
<li>Bv. voorkomen 1, <code>IMGeo-Object</code>
<code>eindRegistratie</code>
<code>2-3-2021</code></li>
<li>Dit wordt in IM Gebouw, voorkomen 1: zit nu niet in IM Gebouw.
</li>
<li>Kan eventueel als bonus gegeven worden opgenomen in de API, dan: ‘eind registratie authentieke bron’ is <code>2-3-2021</code>
</li>
</ul><p>Als we deze gegevens wel opnemen in de API response, zet deze dan niet erbij in IM Gebouw zelf maar plaats deze erbuiten. Noem deze dan a.u.b. zoals de LVBGT ze levert, dit is <code>BGT.tijdstipRegistratie</code> en <code>BGT.eindRegistratie</code> en merk op dat de naam weliswaar overeenkomt met <code>IM Gebouw.tijdstipRegistatie</code> en <code>IM Gebouw.eindRegistatie</code>, maar de definitie en de data niet. IM Gebouw gebruikt immers de registratie tijdstippen in de LVBGT (publicatiedatum) als data voor <code>IM Gebouw.tijdstipRegistratie</code> en <code>IM Gebouw.eindRegistratie</code>.</p></section></section><section data-format="markdown" id="lessons-learned-informatiemodellering"><!--OddPage--><h2 id="x13-lessons-learned-informatiemodellering"><span class="secno">13. </span>Lessons Learned informatiemodellering</h2><section id="inzichten-samenvatting"><h3 id="x13-1-inzichten-samenvatting"><span class="secno">13.1 </span>Inzichten: samenvatting</h3><p>Deze High-5 heeft een  aantal inzichten opgeleverd over informatiemodellering die hier worden samengevat:</p><ol>
<li>Om de geo-basisregistraties in samenhang te kunnen gebruiken, moeten we gegevens uit de huidige basisregistraties combineren. Dit lijkt vaak eenvoudiger dan het is. Zelfs wanneer dezelfde terminologie wordt gebruikt bij het specificeren van modelelementen, zijn er vaak nog <strong>subtiele verschillen in de definities</strong> hiervan. Begrippen zijn soms anders afgebakend – dit geldt dus ook voor data die hierop gebaseerd is. Om deze reden kunnen informatieobjecten/gegevens afkomstig van verschillende registraties niet zomaar over elkaar gelegd worden, ook al worden ze beschreven door dezelfde termen.
</li>
<li>Hoewel het samenvoegen van de registratiemodellen niet direct tot een samenhangend geheel zal leiden, kan hiernaartoe gewerkt worden middels een aantal modelleerprincipes. Deze principes vertalen zich in <strong>modelleerpatronen</strong> voor object centraal modelleren. Verschillende patronen kunnen worden toegepast om vanuit andere registraties naar de SOR te koppelen – hiermee wordt het een stuk gemakkelijker om objecten aan elkaar te relateren. </li>
<li>We hebben <strong>vertaalspecificaties</strong> nodig op conceptueel niveau, zodat deze in verschillende technische talen kunnen worden uitgedrukt. Dit draagt bij aan de ontkoppeling tussen de duiding van gegevens en de ontsluiting van gegevens. Vertaling van de huidige bronnen naar de SOR zal op onderdelen lastig zijn.
</li>
<li>We moeten niet naar de SOR kijken als een volledig model, maar als <strong>een groeimodel</strong>. Hierbij is het belangrijk om korte en lange termijn doelen te stellen. Op de korte termijn is het streven naar een SOR MVP (minimal viable product) realistischer. Vanuit een inhoudelijk perspectief wordt in de SOR MVP vooral gekeken naar de samenhang van gegevens waarbij redelijk simpele vertalingsregels aan bod komen – dus geen complexere afleidingsregels. Ook is het belangrijk rekening te houden met huidige technologie. Door een SOR MVP in de praktijk te toetsen kunnen inzichten worden opgedaan die de standaardisatie van het volledige SOR model ten goede komen.
</li>
<li>Bij het opstellen van de vertalingsspecificaties voor historie en tijdslijn is onderkend dat <strong>bepaalde attributen buiten scope</strong> zijn voor de modellering van SOR informatieobjecten in de huidige fase. Hier kunnen verschillende redenen voor zijn, dit zal moeten worden gedocumenteerd en teruggekoppeld aan de relevante partijen. Als voorbeeld: het attribuut <em>versie</em> kan momenteel niet gemakkelijk dynamisch worden berekend. Daarnaast is het belangrijker om te weten wanneer gegevens geldig zijn, dan om welke versie het gaat. Daarom wordt dit attribuut voorlopig niet opgenomen. </li>
<li>Met betrekking tot het <strong>koppelen van objecten uit andere informatiebronnen met objecten uit de SOR</strong> is er nog geen aanbeveling. Er wordt nog nagedacht over welke koppelmethode de voorkeur heeft van dit high-5 team.
</li>
</ol><section id="sor-model-en-modelleerpatronen"><h4 id="x13-1-1-sor-model-en-modelleerpatronen"><span class="secno">13.1.1 </span>SOR model en modelleerpatronen</h4><p>Om beter te begrijpen hoe we naar een samenhangende registratie kunnen toewerken moeten we de huidige informatiemodellen erbij halen. Bij het samenvoegen van objecttypes uit de modellen wordt snel duidelijk dat er veel soorten gegevens door elkaar lopen. Een belangrijke principe in de context van deze high5 was dan ook: neem alleen directe eigenschappen op bij een bepaald objecttype. Om ervoor te zorgen dat deze principes op een stelselmatige manier worden toegepast zijn modelleerpatronen nodig. In de NEN3610 wordt een belangrijk patroon voor registratiegegevens gespecificeerd die deels invulling geeft aan dit principe. In deze high5 is daarnaast aandacht besteed aan drie andere patronen: voor brongegevens, voor de afleiding van informatieobjecten, en voor historie/tijdlijn. Voor het modelleren van brongegevens en de afleiding van informatieobjecten is PROV-O uitermate geschikt, deze kan worden toegepast in de SOR door het NEN3610 patroon voor registratiegegevens als aanknopingspunt aan te houden.
</p><p>Uiteindelijk moet het mogelijk zijn om vanuit andere registraties naar de SOR toe te koppelen. Dit kan worden gerealiseerd door verschillende objecttypes aan elkaar te relateren, of door een bestaand SOR objecttype uit te breiden. Voor het relateren van objecttypes zijn er een aantal opties geïnventariseerd: je kunt objecttypes combineren in één SOR object, apart beheerde linksets genereren, of gebruik maken van een koppelklasse. Voor de laatste optie zijn extra documentatie of algoritmes nodig om te kunnen afleiden dat er een relatie bestaat tussen de objecten.  </p></section><section id="van-bron-naar-sor"><h4 id="x13-1-2-van-bron-naar-sor"><span class="secno">13.1.2 </span>Van bron naar SOR</h4><p>Om brongegevens te vertalen naar het model van de SOR is het van belang om naast modelleerpatronen ook vertaalspecificaties op te stellen. Deze specificaties bevatten voor de SOR zowel vertalingsregels als afleidingsregels. Vertalingsregels geven aan hoe gegevens uit de bronregistratie zich laten vertalen in gegevens conform de SOR; dit kunnen zowel simpele als complexere mappings zijn. Daarnaast zijn ook afleidingsregels nodig, wanneer gegevens niet expliciet aanwezig zijn in de bronregistratie maar wel kunnen worden afgeleid. Deze specificaties dienen op conceptueel niveau te worden vastgelegd, zodat ze onafhankelijk zijn van een specifieke technische omgeving. De regels moeten begrijpelijk zijn voor degenen die ze implementeren, maar ook voor domeinexperts die inzicht hebben in de achterliggende betekenis van de data.
</p><p>Er zijn meerdere opties mogelijk voor de vastlegging van deze regels. Om een idee te krijgen over de soorten regels die aan de orde zijn voor de SOR is gekeken naar de transponering van Gebouw objecten uit de registraties. Samenhang met de WOZ blijkt lastiger. Dit heeft vooral te maken met verschillen in de typeringen van SOR gebouwen en WOZ objecten, waarbij ook veel inhoudelijke kennis nodig is. Er is ook een wens om geometrie af te leiden uit andere gegevens – of en hoe dergelijke afleidingsregels haalbaar zijn moet nog worden onderzocht. </p></section><section id="sor-model-in-de-praktijk"><h4 id="x13-1-3-sor-model-in-de-praktijk"><span class="secno">13.1.3 </span>SOR model in de praktijk</h4><p>De SOR zou je vanuit de praktijk eerder als een groeimodel kunnen zien – een gradiënt oplossing die steeds verder wordt ontwikkeld en toegepast. Hierbij horen korte termijn en lange termijn doelen. Op de korte termijn zal de focus komen te liggen op de realisatie van een SOR MVP (minimal viable product) - een tussenoplossing totdat de SOR, stap voor stap, volledig kan worden ingevoerd. Vanuit een inhoudelijk perspectief zou in de SOR MVP de nadruk kunnen liggen op de samenhang van gegevens waarbij redelijk simpele relaties en vertalingsregels aan bod komen. In een later stadium kunnen complexere onderdelen, waarvan de meerwaarde duidelijk is, toegevoegd worden (waarbij bijvoorbeeld extra inwinning of kennis nodig is).
</p><p>De opbouw van het SOR model heeft als voordeel dat er een ontkoppeling ontstaat tussen de duiding van gegevens en de ontsluiting van gegevens. Het resultaat is een implementatie-onafhankelijk model waarmee verschillende ontsluitingsvormen kunnen worden ondersteund. Dit is belangrijk omdat het ontwikkelaars in staat stelt verschillende technieken te combineren, zonder dat er verwarring ontstaat over de duiding van de gegevens. </p><p>In het IGO traject (Integrale Gebruiksoplossing) werden verschillende basisregistraties gemakkelijk toegankelijk gemaakt door gegevens uit de registraties samen te voegen. Echter is het bij de samenvoeging van geometrieën en objectgegevens niet altijd duidelijk wat de relatie tussen deze gegevens is. Hiervoor is de SOR nodig: om de juiste duiding van een object te kunnen ontsluiten.
</p></section><section id="modelleerpatroon-historie-en-tijdlijn"><h4 id="x13-1-4-modelleerpatroon-historie-en-tijdlijn"><span class="secno">13.1.4 </span>Modelleerpatroon: historie en tijdlijn</h4><p>Bij het integreren van historie- en tijdlijngegevens uit de huidige basisregistraties zijn een aantal uitdagingen geïdentificeerd. Ten eerste is gekeken naar de definities van tijdslijnen in de registraties, en of deze ook daadwerkelijk overeenkomen. Niet alle registraties kennen momenteel beide tijdslijnen die in de SOR worden behandeld. Om dit wel mogelijk te maken zijn vertalingsregels uitgewerkt.
</p><p>Ook is in het kader van de historie rekening gehouden met de identificatie van objecten, aangezien er in sommige gevallen sprake is van meerdere identificaties. Voor de huidige fase van de SOR lijkt het vooralsnog voldoende om de identificaties van de onderliggende registraties over te nemen – voor de gebruiker levert dit geen problemen op. Een belangrijke punt was het in elkaar schuiven van objecten uit verschillende basisregistraties.
</p><p>Voor tijdsreisvragen zijn twee insteken onderzocht: je kunt een tijdreis vraag aan elke basisregistratie stellen en het antwoord vervolgens samenvoegen, of het op basis van de geldige levenscycli doen. Beide insteken zijn realiseerbaar, waarbij de eerste optie eenvoudiger te implementeren is. </p></section></section><section id="aanbevelingen"><h3 id="x13-2-aanbevelingen"><span class="secno">13.2 </span>Aanbevelingen</h3><section id="algemene-aanbevelingen"><h4 id="x13-2-1-algemene-aanbevelingen"><span class="secno">13.2.1 </span>Algemene aanbevelingen</h4><section id="aanbeveling-met-betrekking-tot-gebouwen"><h5 id="x13-2-1-1-aanbeveling-met-betrekking-tot-gebouwen"><span class="secno">13.2.1.1 </span>Aanbeveling met betrekking tot gebouwen</h5><p>Om te komen tot een geharmoniseerd / geconsolideerd Gebouw in de SOR, op basis van de huidige objecten in de basisregistraties, is nader onderzoek nodig. Alle BAG/BGT panden kunnen worden omgezet naar SOR Gebouw; dit geldt ook voor enkele typen BGT OverigBouwwerk. Maar de juiste WOZ data erbij vinden is lastiger. De relatie tussen de typering van gebouwen in de SOR en de gebruiksdoelen, functies, en typen van gebouwen in de BAG, WOZ en de BRT blijkt bovendien complex te zijn.</p><p>Aanbeveling: Begin met BAG + BGT harmonisatie. Voor het harmoniseren van WOZ gebouwdata in de SOR moet, indien dat binnen scope is, iemand met veel WOZ kennis bij de volgende high 5 aanwezig zijn om de vertaal- en afleidregels scherper te maken.
</p></section><section id="aanbevelingen-met-betrekking-tot-koppelen"><h5 id="x13-2-1-2-aanbevelingen-met-betrekking-tot-koppelen"><span class="secno">13.2.1.2 </span>Aanbevelingen met betrekking tot koppelen</h5><p>Er wordt nog nagedacht over welke optie of opties uit <a href="#aanbeveling" class="sec-ref"><span class="secno">§&nbsp;7.3</span> <span class="sec-title">Aanbeveling</span></a>, waarin een aantal koppelmethoden beschreven worden, de voorkeur heeft van dit high-5 team.
</p><p>Voor afnemers is het van belang dat gegevens en modellering er hetzelfde uitziet, zodat afnemers het geheel ook ervaren als een samenhangend stelsel. Dit wordt voor de SOR gestandaardiseerd, maar voor andere bronnen nog niet.
</p><p>Om standaardisatie t.b.v. afnemers goed voor elkaar te krijgen zouden we kunnen denken aan aansluitvoorwaarden. Bij aansluitvoorwaarden kan je er bijvoorbeeld aan denken dat de SOR en andere bronnen aan dezelfde standaarden voldoen wat betreft:</p><ul>
<li>Modellering;</li>
<li>Identificatie;</li>
<li>Historie (ontsluiten) en tijdreizen;</li>
<li>Andere standaarden die nodig zijn om te komen tot een samenhangend stelsel van gegevens uit basisregistraties en niet-basisregistraties.</li>
</ul><p>Het is nog wel de vraag of dergelijke aansluitvoorwaarden afgesproken kunnen worden. </p></section></section><section id="aanbevelingen-voor-het-vervolg-van-de-high-5"><h4 id="x13-2-2-aanbevelingen-voor-het-vervolg-van-de-high-5"><span class="secno">13.2.2 </span>Aanbevelingen voor het vervolg van de High-5</h4><section id="aanbevelingen-met-betrekking-tot-historie"><h5 id="x13-2-2-1-aanbevelingen-met-betrekking-tot-historie"><span class="secno">13.2.2.1 </span>Aanbevelingen met betrekking tot historie</h5><ol>
<li><p>Inhoud geeft aan dat een geldige levenscyclus samenstellen inderdaad een vraag is die we moeten kunnen beantwoorden. Zie hoofdstuk Historie - insteek B (onderin).
</p>
</li>
<li><p>De implementatie maakt gebruik van een vertaalspecificatie om historie uit verschillende bronnen in elkaar te schuiven. </p>
</li>
</ol><ul>
<li>Gebruik insteek A voor tijdreis vragen op een SOR Gebouw conform de NL API strategie.</li>
<li>Gebruik insteek B om de voor geldige levenscyclus van een SOR Gebouw te kunnen leveren. Gebruik niet insteek B om vervolgens de tijdreisvraag te beantwoorden, want deze laaste insteek is een stuk minder efficiënt. Het is nuttig om te testen of beide routes dezelfde antwoorden geven, om te bewijzen dat de implemenaties kloppen.</li>
</ul><p>ACTIE: vertaalspecficatie van A en B laten reviewen door team van 2e high-5. </p><ol start="3">
<li>Elke geo-basisregistratie levert een API voor tijdreizen (t.b.v. insteek A) en een API om een geldige levenscyclus mee op te vragen (t.b.v. insteek B).
</li>
</ol><p>ACTIE --&gt; uitzetten bij Landelijke Voorziening of basisregistratie.</p></section></section></section></section><section data-format="markdown" id="benodigdheden-ten-behoeve-van-api-s"><!--OddPage--><h2 id="x14-benodigdheden-ten-behoeve-van-api-s"><span class="secno">14. </span>Benodigdheden ten behoeve van API's</h2><p>Dit hoofdstuk beschrijft een opsomming van de benodigdheden om API's te maken voor afnemers/gebruikers, met name voor developers.
</p><p>We onderscheiden voor de High-5's de volgende externe API's: </p><ul>
<li>API volgens de NL API strategie</li>
<li>API volgens de OGC API Feature part 1</li>
<li>API volgens Linked Data</li>
<li>Verder kent de iGO omgeving een user-interface om analyse vragen te kunnen stellen op de data.
</li>
</ul><section id="overzicht-input-voor-externe-api-s"><h3 id="x14-1-overzicht-input-voor-externe-api-s"><span class="secno">14.1 </span>Overzicht input voor externe API's</h3><p>De input die hiervoor gebruikt kan worden:
</p><ol>
<li>Informatiemodel in ReSpec (html), te vinden in <a href="#imsor-gebouw-0" class="sec-ref"><span class="secno">§&nbsp;8.</span> <span class="sec-title">IMSOR Gebouw</span></a>.
</li>
<li><a href="https://github.com/Geonovum/disgeo-demo-3a/blob/main/implementatie/imsor-gebouw-high5-20211130.xml">Informatiemodel in een mim-export formaat</a> (in wording, nog niet officieel), in XML.</li>
<li><a href="https://github.com/Geonovum/disgeo-demo-3a/blob/main/implementatie/imsor-gebouw-high5-20211130.ttl">Informatiemodel in een RDF formaat</a> (RDFS/OWL/SHACL)</li>
<li><a href="https://github.com/Geonovum/disgeo-demo-3a/blob/main/implementatie/IMSOR-gebouw-20211130-openapi.yaml">YAML/JSON schema van het informatiemodel</a>
</li>
</ol></section><section id="interne-api-s"><h3 id="x14-2-interne-api-s"><span class="secno">14.2 </span>Interne API's</h3><p>Verder is er een integratiecomponent voorzien die de data uit de BAG en de BGT samenvoegt volgens vertaalregels. 
Deze integratiecomponent kan vervolgens gebruikt worden om de genoemde 4 externe API's te voeden.
</p><p>We willen vooral leren hoe dit werkt, of dit werkt, wat dit betekent voor API specificaties en wat de benodigde input hiervoor is.</p><p>Deze component heeft nodig:
</p><ul>
<li>Een van bovenstaande 4 items (vermoedelijk 2)</li>
<li>Vertaalregels, deze bestaan uit: <ul>
<li>Directe eigenschappen, te vinden in <a href="#gebouwen-van-bron-naar-sor" class="sec-ref"><span class="secno">§&nbsp;11.</span> <span class="sec-title">Gebouwen van bron naar SOR</span></a></li>
<li>Historie BAG en BGT, te vinden in <a href="#specificatie-van-de-vertaling-van-historie" class="sec-ref"><span class="secno">§&nbsp;12.</span> <span class="sec-title">Specificatie van de vertaling van historie</span></a>
</li>
<li>Metadata </li>
</ul>
</li>
</ul><p>Hiervan wordt een GraphQL schema gemaakt t.b.v. een (interne) API.</p></section><section id="gebruik-van-de-interne-api-door-de-externe-api-s"><h3 id="x14-3-gebruik-van-de-interne-api-door-de-externe-api-s"><span class="secno">14.3 </span>Gebruik van de interne API door de externe API's</h3><p>De interne GraphQL API kan gebruikt worden voor de hierboven genoemde API's 1, 2, 3 en 4.
</p><p>Vraag: hoe precies de GraphQL gebruikt kan worden t.b.v. API 1 t/m 4 is een onderdeel van de 'implementatie' High-5.
</p><p>Vraag: voor de LD API, gebruiken we dan de interne GraphQL API of gebruiken we daarvoor de database die onder iGO ligt (voor de High-5).</p></section></section><section data-format="markdown" id="implementatiefase"><!--OddPage--><h2 id="x15-implementatiefase"><span class="secno">15. </span>Implementatiefase</h2><p>Dit hoofdstuk bevat de beschrijving van de opzet, resultaten en inzichten van de laatste experimenteersessie uit deze High-5 reeks, de implementatiedagen van januari 2022.
</p><p>Het gaat bij deze implementatie om een <strong>verkenning</strong> om te ervaren hoeveel (of hoe weinig) er van de SOR gerealiseerd kan worden vanuit de huidige registraties. Het is geen ontwikkeling maar onderzoek.</p><section id="onderzoeksvragen"><h3 id="x15-1-onderzoeksvragen"><span class="secno">15.1 </span>Onderzoeksvragen</h3><p>In deze fase implementeren we het gemaakte SOR Gebouw MVP model en de transponeringsregels. We willen de volgende vragen beantwoorden:
</p><ul>
<li>Is het SOR Gebouw model MVP te implementeren; waar loop je tegenaan?</li>
<li>Zijn de transponeringsregels te implementeren; waar loop je tegenaan?</li>
</ul></section><section id="opzet"><h3 id="x15-2-opzet"><span class="secno">15.2 </span>Opzet</h3><figure id="2022-architectuur"><img src="media/2022-architectuur.png" alt="Architectuur van de implementatie">
<figcaption>Figuur <span class="figno">23</span> <span class="fig-title">Architectuur van de implementatie</span></figcaption>
</figure><p>De onderste laag van deze architectuur, ontsluiting bij de bron, is in de voorbereiding al gerealiseerd door het Kadaster. In deze High-5 realiseren we de bovenste laag, Services, met daarin afnamevoorzieningen voor verschillende doelgroepen:
</p><ul>
<li>Een Lookup API SOR Gebouw, conform het informatiemodel uit <a href="#imsor-gebouw-0" class="sec-ref"><span class="secno">§&nbsp;8.</span> <span class="sec-title">IMSOR Gebouw</span></a>. Deze API ondersteunt het gehele informatiemodel en regelt de orchestratie van BAG en BGT naar SOR. De REST API, URI Dereferencing service, en OGC Features API worden hier bovenop gebouwd. Het SPARQL Endpoint maakt voor deze High-5 gebruik van de URI Dereferencing service voor het vullen van de onderliggende aspect-database. De Lookup API is geen voorziening voor eindgebruikers.</li>
<li>Een REST API voor de grote groep gebruikers die gegevens nodig heeft voor administratieve processen. De REST API ondersteunt vragen over gebouwen en geeft JSON terug. Deze API ondersteunt collecties met paginering, en heeft een endpoint voor individuele bevraging. Heeft ook CRS negotiation; de default is ETRS 89. Levert HAL JSON, compliant met NL API strategie. Geen JSON-LD (die zit wel in de URI dereferencing service). We maken gebruik van REST tooling om te laten zien dat het werkt.
</li>
<li>Een URI Dereferencing service die op basis van de URI identifier van een object de gegevens teruggeeft als RDF in gebruikelijke formaten zoals Turtle, JSON-LD en meer.</li>
<li>Een <a href="https://ogcapi.ogc.org/features/">OGC API Features</a> (part 1) API die ruimtelijke vragen ondersteunt en GeoJSON en HTML ondersteunt. Deze API is voornamelijk bedoeld voor de gebruikers die de data willen gebruiken in GIS software. We realiseren een client GIS viewer om te laten zien dat het werkt.</li>
<li>Een Linked Data API (SPARQL endpoint) bovenop een knowledge graph plus een data story om te laten zien dat het werkt. Deze voorziening is voor data scientists / business analisten en dergelijken.</li>
</ul><p>Als proefgebied is voor Swifterbant (gemeente Dronten) gekozen. </p></section><section id="scope-beperking"><h3 id="x15-3-scope-beperking"><span class="secno">15.3 </span>Scope beperking</h3><p>We zijn in de implementatiefase begonnen met een hele bescheiden scope met daarin alleen het objecttype <code>Gebouw</code>. Op dag 2 hebben we <code>Open Bouwwerk</code> hieraan toegevoegd en op dag 3 <code>Gebouwcomponent</code>.
</p><p>Aan <code>Verblijfsobject</code> en <code>Installatie</code> zijn we niet toe gekomen. </p></section><section id="resultaten"><h3 id="x15-4-resultaten"><span class="secno">15.4 </span>Resultaten</h3><p>De implementatie-onderdelen zijn gerealiseerd in een ontwikkelomgeving van het Kadaster en helaas niet publiek beschikbaar.
</p><section id="orchestratielaag-en-lookup-api-sor"><h4 id="x15-4-1-orchestratielaag-en-lookup-api-sor"><span class="secno">15.4.1 </span>Orchestratielaag en Lookup API SOR</h4><p>De orchestratielaag is het intelligente hart van de architectuur: wat we aan het begin van deze High-5 serie de 'semantische laag' noemden. De orchestratielaag regelt de aggregatie van één of meerdere onderliggende services. Deze services kunnen fysiek bij verschillende organisaties worden gehost zodat een federatief systeem mogelijk is. Als gebruiker van de Lookup API hoef je geen kennis te hebben van de onderliggende systemen, in dit geval de BAG en de BGT.
</p><p>De Lookup API is onderdeel van deze orchestratielaag en zorgt voor ontkoppeling tussen onderliggende systemen en de uiteindelijke raadpleegvoorzieningen. Het resultaat van een zoekvraag door een gebruiker wordt door deze Lookup API samengevoegd uit antwoorden van de onderliggende systemen en met behulp van de transponeringsregels gemapped naar het IMSOR model. </p><p>Deze architectuur met transponering en orchestratie in het hart resulteert in een “virtuele” basisregistratie. Alles gebeurt on the fly, er is geen tussentijdse opslag.
</p><p>De Lookup API heeft een [<cite><a class="bibref" href="#bib-graphql">GraphQL</a></cite>] interface. Dit is een goed passende API stijl voor orchestratie, omdat het anders dan een gewone REST API, die een soort veelgestelde vragen voorziening is, een hoge mate van flexibiliteit biedt voor afnemers. Je kan zelf je vragen samenstellen en bepalen welke gegevens je in het resultaat wilt hebben. Ook is het mogelijk om delen van zoekvragen parallel te verwerken.
</p><figure id="graphql-screenshot"><img src="media/2022-graphql-screenshot.png" alt="GraphQL screenshot">
<figcaption>Figuur <span class="figno">24</span> <span class="fig-title">GraphQL query en resultaat</span></figcaption>
</figure></section><section id="transponeringsregels"><h4 id="x15-4-2-transponeringsregels"><span class="secno">15.4.2 </span>Transponeringsregels</h4><p>De transponeringsregels die zijn opgesteld door inhoudelijke experts in de eerste en tweede High-5 sessie, zijn in de implementatiefase omgezet naar machineleesbare regels. Ze beschrijven de vertaling van brondatamodellen naar het doelmodel: het model van het samenhangende SOR gebouw. Deze transponeringsregels moet je zien als een soort configuratie. De Lookup API is intelligent genoeg om deze regels te lezen, interpreteren en uitvoeren. De semantiek is zo gescheiden van de orchestratieprogrammatuur.
</p><p>De transponering is voor <code>Gebouw</code>, <code>Open Bouwwerk</code>, en <code>Gebouw component</code> gerealiseerd. Voor de meeste attributen van deze objecttypen is een regel opgesteld die beschrijft waarmee het moet worden gevuld uit de bronregistraties. Een aantal attributen is om verschillende redenen niet getransponeerd. Het overzicht staat hieronder. </p><p>Het attribuut <code>status</code> dat in alle objecten voorkomt was een uitdaging om te transponeren. De SOR heeft een <a href="https://docs.geostandaarden.nl/disgeo/emso/#levensfasen">nieuwe onderverdeling van levenscycli</a>. Met behulp van het SOR begrippenkader hebben we de SOR levenscyclus slim op de BAG en BGT <code>status</code> kunnen mappen.
</p><p>De transponeringsregels zijn in deze fase als onderdeel van de LookUP API gerealiseerd ... </p><figure id="2022-transponeringsarch1"><img src="media/2022-transponeringsarch1.png" alt="Transponeringsregelsarch1">
<figcaption>Figuur <span class="figno">25</span> <span class="fig-title">Transponeringsregels als onderdeel van de Lookup API</span></figcaption>
</figure><p>... maar moeten uiteindelijk een apart onderdeel worden in de orchestratielaag. </p><figure id="2022-transponeringsarch2"><img src="media/2022-transponeringsarch2.png" alt="Transponeringsregelsarch2">
<figcaption>Figuur <span class="figno">26</span> <span class="fig-title">Transponeringsregels gepositioneerd in de orchestratielaag</span></figcaption>
</figure><p>Een algemene vraag die tijdens deze High-5 nog niet uitgebreid aan de orde is geweest, is <em>hoe kunnen we verifiëren of de vertaalregels correct zijn geïmplementeerd?</em> Daarnaast zijn er altijd gedetailleerde transponeringsvraagstukken waar een oplossing voor gevonden moet worden. Een voorbeeld is <em>Wat als de bronhouder code van een BGT (pand) object niet hetzelfde is als die van het corresponderende BAG object?</em> Dit is een kwaliteitsissue dat bij de transponering mogelijk aan het licht zou kunnen komen en waar een oplossingsrichting voor gekozen moet worden.
</p><section id="gebouw-transponering"><h5 id="x15-4-2-1-gebouw-transponering"><span class="secno">15.4.2.1 </span>Gebouw transponering</h5><p>Er zijn transponeringsregels geschreven waarmee alle BAG <code>Pand</code> objecten worden getransponeerd naar SOR <code>Gebouw</code>. Enkele attributen van BGT <code>Pand</code> worden erbij gezocht. BGT OVerigBouwwerk met <code>type</code> = <code>Schuur</code> of <code>Bunker</code> worden ook getransponeerd naar SOR Gebouw.</p><table>
<thead>
<tr>
<th>Attribuut</th>
<th>Realisatie</th>
<th>Toelichting</th>
</tr>
</thead>
<tbody><tr>
<td><code>domein</code></td>
<td><span id="check">✓</span></td>
<td>Standaard vulling</td>
</tr>
<tr>
<td><code>identificatie</code></td>
<td><span id="check">✓</span></td>
<td>Uit BAG indien mogelijk, anders uit BGT</td>
</tr>
<tr>
<td><code>type</code></td>
<td><span id="check">✓</span></td>
<td>Deels geïmplementeerd vanwege scope. Veel typen moeten uit BRT of WOZ komen. Bij alle BAG panden is <code>nil</code> ingevuld. Bij overig bouwwerken uit de BGT is het type, <code>Schuur</code> of <code>Bunker</code> daarvandaan overgenomen.</td>
</tr>
<tr>
<td><code>aard</code></td>
<td><span id="nocheck">✕</span></td>
<td>Buiten scope: BRT/WOZ</td>
</tr>
<tr>
<td><code>geometrie omtrek</code></td>
<td><span id="check">✓</span></td>
<td>Uit BAG</td>
</tr>
<tr>
<td><code>geometrie grondvlak</code></td>
<td><span id="check">✓</span></td>
<td>Uit BGT</td>
</tr>
<tr>
<td><code>naam</code></td>
<td><span id="nocheck">✕</span></td>
<td>Buiten scope: BRT</td>
</tr>
<tr>
<td><code>oorspronkelijkBouwjaar</code></td>
<td><span id="check">✓</span></td>
<td>Uit BAG</td>
</tr>
<tr>
<td><code>relatieveHoogteligging</code></td>
<td><span id="check">✓</span></td>
<td>Uit BGT. Niet in EMSO aangemerkt als inhoud SOR, maar voor deze beproeving wel interessant om mee te nemen. Zolang we geen 3D hebben...</td>
</tr>
<tr>
<td><code>status</code></td>
<td><span id="check">✓</span></td>
<td>Uit BAG/BGT</td>
</tr>
</tbody></table></section><section id="open-bouwwerk-transponering"><h5 id="x15-4-2-2-open-bouwwerk-transponering"><span class="secno">15.4.2.2 </span>Open Bouwwerk transponering</h5><p>Dit objecttype komt uit de BGT en wordt als het gaat om een <code>OverigBouwwwerk</code> met attribuut <code>type</code> = <code>Open loods</code> of <code>Overkapping</code> getransponeerd naar SOR <code>Gebouw</code>.
</p><table>
<thead>
<tr>
<th>Attribuut</th>
<th>Realisatie</th>
<th>Toelichting</th>
</tr>
</thead>
<tbody><tr>
<td><code>domein</code></td>
<td><span id="check">✓</span></td>
<td>Standaard vulling</td>
</tr>
<tr>
<td><code>identificatie</code></td>
<td><span id="check">✓</span></td>
<td>Uit BGT</td>
</tr>
<tr>
<td><code>type</code></td>
<td><span id="check">✓</span></td>
<td>Uit BGT</td>
</tr>
<tr>
<td><code>geometrie</code></td>
<td><span id="check">✓</span></td>
<td>Uit BGT</td>
</tr>
<tr>
<td><code>isOnderdeelVan</code></td>
<td><span id="nocheck">✕</span></td>
<td>geen mapping gespecificeerd. Dit gegeven zit niet in de brondata, er moet een afleidingsregel voor gemaakt worden.</td>
</tr>
<tr>
<td><code>relatieveHoogteligging</code></td>
<td><span id="check">✓</span></td>
<td>Uit BGT. Niet in EMSO aangemerkt als inhoud SOR, maar voor deze beproeving wel interessant om mee te nemen. Zolang we geen 3D hebben...</td>
</tr>
<tr>
<td><code>status</code></td>
<td><span id="check">✓</span></td>
<td>Uit BGT</td>
</tr>
</tbody></table></section><section id="gebouwcomponent-transponering"><h5 id="x15-4-2-3-gebouwcomponent-transponering"><span class="secno">15.4.2.3 </span>Gebouwcomponent transponering</h5><p>De volgende objecten worden getransponeerd naar SOR <code>Gebouwcomponent</code>:
</p><ul>
<li>Alle BGT <code>Gebouwinstallatie</code> objecten  met attribuut <code>type</code> = <code>Bordes</code>, <code>Luifel</code>, of <code>Toegangstrap</code>.
</li>
<li>Alle BGT <code>Kunstwerkdeel</code> objecten met attribuut <code>type</code> = <code>Perron</code> worden getransponeerd naar Gebouwcomponent.</li>
</ul><table>
<thead>
<tr>
<th>Attribuut</th>
<th>Realisatie</th>
<th>Toelichting</th>
</tr>
</thead>
<tbody><tr>
<td><code>domein</code></td>
<td><span id="check">✓</span></td>
<td>Standaard vulling</td>
</tr>
<tr>
<td><code>identificatie</code></td>
<td><span id="check">✓</span></td>
<td>Uit BGT</td>
</tr>
<tr>
<td><code>type</code></td>
<td><span id="check">✓</span></td>
<td>Uit BGT</td>
</tr>
<tr>
<td><code>geometrie</code></td>
<td><span id="check">✓</span></td>
<td>Uit BGT</td>
</tr>
<tr>
<td><code>isOnderdeelVan</code></td>
<td><span id="nocheck">✕</span></td>
<td>geen mapping gespecificeerd. Dit gegeven zit niet in de brondata, er moet een afleidingsregel voor gemaakt worden.</td>
</tr>
<tr>
<td><code>relatieveHoogteligging</code></td>
<td><span id="check">✓</span></td>
<td>Uit BGT. Niet in EMSO aangemerkt als inhoud SOR, maar voor deze beproeving wel interessant om mee te nemen. Zolang we geen 3D hebben...</td>
</tr>
<tr>
<td><code>status</code></td>
<td><span id="check">✓</span></td>
<td>Uit BGT</td>
</tr>
</tbody></table></section><section id="transponering-van-metadata-en-historie"><h5 id="x15-4-2-4-transponering-van-metadata-en-historie"><span class="secno">15.4.2.4 </span>Transponering van metadata en historie</h5><p>Er zijn alleen transponeringsregels geschreven en toegepast voor de BAG data. De BGT is maar in beperkte mate meegenomen, omdat tijdlijn geldigheid en versie-informatie in de BGT niet aanwezig is en er kwaliteitsissues werden gevonden met BGT tijdstipgegevens.
</p><table>
<thead>
<tr>
<th>Attribuut</th>
<th>Realisatie</th>
<th>Toelichting</th>
</tr>
</thead>
<tbody><tr>
<td><code>beginGeldigheid</code></td>
<td><span id="check">✓</span></td>
<td>Uit BAG indien mogelijk, anders leeg</td>
</tr>
<tr>
<td><code>eindGeldigheid</code></td>
<td><span id="check">✓</span></td>
<td>Uit BAG indien aanwezig, anders leeg</td>
</tr>
<tr>
<td><code>tijdstipRegistratie</code></td>
<td><span id="check">✓</span></td>
<td>Uit BAG indien mogelijk, anders BGT?</td>
</tr>
<tr>
<td><code>eindRegistratie</code></td>
<td><span id="check">✓</span></td>
<td>Uit BAG indien mogelijk, anders leeg</td>
</tr>
<tr>
<td><code>versie</code></td>
<td><span id="check">✓</span></td>
<td>Uit BAG indien mogelijk, anders leeg</td>
</tr>
<tr>
<td><code>beschrijft</code></td>
<td><span id="check">✓</span></td>
<td>Domein + identificatie van BAG of BGT object</td>
</tr>
<tr>
<td><code>bronhouder</code></td>
<td><span id="check">✓</span></td>
<td>Uit BAG indien mogelijk, anders uit BGT</td>
</tr>
<tr>
<td><code>brondocument</code></td>
<td><span id="check">✓</span></td>
<td>Uit BAG indien mogelijk, anders leeg</td>
</tr>
</tbody></table></section></section><section id="rest-api"><h4 id="x15-4-3-rest-api"><span class="secno">15.4.3 </span>REST API</h4><p>De gerealiseerde REST API is een API conform de Nederlandse API strategie [<cite><a class="bibref" href="#bib-adr">ADR</a></cite>]. Objectinformatie wordt door deze API geretourneerd in HAL + JSON formaat. De API is bedoeld voor het opvragen van een beperkte set objecten en ondersteunt:</p><ul>
<li>paginering</li>
<li>geometrie in meerdere coördinatenstelsels (RD, ETRS-89)</li>
<li>geo-zoeken conform de API strategie, maar meerdere filters kunnen mogelijk gemaakt worden</li>
</ul><p>De API is geconfigureerd met behulp van het <a href="https://github.com/dotwebstack/dotwebstack-framework">DotWebStack Framework</a>. Er wordt een “On the fly” mapping op de lookup API gedaan.
</p><p><a href="#2022-RESTAPIendpoints" class="fig-ref" title="De endpoints van de REST API">Figuur <span class="figno">27</span></a> toont de functionaliteit van de REST API in de vorm van Swagger documentatie. </p><figure id="2022-RESTAPIendpoints"><img src="media/2022-RESTAPIendpoints.png" alt="REST API endpoints">
<figcaption>Figuur <span class="figno">27</span> <span class="fig-title">De endpoints van de REST API</span></figcaption>
</figure></section><section id="uri-dereferencing-service"><h4 id="x15-4-4-uri-dereferencing-service"><span class="secno">15.4.4 </span>URI Dereferencing Service</h4><p>De URI Dereferencing service is een heel eenvoudige maar krachtige component, die op basis van de URI identifier van een object de gegevens teruggeeft als RDF. Dit is een van de kernonderdelen van linked data, ook verwoord in <a href="https://www.w3.org/TR/sdw-bp/#globally-unique-ids">Spatial Data on the Web Best Practice 1</a>: geef je objecten een URI identificatie en zorg dat je informatie over het object teruggeeft als die URI wordt opgevraagd. Dat is precies wat deze service doet: als je via de URI Dereferencing Service de identificerende URI van een object via HTTP opvraagt, krijg je gegevens van dat object terug, inclusief http(s) links naar andere objecten.
</p><p>Belangrijk punt is dat de HTTP URI een implementatie-onafhankelijke identificatie is. Via dezelfde URI kun je gegevens in meerdere formaten terug vragen door gebruik te maken van content negotiation. </p><p>Ook bij dit onderdeel geldt: De API is geconfigureerd met behulp van het <a href="https://github.com/dotwebstack/dotwebstack-framework">DotWebStack Framework</a>. Er wordt een “On the fly” mapping op de lookup API gedaan.
</p></section><section id="ogc-api-features"><h4 id="x15-4-5-ogc-api-features"><span class="secno">15.4.5 </span>OGC API Features</h4><p>De gerealiseerde OGC Features API maakt het mogelijk om de SOR te integreren met gangbare tooling binnen het GIS / Geo domein. De OGC API Features standaard [<cite><a class="bibref" href="#bib-ogcapi-features">ogcapi-features</a></cite>] is de opvolger van WFS maar dan gebaseerd op REST principes. Je kunt er geo-objecten mee opvragen middels een gestandaardiseerde interface, die door GIS tooling wordt ondersteund. In deze High-5 implementeerden we alleen deel 1.
</p><p>Er is custom programmeerwerk gedaan om de OGC API Features bovenop een andere API te laten functioneren. Er wordt net als bij de andere componenten een "on the fly" mapping gedaan.</p><p>Net als de REST API is de OGC API Features beschreven met Swagger documentatie:</p><figure id="2022-oaf-swagger"><img src="media/2022-oaf-swagger.png" alt="OAF Swagger">
<figcaption>Figuur <span class="figno">28</span> <span class="fig-title">Swagger documentatie van OGC API Features</span></figcaption>
</figure><p>Het lukte tijdens de High-5 om SOR data via de OGC API Features in te laden in open source GIS pakket <a href="https://qgis.org/en/site/">QGIS</a>.
</p><figure id="2022-oaf-qgis"><img src="media/2022-oaf-qgis.png" alt="OAF QGIS">
<figcaption>Figuur <span class="figno">29</span> <span class="fig-title">SOR data in QGis via de OGC API Features</span></figcaption>
</figure></section><section id="linked-data-api"><h4 id="x15-4-6-linked-data-api"><span class="secno">15.4.6 </span>Linked Data API</h4><p>De Linked Data API biedt toegang tot de SOR conform Linked Data standaarden. Tijdens de High-5 is de Linked Data API verbonden aan de URI Dereferencing Service om de data binnen te halen (dit gebeurt met de snelheid van je internetverbinding) en in de eigen Knowledge Graph op te slaan. Vervolgens kan er in de omgeving van het Kadaster Data Science team van alles mee worden gedaan zoals het integreren met andere datasets. Omdat de data zelfbeschrijvend is en dus in feite 'zegt' dat het geodata is, wordt automatisch een kaartvisualisatie aangeboden voor het bekijken van de data. Op de kaart kun je doorklikken naar een web pagina voor elk object.
</p><figure id="2022-kg"><img src="media/2022-kg.png" alt="KG">
<figcaption>Figuur <span class="figno">30</span> <span class="fig-title">Eén gebouw in de Knowledge graph van de Linked Data API</span></figcaption>
</figure><p>Tijdens de High-5 zijn een aantal dingen specifiek gerealiseerd met deze data:</p><ul>
<li>Gebouwen met verschil in bovenaanzichtgeometrie en maaiveldgeometrie vinden en in 3D visualiseren;</li>
<li>Een kaart met daarop gebouwen uit verschillende bouwjaren in verschillende kleuren gevisualiseerd;</li>
<li>Integratie met CBS wijk/buurt data en op basis daarvan tonen van nabijheid voorzieningen.</li>
</ul><figure id="2022-ld-gebouw"><img src="media/2022-ld-gebouw.png" alt="ld gebouw">
<figcaption>Figuur <span class="figno">31</span> <span class="fig-title">3D visualisatie van een gebouw met verschillende bovenaanzicht- en grondvlakgeometrieën</span></figcaption>
</figure></section></section></section><section data-format="markdown" id="lessons-learned-over-de-implementatie"><!--OddPage--><h2 id="x16-lessons-learned-over-de-implementatie"><span class="secno">16. </span>Lessons Learned over de implementatie</h2><p>Dit hoofdstuk beschrijft welke aspecten van implementatie goed gelukt zijn, wat wel lukte maar met moeite, en wat problemen opleverde en misschien zelfs niet gelukt is.
</p><p>De bevindingen zijn gegroepeerd op onderwerp.</p><section id="bevindingen-over-het-informatiemodel"><h3 id="x16-1-bevindingen-over-het-informatiemodel"><span class="secno">16.1 </span>Bevindingen over het informatiemodel</h3><section id="ontbrekende-gegevens-voor-bunkers-en-schuren"><h4 id="x16-1-1-ontbrekende-gegevens-voor-bunkers-en-schuren"><span class="secno">16.1.1 </span>Ontbrekende gegevens voor bunkers en schuren</h4><p>Voor bunkers en schuren uit de BGT, die geen corresponderend BAG pand hebben maar wel SOR Gebouw zijn, lopen we tegen het issue aan dat er geen bouwjaar bekend is en dat er geen BAG geometrie is. Deze gegevens moeten dus optioneel of voidable worden in het informatiemodel. In MIM termen betekent voidable: we gebruiken dan <code>mogelijk geen waarde = ja</code> in het informatiemodel.
</p><p>Als we de attributen <code>bouwjaar</code> en <code>geometrie</code> voidable maken, zijn ze wel verplicht, maar is het toegestaan om een nilwaarde op te nemen en een reden van het ontbreken van het gegeven op te nemen. </p><p>De andere optie is om deze attributen optioneel te maken: dan worden ze in hun geheel weg gelaten bij bunkers en schuren. Deze optie is gekozen tijdens de implementatie van de high 5.</p><p>Wat uiteindelijk de beste modellering is zal nog worden uitgewerkt.</p></section></section><section id="bevindingen-over-de-transponering"><h3 id="x16-2-bevindingen-over-de-transponering"><span class="secno">16.2 </span>Bevindingen over de transponering</h3><p>Hoewel er allerlei uitdagingen zijn, is gebleken dat de op transponering gebaseerde architectuur werkt. De data kan bij de bron blijven. We doen geen getransformeerde data opslag maar orchestratie on the fly, en het is toch mogelijk om data af te nemen als stroom uit het stopcontact op verschillende manieren. Het Linked Data endpoint doet wel synchrone opslag, omdat dit voor het exploreren nodig is.</p><section id="transponering-gebouw-en-gebouwgerelateerde-objecttypen"><h4 id="x16-2-1-transponering-gebouw-en-gebouwgerelateerde-objecttypen"><span class="secno">16.2.1 </span>Transponering Gebouw en gebouwgerelateerde objecttypen</h4><p>Over het algemeen bleek: als je eenmaal de transponering van een objecttype gedaan hebt, is de volgende niet zo moeilijk. Transponeren van objecttypen uit de BGT bleek relatief simpel. Deze objecttypen hebben onderling weinig relaties en verschillen niet zo heel veel van elkaar. De objecttypen uit de BAG hebben meer onderlinge relaties en verschillen.
</p><p>Een kanttekening hierbij is dat zodra andere gegevensbronnen (BRT, WOZ, enz) binnen beschouwing komen, dit nieuwe uitdagingen kan opleveren. </p><p>De SOR vereist een aantal administratieve relaties tussen objecttypen. Sommige van deze relaties zijn al aanwezig in de huidige bronregistraties, zoals de relatie tussen <code>Verblijfsobject</code> en <code>Gebouw</code>. Maar de SOR specificeert ook een aantal relaties die nu nog niet administratief worden bijgehouden. Een voorbeeld hiervan is de <code>hoortBij</code> relatie tussen <code>Gebouwcomponent</code> en <code>Gebouw</code>.
</p><p>Deze in de bron nog niet aanwezige relaties hebben we tijdens de High-5 buiten beschouwing gelaten. De vraag blijft daarom of het mogelijk is relaties die in de bron niet aanwezig zijn, on the fly in de transponeringslaag te gaan bepalen, bijvoorbeeld door ze geometrisch af te leiden. We weten niet of dit performance issues zou opleveren. In dat geval zou mogelijk een tussentijdse opslag van deze relaties nodig zijn (een linkset). En in het uiterste geval kan het ook nodig zijn dat relaties door de bronhouder moeten worden ingewonnen en beheerd, mogelijk met inzet van AI technologie.
</p><p>Op dit punt is vervolgonderzoek nodig. </p></section><section id="transponering-van-identificatie"><h4 id="x16-2-2-transponering-van-identificatie"><span class="secno">16.2.2 </span>Transponering van identificatie</h4><p>We hebben in de eerdere modelleerfase van deze High-5 al besloten om nu geen SOR identificatie te introduceren, maar hiervoor de identificatie uit de bestaande bronregistraties te gebruiken. Omdat er zowel BAG als BGT panden zijn, die samen in een Gebouw object moeten gevat worden, moest er gekozen worden welke identificatie leidend is. Dit is voor ons het BAG ID geworden.
</p><p>Er zijn ook SOR gebouwen die geen BAG id hebben, namelijk de BGT <code>OverigBouwwerk</code> objecten van het type <code>Bunker</code> en <code>Schuur</code>. Voor deze SOR gebouwen wordt het BGT id overgenomen. </p><p>Een probleem met de identificatie was dat het geen type details bevat. Met andere woorden: op het moment dat de Lookup API een verzoek binnenkrijgt de gegevens behorende bij een object identificatie te leveren, deze API niet weet in welke registratie dit object moet worden opgehaald en in welke objecttype-collectie daar moet worden gekeken. Nu hebben we een slimmigheid gebruikt: BGT_identificatie bevat een “.”, en dit feit gebruikte de Lookup API om te bepalen of de zoekvraag naar de BGT of de BAG API moest worden doorgespeeld. Dat is niet bestendig bij uitbreiding van bronnen van Gebouw (BRT) en andere SOR objecten.
</p><p>Ook op dit punt is vervolgonderzoek nodig. Is dit probleem bijvoorbeeld op te lossen met een index / linkset oftewel een soort 'wegwijzer' waar de SOR Lookup API kan vinden welke identifier waar gevonden kan worden? Of moeten we wellicht toch een nieuwe SOR identificatie hanteren waaraan dit te zien zou zijn? </p><p>Bij het toekennen van een nieuw SOR ID zouden we dan nog kunnen overwegen om dit een verlenging van een bestaand ID te maken zodat herleiding mogelijk is. De bestaande IDs blijven gebruiken is op zich het gemakkelijkst (hoewel wel wel voor elk SOR objecttype moeten bepalen welk ID we hiervoor kiezen, wat voor uit meerdere bronnen samengestelde objecttypen lastig kan zijn) en hergebruik van bestaande IDs is positief. Maar een nieuw SOR ID introduceren betekent wel nóg een identificatie voor afnemers.
</p></section><section id="transponering-van-historie"><h4 id="x16-2-3-transponering-van-historie"><span class="secno">16.2.3 </span>Transponering van historie</h4><p>De transponering van historie is deels gelukt. Met name het historiemodel van de BAG is met succes getransponeerd naar de SOR. Het feit dat in BAG 2.0 een versienummer voor objectgegevens is ingevoerd hielp hierbij.
</p><p>Het historiemodel van de BGT bleek lastiger. De BGT bevat een beperkt historiemodel met alleen registratietijdstippen, geen geldigheidstijdstippen; het verschilt van dat van de BAG, en houdt geen versienummer bij voor geregistreerde gegevens zoals de BAG dat doet. De ontwikkelaars hadden ook meer parate kennis van de BAG dan de BGT. Het opstellen van transponeringsregels van het BGT historiemodel naar de SOR zou waarschijnlijk zeker enkele dagen onderzoek vergen. Omwille van de tijd hebben we er tijdens de High-5 voor gekozen dit niet te doen.
</p><p>Omdat het BAG historiemodel wel was getransponeerd konden we bevestigen of tijdreizen mogelijk was en dit bleek het geval. De Lookup API kan tijdreisvragen beantwoorden op basis van de historie-informatie uit de BAG. In de High-5 gebruiken we dit alleen om het actueel geldige informatieobject op te vragen, maar een zoekvraag naar een historisch tijdstip zou even goed mogelijk zijn. </p><p>Bij het bekijken van extracten uit de BGT ontdekten we bij toeval een eigenaardigheid:  een object met meerdere instanties, waarvan de gegevens volledig hetzelfde waren, maar met twee verschillende LV-publicatie-tijdstippen. Dit soort datakwaliteitsissues kan bij de transponering van gegevens uiteraard voor problemen zorgen. Een uitgangspunt is dan ook dat de datakwaliteit in orde moet zijn.
</p><p>Er is meer tijd nodig om dit onderwerp, het transponeren van historie van niet alleen de BAG maar ook de BGT en andere basisregistraties die in de SOR een rol spelen, uit te zoeken. Hierbij is inhoudelijke kennis van het historiemodel in deze basisregistraties onontbeerlijk.</p></section><section id="transponering-van-metadata"><h4 id="x16-2-4-transponering-van-metadata"><span class="secno">16.2.4 </span>Transponering van metadata</h4><p>De transponering van overige metadata is grotendeels gelukt. We hebben metadata over de herkomst van objecten meegenomen in de transponering zoals van tevoren beschreven in <a href="#modelleerpatronen-voor-metadata" class="sec-ref"><span class="secno">§&nbsp;4.</span> <span class="sec-title">Modelleerpatronen voor metadata</span></a>. Hierdoor kun je aan de SOR data zien uit welke bronobjecten uit de BAG en/of BGT deze is opgebouwd. Bij deze bronobjecten kun je dan ook terugvinden wat het oorspronkelijke brondocument en de bronhouder is, als deze gegevens in de bronregistratie beschikbaar zijn.
</p><p>Zie <a href="#transponering-van-metadata-en-historie" class="sec-ref"><span class="secno">§&nbsp;15.4.2.4</span> <span class="sec-title">Transponering van metadata en historie</span></a> voor het overzicht van de transponeringsregels voor metadata. </p><div class="note" role="note" id="issue-container-generatedID-12"><div role="heading" class="note-title marker" id="h-note-12" aria-level="5"><span>Noot</span></div><aside class=""><p>Het SOR <code>Gebouw</code> zelf heeft geen brondocumenten en bronhouder. Dat kan ook niet zomaar, want er is in de huidige situatie formeel geen bronhouder voor SOR objecten. Het is ook niet zonder meer mogelijk om de bronhouder uit de BAG of BGT over te nemen, want bij objecten waarvan gegevens in meerdere basisregistraties beschikbaar zijn, is het mogelijk dat ze meerdere bronhouders hebben!</p>
</aside></div></section><section id="toevoegen-open-bouwwerk"><h4 id="x16-2-5-toevoegen-open-bouwwerk"><span class="secno">16.2.5 </span>Toevoegen Open Bouwwerk</h4><p>Omdat we voor de SOR gebouwen al moesten putten uit de BGT <code>OverigBouwwerk</code> objecten om daar de schuren en bunkers uit te halen, bleek het heel weinig werk te zijn om ook SOR <code>Open Bouwwerk</code> op te nemen. Deze objecten zijn namelijk gebaseerd op een ander BGT <code>OverigBouwwerk</code> type (<code>Open loods</code> en <code>Overkapping</code>).
</p><p><code>Open Bouwwerk</code> is toegevoegd aan de Lookup API SOR en daarna ook aan de REST API en de URI Dereferencing service. Dat was heel gemakkelijk om te doen. Als je eenmaal een query hebt voor een objecttype, is het eenvoudig om hier verder op voort te bouwen. Dit wijst op een zekere flexibiliteit in het systeem. Positief!</p><p>Een probleem met de transponering van <code>Open Bouwwerk</code> is dat in de BAG zogenaamde "open frontstallen" staan die als <code>Pand</code> getypeerd zijn (zie hiervoor de <a href="https://imbag.github.io/praktijkhandleiding/trefwoorden/permanente-opening#:~:text=Een%20uitzondering%20hierop%20die%20in,volledig%20door%20wanden%20omsloten%20beschouwd.">Praktijkhandreiking BAG</a>), maar die in de SOR <code>Open Bouwwerk</code> moeten worden. Deze gevallen konden we nu niet in de transponering meenemen omdat er geen mapping regel voor was. Het is niet duidelijk of dit in de data te herkennen is en of automatisch transponeren überhaupt mogelijk is.
</p></section><section id="mapping-specificatie"><h4 id="x16-2-6-mapping-specificatie"><span class="secno">16.2.6 </span>Mapping specificatie</h4><p>Het is beoogd een declaratieve, machineleesbare specificatie van de mapping te maken tussen BAG/BGT en SOR en deze uit te laten voeren door intelligente software. De hele intelligentie van de transponering kan zo buiten de logica van de APIs geplaatst worden. De Lookup API hoeft alleen de mapping uit te voeren en kan daardoor generiek blijven. De vertaalspecificaties moeten twee kanten op werken voor een functionerende API: om gegevens in de bron(nen) te kunnen vinden gegeven een zoekvraag; en om gegevens te kunnen leveren in de doelstructuur (SOR model).
</p><p>Tijdens deze high 5 is een stap gezet richting het declaratief maken van de mapping. Dit moet nog verder uitgewerkt worden.</p><div class="note" role="note" id="issue-container-generatedID-13"><div role="heading" class="note-title marker" id="h-note-13" aria-level="5"><span>Noot</span></div><aside class=""><p>In een <em>declaratieve</em> (programmeer)taal of specificatie beschrijf je alleen <em>wat</em> er moet gebeuren, en niet hoe (via welke stappen) dat doel bereikt moet worden. Het is daardoor abstracter en staat los van de implementatie.</p>
</aside></div><p>Deze declaratieve, machineleesbare mappingspecificatie sluit aan bij MIM en zit qua opzet dichtbij de taal die we gebruiken voor het informatiemodel. Technisch is het een soort YAML dialect dat machineleesbaar is en herkenbaar voor ontwikkelaars.</p><p>Het Linked Data team gaf tijdens de High-5 aan dat zij ook graag de transformatieregels willen kunnen lezen en uitvoeren. De transformatieregels moeten breder beschikbaar / toepasbaar zijn dan alleen op één plek in de Lookup API (en dus ook implementatie / techniek onafhankelijk). Ze zouden idealiter conceptueel moeten worden vastgelegd op één plek, door of met behulp van inhoudelijk experts, en moeten worden geïmplementeerd in meerdere formaten en zo op meerdere plekken inzetbaar zijn.</p><p>Een vervolgstap zou kunnen zijn om samen verder te werken aan een gestandaardiseerde multi-inzetbare transponeringstaal.</p><p>Sommige transponeringsregels zijn heel eenvoudig, bijvoorbeeld die voor het vullen van het <code>bouwjaar</code>. Andere zijn ingewikkelder doordat bepaalde algemeen voorkomende gegevens in de huidige basisregistraties niet eenduidig gemodelleerd zijn. Een voorbeeld is het gegeven <code>status</code>, i.e. levensfase van een object. In de BAG zitten andere statussen dan in de BGT. De in de SOR gedefinieerde statussen zijn weer anders.
</p></section><section id="gebruik-van-begrippenkader-in-transponering"><h4 id="x16-2-7-gebruik-van-begrippenkader-in-transponering"><span class="secno">16.2.7 </span>Gebruik van begrippenkader in transponering</h4><p>Het bleek mogelijk om bij de transponering van gegevens slim gebruik te maken van relaties tussen begrippen in het  <a href="https://begrippen.geostandaarden.nl/sor-high5/nl/">begrippenkader van de SOR</a> (de experimentele variant voor de High-5). Dit is toegepast bij de transponering van gegevens over levenscyclus (<code>status</code>).
</p><p>Het begrippenkader is uitgedrukt in SKOS [<cite><a class="bibref" href="#bib-skos-primer">skos-primer</a></cite>], en dit biedt mogelijkheden om semantische relaties te leggen tussen begrippenkaders. Wat we gedaan hebben is de status begrippen uit het SOR begrippenkader verbinden met de overeenkomstige begrippen van BAG en BGT (die ook gepubliceerde begrippenkaders hebben) door middel van mapping relaties.
</p><p>De orchestratielaag kon deze relaties tussen begrippen gebruiken voor de transponering en de Lookup API kan daardoor gegeven een SOR status een BAG status vinden of gegeven een BAG status een SOR status teruggeven.</p></section><section id="specificatie-vanuit-bron-of-doel"><h4 id="x16-2-8-specificatie-vanuit-bron-of-doel"><span class="secno">16.2.8 </span>Specificatie vanuit bron of doel</h4><p>Je kunt bij het maken van zo'n mappingspecificatie twee kanten op.
</p><ol>
<li>Je neemt de bron als uitgangspunt, en specificeert voor elk brongegeven wat de naam, structuur en inhoud van het resultaatgegeven moet zijn; een zogenaamde "push" transformatie.</li>
<li>Je neemt het gewenste resultaat als uitgangspunt, en specificeert voor elk resultaatgegeven waar je dat precies in de brondata kunt vinden; een zogenaamde "pull" transformatie ofwel "cherry-picking".
</li>
</ol><p>Onze eerste uitdaging was: welke van deze aanpakken kunnen we het beste als uitgangspunt nemen? We hebben gekozen voor aanpak 2. Waarom? </p><ul>
<li>In algemene zin is een push aanpak meer geschikt voor een mapping waarbij de doelstructuur erg lijkt op de bronstructuur, terwijl een pull aanpak beter werkt voor een mapping waarbij de doelstructuur erg afwijkt van de bron. De doel- en brongegevensstructuur verschillen niet fundamenteel van elkaar, wat zou pleiten voor een push aanpak; maar er zijn meer argumenten.</li>
<li>De SOR is gespecificeerd vanuit het gewenste einddoel en SOR objecten zijn daardoor vaak een combinatie van meerdere bronobjecten, zodat er niet één enkel bronobject als uitganspunt genomen kan worden;</li>
<li>De pull / cherry picking aanpak leent zich meer voor een geleidelijk ontwikkelproces waarbij er steeds meer gegevens aan de SOR objecten kunnen worden toegevoegd, ongeacht uit welke bronregistratie ze komen.</li>
</ul></section><section id="query-planning"><h4 id="x16-2-9-query-planning"><span class="secno">16.2.9 </span>Query planning</h4><p>Om de transponering te kunnen uitvoeren moet je ook de orchestratie logica vastleggen: de kennis over in welke gegevensbron je welke gegevens kan vinden en in welke volgorde je het beste de bronnen kan raadplegen als je er meerdere nodig hebt (wat in de SOR natuurlijk vaak zo is).
</p><p>De volgorde van het uitvoeren van de benodigde queries op een slimme manier bepalen is een uitdaging. We hopen dit op basis van configuratie, dus op basis van de declaratief uitgedrukte transponeringsregels te kunnen doen. </p><p>Het specifiek uitprogrammeren van deze volgorde in code moet vermeden worden.</p></section></section><section id="bevindingen-over-lookup-apis-en-orchestratie"><h3 id="x16-3-bevindingen-over-lookup-apis-en-orchestratie"><span class="secno">16.3 </span>Bevindingen over Lookup APIs en orchestratie</h3><p>Deze bevindingen gaan over de orchestratie en over de Lookup APIs die zowel in de onderste als de bovenste laag (de SOR laag) voorkomen.
</p><section id="gestandaardiseerd-graphql-profiel"><h4 id="x16-3-1-gestandaardiseerd-graphql-profiel"><span class="secno">16.3.1 </span>Gestandaardiseerd GraphQL profiel</h4><p>De Lookup API SOR, Lookup API BGT en Lookup API BAG hebben om diverse redenen een GraphQL endpoint. GraphQL is een low level standaard waarmee je alle kanten op kunt, en er is nog geen gestandaardiseerd profiel voor, dat beschrijft hoe je bijvoorbeeld omgaat met naamgeving, filteren, paginering, sortering etc. zoals de API Design Rules (uit de NL API strategie) dat doen voor REST APIs.
</p><p>Er is in elke afnemende API van de Lookup API SOR een mapping nodig waarin de data wordt gefilterd en omgezet naar de gewenste structuur. Deze mapping moet beheerd worden. </p><p>Hetzelfde geldt bij de Lookup API SOR zelf, die bevragingen doet bij de Lookup API BGT en Lookup API BAG. Ook voor deze interfaces moet in de Lookup API SOR specifieke code geschreven worden. In deze High-5 setting is dit nog te overzien, maar in de grotere context van de SOR is het programmeren en beheren van de orchestratie niet meer te doen zonder gestandaardiseerd GraphQL profiel.
</p><p>Hier lopen we in feite tegen hetzelfde probleem aan als bij de <a href="https://docs.geostandaarden.nl/disgeo/dll/#api-versus-knowledge-graph">eerste High 5 demonstrator</a> die werd gebouwd bovenop bestaande, APIs die niet aan een gestandaardiseerd profiel voldeden. De laag met de semantiek en orchestratie zou niet te beheren zijn, concludeerden we toen. </p><p>We denken wel dat dit deels te beheersen is, mits er gestandaardiseerd wordt. Dit brengt de hoeveelheid specifieke code aanzienlijk terug. Een belangrijke bevinding van deze High-5 is dus <strong>dat efficiënte orchestratie uniformiteit in Lookup API’s vereist</strong>. Een gestandaardiseerd GraphQL profiel is nodig, dat in ieder geval in de context van de SOR architectuur, voor de samenhangende registraties, wordt gehanteerd. In dit profiel kunnen net zoals in de API strategie voor REST APIs vaak gehanteerde interface elementen en toegangspatronen t.b.v. orchestratie (o.a. batching) gestandaardiseerd worden.</p></section><section id="batch-bevraging"><h4 id="x16-3-2-batch-bevraging"><span class="secno">16.3.2 </span>Batch bevraging</h4><p>Als een gebruiker aan de SOR API een collectie van objecten opvraagt, moet de Lookup API SOR daarvoor eerst naar de BAG, en vervolgens naar de BGT met een set BAG identificaties om de aanvullende BGT gegevens erbij te vinden. In die tweede stap wordt nu per identificatie een individuele zoekvraag gesteld. Het zou handig zijn om die te kunnen bundelen in een batch bevraging.</p><p>Dit is vergelijkbaar met de constatering vanuit het SPARQL endpoint dat een bulkbevraging nodig was. Dit geldt dus voor zowel de Lookup API SOR als die van de BAG en BGT in de laag Ontsluiting data.</p></section><section id="performance-en-andere-non-functionals"><h4 id="x16-3-3-performance-en-andere-non-functionals"><span class="secno">16.3.3 </span>Performance en andere non-functionals</h4><p>Performance van de APIs is een belangrijk aspect, dat samenhangt met het eerder genoemde query planning. Cruciaal is dat elk van de services die data leveren voor de SOR op zich al goede performance moeten hebben, anders kunnen georchestreerde SOR services ook nooit snel worden. Non-functional aspecten zijn in deze architectuur extra belangrijk want je bent zo zwak als de zwakste schakel.
</p><p>In deze High-5 setting bleken de extra schakels in het netwerk (APIs bovenop APIs) qua performance verwaarloosbaar: elk stapje kost maar enkele milliseconden. Ook de impact van on the fly transponering was heel beperkt, vooral bij eenvoudige omzettingen zoals een gegeven van naam veranderen. Een belangrijke kanttekening is wel dat we natuurlijk niet met grote datavolumes gewerkt hebben. Mocht performance wel een issue worden, dan kan daaraan nog veel gedaan worden, bijvoorbeeld onderdelen van een query tegelijktijdig uitvoeren.
</p><p>Bij complexere transponeringsregels die zwaar op de techniek drukken kan een afweging gemaakt worden, of je die via de techniek moet oplossen of, als ze waarde opleveren, in de bron van de basisregistraties.</p><p>Ruimtelijke vragen zijn niet per sé een aandachtspunt wat betreft performance. Maar hoge performance loopt wel in het algemeen gevaar als je een vraag stelt waarop een grote selectie aan objecten terugkomt. Hoe ga je die sorteren, pagineren etc.? Dat zijn zware operaties.</p><p>De DiS Geo architectuurbeschrijving [<cite><a class="bibref" href="#bib-arch">ARCH</a></cite>] noemt een aantal niet-functionele eisen die van belang zijn voor SOR voorzieningen, waaronder performance maar ook andere eisen. Dat deze eisen aan de SOR gesteld worden betekent dat de services die onder de SOR liggen hier ook aan moeten voldoen. Ze moeten allemaal een hoge uptime hebben, goede foutafhandeling hebben, fouten en performance moeten traceerbaar zijn, etc.
</p><p><strong>Aanbeveling:</strong> Een verdere uitwerking van de SOR voorzieningen architectuur / de niet-functionele eisen aan de onderliggende services is nodig.</p></section><section id="versionering-van-api-s"><h4 id="x16-3-4-versionering-van-api-s"><span class="secno">16.3.4 </span>Versionering van API's</h4><p>In de loop der tijd zullen APIs worden doorontwikkeld en veranderen - zoals ook de onderliggende informatiemodellen. Dit is een uitdaging: als de onderliggende APIs van de SOR veranderen raakt dit de orchestratie / transponeringslaag. <a href="https://semver.org/lang/nl/">Semantic versioning</a> is daarom nodig.</p></section></section><section id="bevindingen-over-de-rest-api"><h3 id="x16-4-bevindingen-over-de-rest-api"><span class="secno">16.4 </span>Bevindingen over de REST API</h3><p>Het realiseren van de REST API verliep zonder bijzondere problemen en kostte niet veel tijd (binnen 2 dagen gerealiseerd).
</p><p>Zoals bij alle van de Lookup API afnemende services was er een on the fly mapping nodig van het graphql endpoint naar de gewenste gegevensstructuur in de REST API.</p></section><section id="bevindingen-over-de-uri-dereferencing-service"><h3 id="x16-5-bevindingen-over-de-uri-dereferencing-service"><span class="secno">16.5 </span>Bevindingen over de URI Dereferencing Service</h3><p>Net als de REST API was deze snel te realiseren en waren er geen problemen mee. Een beperking is wel dat je per definitie altijd maar één object tegelijk kan opvragen aan deze service. In sommige situaties is een bulk bevraging handiger. Dat biedt deze service, vanwege de aard van URI dereferencing, niet.</p><p>Heel mooi is dat alle endpoints, dus zowel de REST API, de OGC Features API en de Linked Data API, uiteindelijk naar <strong>dezelfde URI</strong> voor een gegeven object oplossen (dereferencing). Elk object heeft dus een universele URI identificatie die werkt over meerdere technische ontsluitingen heen.</p></section><section id="bevindingen-over-ogc-api-features"><h3 id="x16-6-bevindingen-over-ogc-api-features"><span class="secno">16.6 </span>Bevindingen over OGC API Features</h3><section id="aansluiten-op-lookup-api-was-niet-eenvoudig"><h4 id="x16-6-1-aansluiten-op-lookup-api-was-niet-eenvoudig"><span class="secno">16.6.1 </span>Aansluiten op Lookup API was niet eenvoudig</h4><p>Het aansluiten van de OGC API Features op de graphql gebaseerde Lookup API SOR was niet eenvoudig. Er moest specifieke code worden geschreven om de data te verkrijgen en om te vormen (bijvoorbeeld voor het uitfilteren van attributen en 'plat slaan' van geneste structuur). Voor een OGC API Features is dit niet nodig als de data al in een Postgres database of een Geopackage bestand zit in de juiste structuur. De ETL stappen zijn dan al gedaan; in de huidige situatie wordt er in feite nog ETL gedaan IN de API op het laatste moment.</p><p>Het schrijven van deze specifieke code is meer werk ten opzichte van het gebruik van een standaard GIS opslagmethode en blijkt bovendien ook wat lastiger dan verwacht. Je krijgt ook een beheerslast: als er in de Lookup API gegevens bij komen, moet er in de specifieke code ook weer iets aangepast worden met betrekking tot het wel of niet doorleveren van die gegevens.</p></section><section id="coordinaatreferentiesysteem"><h4 id="x16-6-2-coordinaatreferentiesysteem"><span class="secno">16.6.2 </span>Coördinaatreferentiesysteem</h4><p>OGC API Features: Part 1 schrijft als coördinaatreferentiesysteem WGS 84 longitude/latitude voor (i.e. <a href="http://www.opengis.net/def/crs/OGC/1.3/CRS84">http://www.opengis.net/def/crs/OGC/1.3/CRS84</a>). De Lookup API serveerde standaard de gegevens in het coördinaatreferentiesysteem van de bron, zijnde RD.
</p><p>Om dit op te lossen is in de Lookup API de optie geïmplementeerd om de gegevens in plaats van in RD, in ETRS 89 op te vragen. Tussen ETRS 89 en WGS 84 zit maar een kleine afwijking, en een hoge nauwkeurigheid is in dit geval niet belangrijk, dus we kunnen WGS 84 gelijkstellen aan ETRS 89, zoals beschreven in de nieuwe handreiking over  coördinaatreferentiesystemen van Geonovum [<cite><a class="bibref" href="#bib-crs">CRS</a></cite>]. De ETRS 89 coördinaten kunnen in de OGC API Features opgenomen worden in de GeoJSON output als zijnde WGS 84.
</p></section><section id="geo-graphql"><h4 id="x16-6-3-geo-graphql"><span class="secno">16.6.3 </span>"Geo-Graphql"</h4><p>Vanuit de realisatie van de OGC API Features zien we, naast behoefte aan een standaard Graphql profiel, ook behoefte aan een standaard afspraak over 'geo-graphql', dat wil zeggen over hoe je ruimtelijke vragen kan stellen aan een Graphql endpoint.
</p><p>Het is niet gelukt om de OGC API Features op de LookUP API aan te sluiten zonder hard codeerwerk. Het lijkt erop dat een profiel/standaard kan helpen, maar zelfs als dat er is kan er nog hard codeerwerk nodig zijn. Op zich is dit niet heel veel werk maar het zegt wel iets en het betekent dat er mogelijk programmeerwerk nodig is bij latere wijzigingen in APIs. Dit is niet wenselijk want het maakt de oplossing beduidend minder flexibel.
</p></section></section><section id="linked-data-api-en-knowledge-graph"><h3 id="x16-7-linked-data-api-en-knowledge-graph"><span class="secno">16.7 </span>Linked Data API en Knowledge Graph</h3><p>Al snel op de eerste dag lukte het om de knowledge graph te vullen door de URI Dereferencing Service te bevragen. Dit was zeer eenvoudig te implementeren omdat de Web- en Linked Data standaarden voor interoperabiliteit zorgen. Zodra de data in de knowledge graph zat, was het ook eenvoudig om daar vervolgens integrale bevragingen op te doen en de resultaten te visualiseren.
</p><p>Ook was het goed mogelijk de data te integreren met andere beschikbare linked data. Hiervoor is gewerkt met een linkset waarin de relatie van BAG panden met de buurt waarin ze liggen administratief is uitgedrukt. </p><section id="bulkbevraging"><h4 id="x16-7-1-bulkbevraging"><span class="secno">16.7.1 </span>Bulkbevraging</h4><p>Ten behoeve van de knowledge graph is er behoefte aan het in bulk kunnen opvragen van een grote hoeveelheid data uit de Lookup API. Tijdens deze High-5 hebben we bulk bevragingen echter bewust buiten scope geplaatst (moeilijk binnen 3 dagen te realiseren) en de Lookup API biedt deze mogelijkheid nu dus niet. Daarom werd in eerste instantie de RDF data voor de hele gemeente Dronten via puntbevraging (per object op basis van een lijst met alle identifiers binnen de gemeente) opgehaald vanuit de URI Dereferencing Service. Omdat dit nogal lang duurt is als workaround ervoor gekozen om alleen de data voor het dorp Swifterbant op te vragen.
</p><p>Uiteraard wordt, zodra er meer tijd is, zo'n bulkbevragingsvoorziening wel gerealiseerd.</p></section></section></section><section class="appendix" data-format="markdown" id="imsor-gebouw-model-eerste-iteratie"><!--OddPage--><h2 id="a-imsor-gebouw-model-eerste-iteratie"><span class="secno">A. </span>IMSOR Gebouw model - eerste iteratie</h2><p>Hieronder zijn de tijdens het eerste deel van de High-5 (in augustus 2021) gemaakte diagrammen afgebeeld die het IMSOR Gebouw model weergeven. In november is dit model ingrijpend aangepast. Dit is te vinden in <a href="#imsor-gebouw-0" class="sec-ref"><span class="secno">§&nbsp;8.</span> <span class="sec-title">IMSOR Gebouw</span></a>.
</p><p>Onderstaande geeft de verouderde versie van het IMSOR Gebouw model weer: </p><figure id="imsor-gebouw"><img src="media/imsor-gebouw.drawio.png" alt="imsor-gebouw">
<figcaption>Figuur <span class="figno">32</span> <span class="fig-title">IMSOR Gebouw</span></figcaption>
</figure><figure id="imsor-gebouw-sector"><img src="media/imsor-gebouw-sector.drawio.png" alt="imsor-gebouw-sector">
<figcaption>Figuur <span class="figno">33</span> <span class="fig-title">IMSOR Gebouw inclusief semantische koppeling van registraties</span></figcaption>
</figure></section><section id="references" class="appendix">
      <!--OddPage--><h2 id="b-referenties"><span class="secno">B. </span>Referenties</h2>
      
    <section id="normatieve-referenties">
        <h3 id="b-1-normatieve-referenties"><span class="secno">B.1 </span>Normatieve referenties</h3>
      <dl class="bibliography">
        <dt id="bib-adr">[ADR]</dt><dd><a href="https://publicatie.centrumvoorstandaarden.nl/api/adr/"><cite>API Design Rules (Nederlandse API Strategie IIa)</cite></a>.  Geonovum. Definitief. URL: <a href="https://publicatie.centrumvoorstandaarden.nl/api/adr/">https://publicatie.centrumvoorstandaarden.nl/api/adr/</a></dd><dt id="bib-arch">[ARCH]</dt><dd><a href="https://docs.geostandaarden.nl/disgeo/arch/"><cite>DiS Geo: Architectuurbeschrijving Voorzieningen Samenhangende Objectenregistratie</cite></a>.  Geonovum. Versie ter vaststelling. URL: <a href="https://docs.geostandaarden.nl/disgeo/arch/">https://docs.geostandaarden.nl/disgeo/arch/</a></dd><dt id="bib-crs">[CRS]</dt><dd><a href="https://docs.geostandaarden.nl/crs/cv-hr-crs-20211125/#transformatie-tussen-etrs89-en-itrs-wgs-84"><cite>Handreiking Gebruik coördinaatreferentiesystemen bij uitwisseling en visualisatie van geo-informatie</cite></a>.  Geonovum. Consultatieversie. URL: <a href="https://docs.geostandaarden.nl/crs/cv-hr-crs-20211125/#transformatie-tussen-etrs89-en-itrs-wgs-84">https://docs.geostandaarden.nl/crs/cv-hr-crs-20211125/#transformatie-tussen-etrs89-en-itrs-wgs-84</a></dd><dt id="bib-emso">[EMSO]</dt><dd><a href="https://docs.geostandaarden.nl/disgeo/emso/"><cite>Eisen aan model samenhangende objectregistratie</cite></a>. Sandra Leijten; Marcel Rietdijk; Dick Krijtenburg. Geonovum. Definitief. URL: <a href="https://docs.geostandaarden.nl/disgeo/emso/">https://docs.geostandaarden.nl/disgeo/emso/</a></dd><dt id="bib-gendoc">[GENDOC]</dt><dd><a href="https://geonovum.github.io/disgeo-imsor/documentatie/"><cite>Overzicht generieke onderwerpen voor DisGeo informatiemodellering</cite></a>.  Geonovum. levend document. URL: <a href="https://geonovum.github.io/disgeo-imsor/documentatie/">https://geonovum.github.io/disgeo-imsor/documentatie/</a></dd><dt id="bib-graphql">[GraphQL]</dt><dd><a href="https://facebook.github.io/graphql/"><cite>GraphQL</cite></a>. July 2015. Working Draft. URL: <a href="https://facebook.github.io/graphql/">https://facebook.github.io/graphql/</a></dd><dt id="bib-mim">[MIM]</dt><dd><a href="https://docs.geostandaarden.nl/mim/mim/"><cite>MIM - Metamodel Informatie Modellering</cite></a>.  Geonovum. 2020-10-23. Definitief. URL: <a href="https://docs.geostandaarden.nl/mim/mim/">https://docs.geostandaarden.nl/mim/mim/</a></dd><dt id="bib-modpr">[MODPR]</dt><dd><a href="https://geonovum.github.io/disgeo-imsor/modelleerprincipes/"><cite>Modelleerprincipes samenhangende objectenregistratie</cite></a>.  Geonovum. levend document. URL: <a href="https://geonovum.github.io/disgeo-imsor/modelleerprincipes/">https://geonovum.github.io/disgeo-imsor/modelleerprincipes/</a></dd><dt id="bib-mpsor">[MPSOR]</dt><dd><a href="https://geonovum.github.io/disgeo-imsor/modelleerprincipes/"><cite>Modelleerprincipes samenhangende objectenregistratie</cite></a>.  Geonovum. Werkversie 12 augustus 2021. URL: <a href="https://geonovum.github.io/disgeo-imsor/modelleerprincipes/">https://geonovum.github.io/disgeo-imsor/modelleerprincipes/</a></dd><dt id="bib-nen3610-2021-ontw">[NEN3610-2021-ontw]</dt><dd><cite>NEN-3610 Basismodel geo-informatie</cite>.  NEN. 2021. Ontwerp. </dd><dt id="bib-ogcapi-features">[ogcapi-features]</dt><dd><a href="http://docs.opengeospatial.org/is/17-069r3/17-069r3.html"><cite>OGC API - Features - Part 1: Core</cite></a>.  Open Geospatial Consortium. Approved. URL: <a href="http://docs.opengeospatial.org/is/17-069r3/17-069r3.html">http://docs.opengeospatial.org/is/17-069r3/17-069r3.html</a></dd><dt id="bib-prov-dm">[PROV-DM]</dt><dd><a href="https://www.w3.org/TR/prov-dm/"><cite>PROV-DM: The PROV Data Model</cite></a>. Luc Moreau; Paolo Missier. W3C. 30 April 2013. W3C Recommendation. URL: <a href="https://www.w3.org/TR/prov-dm/">https://www.w3.org/TR/prov-dm/</a></dd><dt id="bib-prov-o">[PROV-O]</dt><dd><a href="https://www.w3.org/TR/prov-o/"><cite>PROV-O: The PROV Ontology</cite></a>. Timothy Lebo; Satya Sahoo; Deborah McGuinness. W3C. 30 April 2013. W3C Recommendation. URL: <a href="https://www.w3.org/TR/prov-o/">https://www.w3.org/TR/prov-o/</a></dd><dt id="bib-shacl-af">[SHACL-AF]</dt><dd><a href="https://www.w3.org/TR/shacl-af/"><cite>SHACL Advanced Features</cite></a>. Holger Knublauch; Dean Allemang; Simon Steyskal. W3C. 8 June 2017. W3C Note. URL: <a href="https://www.w3.org/TR/shacl-af/">https://www.w3.org/TR/shacl-af/</a></dd><dt id="bib-skos-primer">[skos-primer]</dt><dd><a href="https://www.w3.org/TR/skos-primer/"><cite>SKOS Simple Knowledge Organization System Primer</cite></a>. Antoine Isaac; Ed Summers. W3C. 18 August 2009. W3C Note. URL: <a href="https://www.w3.org/TR/skos-primer/">https://www.w3.org/TR/skos-primer/</a></dd>
      </dl></section></section><p role="navigation" id="back-to-top"><a href="#title">
  <abbr title="Naar begin">↑</abbr></a></p><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>